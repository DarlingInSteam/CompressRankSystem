2025-04-17 00:39:59.714 | 
2025-04-17 00:39:59.714 |   .   ____          _            __ _ _
2025-04-17 00:39:59.714 |  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2025-04-17 00:39:59.714 | ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2025-04-17 00:39:59.714 |  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2025-04-17 00:39:59.714 |   '  |____| .__|_| |_|_| |_\__, | / / / /
2025-04-17 00:39:59.714 |  =========|_|==============|___/=/_/_/_/
2025-04-17 00:39:59.716 |  :: Spring Boot ::                (v3.1.5)
2025-04-17 00:39:59.716 | 
2025-04-17 00:39:59.975 | 2025-04-16T17:39:59.953Z  INFO 1 --- [           main] iGatewayCompressionRankSystemApplication : Starting ApiGatewayCompressionRankSystemApplication v0.0.1-SNAPSHOT using Java 17.0.2 with PID 1 (/app/app.jar started by root in /app)
2025-04-17 00:39:59.976 | 2025-04-16T17:39:59.976Z DEBUG 1 --- [           main] iGatewayCompressionRankSystemApplication : Running with Spring Boot v3.1.5, Spring v6.0.13
2025-04-17 00:39:59.983 | 2025-04-16T17:39:59.983Z  INFO 1 --- [           main] iGatewayCompressionRankSystemApplication : No active profile set, falling back to 1 default profile: "default"
2025-04-17 00:40:03.383 | 2025-04-16T17:40:03.382Z  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-04-17 00:40:03.387 | 2025-04-16T17:40:03.387Z  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-04-17 00:40:03.430 | 2025-04-16T17:40:03.429Z  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2025-04-17 00:40:03.949 | 2025-04-16T17:40:03.948Z  INFO 1 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=90cc04e8-52ba-300c-b91d-7fb291d33da9
2025-04-17 00:40:04.460 | 2025-04-16T17:40:04.453Z DEBUG 1 --- [           main] reactor.netty.tcp.TcpResources           : [http] resources will use the default LoopResources: DefaultLoopResources {prefix=reactor-http, daemon=true, selectCount=12, workerCount=12}
2025-04-17 00:40:04.460 | 2025-04-16T17:40:04.460Z DEBUG 1 --- [           main] reactor.netty.tcp.TcpResources           : [http] resources will use the default ConnectionProvider: reactor.netty.resources.DefaultPooledConnectionProvider@7e38a7fe
2025-04-17 00:40:06.283 | 2025-04-16T17:40:06.282Z DEBUG 1 --- [           main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='image-storage-api', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/images/**}}], filters=[FilterDefinition{name='RequestRateLimiter', args={key-resolver=#{@ipKeyResolver}, redis-rate-limiter.replenishRate=50, redis-rate-limiter.burstCapacity=100}}, FilterDefinition{name='Retry', args={retries=3, statuses=BAD_GATEWAY,GATEWAY_TIMEOUT,SERVICE_UNAVAILABLE, methods=GET,POST, backoff.firstBackoff=50ms, backoff.maxBackoff=500ms, backoff.factor=2, backoff.basedOnPreviousValue=false}}, FilterDefinition{name='CircuitBreaker', args={name=imageStorageCircuitBreaker, fallbackUri=forward:/fallback/image-storage}}], uri=http://image-storage:8081, order=0, metadata={}}, RouteDefinition{id='compression-api', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/compression/**}}], filters=[FilterDefinition{name='RequestRateLimiter', args={key-resolver=#{@ipKeyResolver}, redis-rate-limiter.replenishRate=30, redis-rate-limiter.burstCapacity=60}}, FilterDefinition{name='Retry', args={retries=3, statuses=BAD_GATEWAY,GATEWAY_TIMEOUT,SERVICE_UNAVAILABLE, methods=GET,POST, backoff.firstBackoff=50ms, backoff.maxBackoff=500ms, backoff.factor=2, backoff.basedOnPreviousValue=false}}, FilterDefinition{name='CircuitBreaker', args={name=compressionCircuitBreaker, fallbackUri=forward:/fallback/compression}}], uri=http://compression-service:8080, order=0, metadata={}}, RouteDefinition{id='openapi', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/v3/api-docs/**, _genkey_1=/swagger-ui/**, _genkey_2=/swagger-ui.html, _genkey_3=/webjars/**}}], filters=[FilterDefinition{name='RewritePath', args={_genkey_0=/(?<segment>.*), _genkey_1=/$\{segment}}}], uri=http://localhost:8082, order=0, metadata={}}]
2025-04-17 00:40:07.597 | 2025-04-16T17:40:07.596Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-04-17 00:40:07.597 | 2025-04-16T17:40:07.597Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-04-17 00:40:07.597 | 2025-04-16T17:40:07.597Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-04-17 00:40:07.597 | 2025-04-16T17:40:07.597Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-04-17 00:40:07.597 | 2025-04-16T17:40:07.597Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-04-17 00:40:07.597 | 2025-04-16T17:40:07.597Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-04-17 00:40:07.598 | 2025-04-16T17:40:07.597Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-04-17 00:40:07.598 | 2025-04-16T17:40:07.597Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-04-17 00:40:07.599 | 2025-04-16T17:40:07.597Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-04-17 00:40:07.599 | 2025-04-16T17:40:07.599Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-04-17 00:40:07.599 | 2025-04-16T17:40:07.599Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-04-17 00:40:07.599 | 2025-04-16T17:40:07.599Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-17 00:40:07.599 | 2025-04-16T17:40:07.599Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-04-17 00:40:07.599 | 2025-04-16T17:40:07.599Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-17 00:40:07.664 | 2025-04-16T17:40:07.664Z  INFO 1 --- [           main] ctiveUserDetailsServiceAutoConfiguration : 
2025-04-17 00:40:07.664 | 
2025-04-17 00:40:07.664 | Using generated security password: 83431fd9-017c-49f3-aa4a-6049961ac9e3
2025-04-17 00:40:07.664 | 
2025-04-17 00:40:08.225 | 2025-04-16T17:40:08.225Z DEBUG 1 --- [           main] s.w.r.r.m.a.RequestMappingHandlerMapping : 13 mappings in 'requestMappingHandlerMapping'
2025-04-17 00:40:08.833 | 2025-04-16T17:40:08.833Z DEBUG 1 --- [           main] o.s.w.r.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-04-17 00:40:09.212 | 2025-04-16T17:40:09.211Z  INFO 1 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoint(s) beneath base path '/actuator'
2025-04-17 00:40:09.337 | 2025-04-16T17:40:09.336Z DEBUG 1 --- [           main] o.s.w.r.r.m.a.ControllerMethodResolver   : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 @ExceptionHandler
2025-04-17 00:40:09.383 | 2025-04-16T17:40:09.382Z DEBUG 1 --- [           main] o.s.w.s.adapter.HttpWebHandlerAdapter    : enableLoggingRequestDetails='false': form data and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-04-17 00:40:09.942 | 2025-04-16T17:40:09.942Z DEBUG 1 --- [           main] r.netty.resources.DefaultLoopIOUring     : Default io_uring support : false
2025-04-17 00:40:09.943 | 2025-04-16T17:40:09.943Z DEBUG 1 --- [           main] r.netty.resources.DefaultLoopEpoll       : Default Epoll support : true
2025-04-17 00:40:10.102 | 2025-04-16T17:40:10.102Z DEBUG 1 --- [or-http-epoll-1] r.netty.transport.ServerTransport        : [ce0b5d00, L:/[0:0:0:0:0:0:0:0%0]:8082] Bound new server
2025-04-17 00:40:10.103 | 2025-04-16T17:40:10.103Z  INFO 1 --- [           main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8082
2025-04-17 00:40:10.157 | 2025-04-16T17:40:10.157Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition image-storage-api applying {_genkey_0=/api/images/**} to Path
2025-04-17 00:40:10.197 | 2025-04-16T17:40:10.196Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition image-storage-api applying filter {key-resolver=#{@ipKeyResolver}, redis-rate-limiter.replenishRate=50, redis-rate-limiter.burstCapacity=100} to RequestRateLimiter
2025-04-17 00:40:10.240 | 2025-04-16T17:40:10.240Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition image-storage-api applying filter {retries=3, statuses=BAD_GATEWAY,GATEWAY_TIMEOUT,SERVICE_UNAVAILABLE, methods=GET,POST, backoff.firstBackoff=50ms, backoff.maxBackoff=500ms, backoff.factor=2, backoff.basedOnPreviousValue=false} to Retry
2025-04-17 00:40:10.258 | 2025-04-16T17:40:10.257Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition image-storage-api applying filter {name=imageStorageCircuitBreaker, fallbackUri=forward:/fallback/image-storage} to CircuitBreaker
2025-04-17 00:40:10.272 | 2025-04-16T17:40:10.272Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: image-storage-api
2025-04-17 00:40:10.272 | 2025-04-16T17:40:10.272Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition compression-api applying {_genkey_0=/api/compression/**} to Path
2025-04-17 00:40:10.274 | 2025-04-16T17:40:10.274Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition compression-api applying filter {key-resolver=#{@ipKeyResolver}, redis-rate-limiter.replenishRate=30, redis-rate-limiter.burstCapacity=60} to RequestRateLimiter
2025-04-17 00:40:10.276 | 2025-04-16T17:40:10.276Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition compression-api applying filter {retries=3, statuses=BAD_GATEWAY,GATEWAY_TIMEOUT,SERVICE_UNAVAILABLE, methods=GET,POST, backoff.firstBackoff=50ms, backoff.maxBackoff=500ms, backoff.factor=2, backoff.basedOnPreviousValue=false} to Retry
2025-04-17 00:40:10.281 | 2025-04-16T17:40:10.281Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition compression-api applying filter {name=compressionCircuitBreaker, fallbackUri=forward:/fallback/compression} to CircuitBreaker
2025-04-17 00:40:10.282 | 2025-04-16T17:40:10.282Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: compression-api
2025-04-17 00:40:10.282 | 2025-04-16T17:40:10.282Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition openapi applying {_genkey_0=/v3/api-docs/**, _genkey_1=/swagger-ui/**, _genkey_2=/swagger-ui.html, _genkey_3=/webjars/**} to Path
2025-04-17 00:40:10.283 | 2025-04-16T17:40:10.283Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition openapi applying filter {_genkey_0=/(?<segment>.*), _genkey_1=/$\{segment}} to RewritePath
2025-04-17 00:40:10.286 | 2025-04-16T17:40:10.286Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: openapi
2025-04-17 00:40:10.293 | 2025-04-16T17:40:10.293Z DEBUG 1 --- [           main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 3
2025-04-17 00:40:10.300 | 2025-04-16T17:40:10.300Z  INFO 1 --- [           main] iGatewayCompressionRankSystemApplication : Started ApiGatewayCompressionRankSystemApplication in 11.571 seconds (process running for 12.946)
2025-04-17 00:40:12.495 | 2025-04-16T17:40:12.494Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [807b81eb, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:50204] New http connection, requesting read
2025-04-17 00:40:12.495 | 2025-04-16T17:40:12.495Z DEBUG 1 --- [or-http-epoll-2] r.netty.transport.TransportConfig        : [807b81eb, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:50204] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:40:12.518 | 2025-04-16T17:40:12.518Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [807b81eb, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:50204] Increasing pending responses, now 1
2025-04-17 00:40:12.525 | 2025-04-16T17:40:12.524Z DEBUG 1 --- [or-http-epoll-2] reactor.netty.http.server.HttpServer     : [807b81eb-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:50204] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@27fcbc7f
2025-04-17 00:40:12.537 | 2025-04-16T17:40:12.537Z DEBUG 1 --- [or-http-epoll-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [807b81eb-1] HTTP GET "/actuator/health"
2025-04-17 00:40:12.576 | 2025-04-16T17:40:12.576Z DEBUG 1 --- [or-http-epoll-2] reactor.netty.ReactorNetty               : [807b81eb-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:50204] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:40:12.577 | 2025-04-16T17:40:12.576Z DEBUG 1 --- [     parallel-1] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 00:40:12.582 | 2025-04-16T17:40:12.582Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 00:40:12.585 | 2025-04-16T17:40:12.585Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'POST /logout'
2025-04-17 00:40:12.585 | 2025-04-16T17:40:12.585Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:40:12.591 | 2025-04-16T17:40:12.591Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 00:40:12.592 | 2025-04-16T17:40:12.591Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /v3/api-docs/**'
2025-04-17 00:40:12.592 | 2025-04-16T17:40:12.592Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 00:40:12.592 | 2025-04-16T17:40:12.592Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui/**'
2025-04-17 00:40:12.592 | 2025-04-16T17:40:12.592Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 00:40:12.592 | 2025-04-16T17:40:12.592Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui.html'
2025-04-17 00:40:12.592 | 2025-04-16T17:40:12.592Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 00:40:12.592 | 2025-04-16T17:40:12.592Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /webjars/**'
2025-04-17 00:40:12.593 | 2025-04-16T17:40:12.592Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:40:12.593 | 2025-04-16T17:40:12.593Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 00:40:12.593 | 2025-04-16T17:40:12.593Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/actuator/health'; against '/actuator/health/**'
2025-04-17 00:40:12.593 | 2025-04-16T17:40:12.593Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 00:40:12.594 | 2025-04-16T17:40:12.594Z DEBUG 1 --- [     parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/actuator/health' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x0000000801210430@28cd420f
2025-04-17 00:40:12.595 | 2025-04-16T17:40:12.595Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 00:40:12.618 | 2025-04-16T17:40:12.617Z DEBUG 1 --- [     parallel-1] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@27e349b8'
2025-04-17 00:40:12.961 | 2025-04-16T17:40:12.961Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [807b81eb-1] Using 'application/vnd.spring-boot.actuator.v3+json' given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-04-17 00:40:12.961 | 2025-04-16T17:40:12.961Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [807b81eb-1] 0..1 [org.springframework.boot.actuate.health.SystemHealth]
2025-04-17 00:40:13.004 | 2025-04-16T17:40:13.004Z DEBUG 1 --- [llEventLoop-5-1] org.springframework.web.HttpLogging      : [807b81eb-1] Encoding [org.springframework.boot.actuate.health.SystemHealth@18c1e13]
2025-04-17 00:40:13.036 | 2025-04-16T17:40:13.035Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [807b81eb-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:50204] Decreasing pending responses, now 0
2025-04-17 00:40:13.038 | 2025-04-16T17:40:13.037Z DEBUG 1 --- [or-http-epoll-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [807b81eb-1] Completed 200 OK
2025-04-17 00:40:13.039 | 2025-04-16T17:40:13.039Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [807b81eb-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:50204] Last HTTP response frame
2025-04-17 00:40:13.040 | 2025-04-16T17:40:13.039Z DEBUG 1 --- [or-http-epoll-2] r.netty.channel.ChannelOperations        : [807b81eb-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:50204] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 00:40:13.040 | 2025-04-16T17:40:13.039Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [807b81eb-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:50204] Last HTTP packet was sent, terminating the channel
2025-04-17 00:40:38.913 | 2025-04-16T17:40:38.912Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [780261b2, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] New http connection, requesting read
2025-04-17 00:40:38.913 | 2025-04-16T17:40:38.913Z DEBUG 1 --- [or-http-epoll-3] r.netty.transport.TransportConfig        : [780261b2, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:40:38.916 | 2025-04-16T17:40:38.916Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [780261b2, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Increasing pending responses, now 1
2025-04-17 00:40:38.916 | 2025-04-16T17:40:38.916Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.http.server.HttpServer     : [780261b2-1, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@27fcbc7f
2025-04-17 00:40:38.917 | 2025-04-16T17:40:38.917Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [780261b2-2] HTTP GET "/api/images"
2025-04-17 00:40:38.933 | 2025-04-16T17:40:38.933Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.ReactorNetty               : [780261b2-1, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:40:38.934 | 2025-04-16T17:40:38.934Z DEBUG 1 --- [     parallel-2] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 00:40:38.934 | 2025-04-16T17:40:38.934Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 00:40:38.934 | 2025-04-16T17:40:38.934Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'POST /logout'
2025-04-17 00:40:38.934 | 2025-04-16T17:40:38.934Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:40:38.935 | 2025-04-16T17:40:38.935Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 00:40:38.935 | 2025-04-16T17:40:38.935Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 00:40:38.935 | 2025-04-16T17:40:38.935Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 00:40:38.935 | 2025-04-16T17:40:38.935Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 00:40:38.935 | 2025-04-16T17:40:38.935Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 00:40:38.936 | 2025-04-16T17:40:38.935Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 00:40:38.936 | 2025-04-16T17:40:38.935Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 00:40:38.936 | 2025-04-16T17:40:38.936Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /webjars/**'
2025-04-17 00:40:38.936 | 2025-04-16T17:40:38.936Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:40:38.936 | 2025-04-16T17:40:38.936Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 00:40:38.936 | 2025-04-16T17:40:38.936Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 00:40:38.936 | 2025-04-16T17:40:38.936Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 00:40:38.936 | 2025-04-16T17:40:38.936Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /actuator/info'
2025-04-17 00:40:38.937 | 2025-04-16T17:40:38.936Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:40:38.937 | 2025-04-16T17:40:38.936Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 00:40:38.937 | 2025-04-16T17:40:38.936Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /fallback/**'
2025-04-17 00:40:38.937 | 2025-04-16T17:40:38.936Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:40:38.937 | 2025-04-16T17:40:38.937Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 00:40:38.937 | 2025-04-16T17:40:38.937Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 00:40:38.937 | 2025-04-16T17:40:38.937Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 00:40:38.937 | 2025-04-16T17:40:38.937Z DEBUG 1 --- [     parallel-2] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x0000000801210430@28cd420f
2025-04-17 00:40:38.937 | 2025-04-16T17:40:38.937Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 00:40:38.945 | 2025-04-16T17:40:38.944Z DEBUG 1 --- [     parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 00:40:38.949 | 2025-04-16T17:40:38.949Z DEBUG 1 --- [     parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1298/0x0000000801308208@541264d8, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 00:40:38.949 | 2025-04-16T17:40:38.949Z DEBUG 1 --- [     parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [780261b2-2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@61ca35
2025-04-17 00:40:38.951 | 2025-04-16T17:40:38.950Z DEBUG 1 --- [     parallel-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@4b869331}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@4ad3d266}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@6754ef00}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@ce9b9a9}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4038cd3a}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@3f4cd155}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1298/0x0000000801308208@541264d8, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@3533df16}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@563a89b5}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@14ac77b9}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@38018b62}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@15d0849}, order = 2147483647]]
2025-04-17 00:40:38.956 | 2025-04-16T17:40:38.956Z  INFO 1 --- [     parallel-2] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images from 172.18.0.1 [request_id: 03e4c003-dec4-4022-8192-62f24ed7948a]
2025-04-17 00:40:38.962 | 2025-04-16T17:40:38.962Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.channel.FluxReceive        : [780261b2-1, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 00:40:38.999 | 2025-04-16T17:40:38.998Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=99, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 00:40:39.028 | 2025-04-16T17:40:39.028Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"03e4c003-dec4-4022-8192-62f24ed7948a", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:56194"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 00:40:39.033 | 2025-04-16T17:40:39.033Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5c1d86bc', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.00103341, duration(nanos)=1033410.0, startTimeNanos=24202008581383}'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7ea60990', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.094795672, duration(nanos)=9.4795672E7, startTimeNanos=24201915242191}'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1e8462ca', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=24201895200667}'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1ddcdc53', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.11554382, duration(nanos)=1.1554382E8, startTimeNanos=24201894743745}'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"03e4c003-dec4-4022-8192-62f24ed7948a", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:56194"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 00:40:39.051 | 2025-04-16T17:40:39.051Z DEBUG 1 --- [llEventLoop-5-1] r.n.resources.PooledConnectionProvider   : Creating a new [proxy] client pool [PoolFactory{evictionInterval=PT0S, leasingStrategy=fifo, maxConnections=2147483647, maxIdleTime=-1, maxLifeTime=-1, metricsEnabled=false, pendingAcquireMaxCount=-1, pendingAcquireTimeout=0}] for [image-storage/<unresolved>:8081]
2025-04-17 00:40:39.069 | 2025-04-16T17:40:39.068Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [62cb2f10] Created a new pooled channel, now: 0 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 00:40:39.075 | 2025-04-16T17:40:39.074Z DEBUG 1 --- [or-http-epoll-5] r.netty.transport.TransportConfig        : [62cb2f10] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpClientCodec), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:40:39.080 | 2025-04-16T17:40:39.080Z DEBUG 1 --- [or-http-epoll-5] r.netty.transport.TransportConnector     : [62cb2f10] Connecting to [image-storage/172.18.0.5:8081].
2025-04-17 00:40:39.083 | 2025-04-16T17:40:39.082Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Registering pool release on close event for channel
2025-04-17 00:40:39.083 | 2025-04-16T17:40:39.083Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Channel connected, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 00:40:39.083 | 2025-04-16T17:40:39.083Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}, [connected])
2025-04-17 00:40:39.088 | 2025-04-16T17:40:39.087Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10-1, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=null, connection=PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}}, [configured])
2025-04-17 00:40:39.088 | 2025-04-16T17:40:39.088Z DEBUG 1 --- [or-http-epoll-5] r.netty.http.client.HttpClientConnect    : [62cb2f10-1, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=GET}
2025-04-17 00:40:39.089 | 2025-04-16T17:40:39.089Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10-1, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}}, [request_prepared])
2025-04-17 00:40:39.093 | 2025-04-16T17:40:39.093Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10-1, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}}, [request_sent])
2025-04-17 00:40:39.166 | 2025-04-16T17:40:39.166Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [62cb2f10-1, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 00:40:39.167 | HTTP/1.1 200 
2025-04-17 00:40:39.167 | Vary: <filtered>
2025-04-17 00:40:39.167 | Vary: <filtered>
2025-04-17 00:40:39.167 | Vary: <filtered>
2025-04-17 00:40:39.167 | Access-Control-Allow-Origin: <filtered>
2025-04-17 00:40:39.167 | Access-Control-Expose-Headers: <filtered>
2025-04-17 00:40:39.167 | Access-Control-Allow-Credentials: <filtered>
2025-04-17 00:40:39.167 | Content-Type: <filtered>
2025-04-17 00:40:39.167 | Transfer-Encoding: <filtered>
2025-04-17 00:40:39.167 | Date: <filtered>
2025-04-17 00:40:39.167 | 2025-04-16T17:40:39.166Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10-1, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}}, [response_received])
2025-04-17 00:40:39.167 | 2025-04-16T17:40:39.167Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 00:40:39.168 | 2025-04-16T17:40:39.168Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5c1d86bc', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.13650372, duration(nanos)=1.3650372E8, startTimeNanos=24202008581383}'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7ea60990', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.229920836, duration(nanos)=2.29920836E8, startTimeNanos=24201915242191}'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1e8462ca', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=24201895200667}'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1ddcdc53', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.250622871, duration(nanos)=2.50622871E8, startTimeNanos=24201894743745}'], parentObservation=null}}}}
2025-04-17 00:40:39.175 | 2025-04-16T17:40:39.174Z DEBUG 1 --- [or-http-epoll-5] reactor.netty.channel.FluxReceive        : [62cb2f10-1, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 00:40:39.179 | 2025-04-16T17:40:39.179Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [62cb2f10-1, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Received last HTTP packet
2025-04-17 00:40:39.179 | 2025-04-16T17:40:39.179Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}}, [response_completed])
2025-04-17 00:40:39.179 | 2025-04-16T17:40:39.179Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}}, [disconnecting])
2025-04-17 00:40:39.179 | 2025-04-16T17:40:39.179Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Releasing channel
2025-04-17 00:40:39.181 | 2025-04-16T17:40:39.180Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 00:40:39.182 | 2025-04-16T17:40:39.182Z  INFO 1 --- [or-http-epoll-3] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images - 200 in 231 ms [request_id: 03e4c003-dec4-4022-8192-62f24ed7948a]
2025-04-17 00:40:39.183 | 2025-04-16T17:40:39.183Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [780261b2-2] Completed 200 OK
2025-04-17 00:40:39.183 | 2025-04-16T17:40:39.183Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [780261b2-1, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Last HTTP response frame
2025-04-17 00:40:39.183 | 2025-04-16T17:40:39.183Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [780261b2-1, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Decreasing pending responses, now 0
2025-04-17 00:40:39.183 | 2025-04-16T17:40:39.183Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [780261b2-1, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Last HTTP packet was sent, terminating the channel
2025-04-17 00:40:39.183 | 2025-04-16T17:40:39.183Z DEBUG 1 --- [or-http-epoll-3] r.netty.channel.ChannelOperations        : [780261b2-1, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 00:40:43.064 | 2025-04-16T17:40:43.064Z DEBUG 1 --- [or-http-epoll-6] r.n.http.server.HttpServerOperations     : [d98c2b4a, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:40892] New http connection, requesting read
2025-04-17 00:40:43.064 | 2025-04-16T17:40:43.064Z DEBUG 1 --- [or-http-epoll-6] r.netty.transport.TransportConfig        : [d98c2b4a, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:40892] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:40:43.066 | 2025-04-16T17:40:43.066Z DEBUG 1 --- [or-http-epoll-6] r.n.http.server.HttpServerOperations     : [d98c2b4a, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:40892] Increasing pending responses, now 1
2025-04-17 00:40:43.067 | 2025-04-16T17:40:43.066Z DEBUG 1 --- [or-http-epoll-6] reactor.netty.http.server.HttpServer     : [d98c2b4a-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:40892] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@27fcbc7f
2025-04-17 00:40:43.067 | 2025-04-16T17:40:43.067Z DEBUG 1 --- [or-http-epoll-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d98c2b4a-3] HTTP GET "/actuator/health"
2025-04-17 00:40:43.068 | 2025-04-16T17:40:43.068Z DEBUG 1 --- [or-http-epoll-6] reactor.netty.ReactorNetty               : [d98c2b4a-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:40892] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:40:43.068 | 2025-04-16T17:40:43.068Z DEBUG 1 --- [     parallel-4] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 00:40:43.069 | 2025-04-16T17:40:43.069Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 00:40:43.069 | 2025-04-16T17:40:43.069Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'POST /logout'
2025-04-17 00:40:43.069 | 2025-04-16T17:40:43.069Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:40:43.069 | 2025-04-16T17:40:43.069Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 00:40:43.069 | 2025-04-16T17:40:43.069Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /v3/api-docs/**'
2025-04-17 00:40:43.069 | 2025-04-16T17:40:43.069Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 00:40:43.069 | 2025-04-16T17:40:43.069Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui/**'
2025-04-17 00:40:43.069 | 2025-04-16T17:40:43.069Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 00:40:43.069 | 2025-04-16T17:40:43.069Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui.html'
2025-04-17 00:40:43.069 | 2025-04-16T17:40:43.069Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 00:40:43.069 | 2025-04-16T17:40:43.069Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /webjars/**'
2025-04-17 00:40:43.070 | 2025-04-16T17:40:43.069Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:40:43.070 | 2025-04-16T17:40:43.070Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 00:40:43.070 | 2025-04-16T17:40:43.070Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Checking match of request : '/actuator/health'; against '/actuator/health/**'
2025-04-17 00:40:43.070 | 2025-04-16T17:40:43.070Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 00:40:43.070 | 2025-04-16T17:40:43.070Z DEBUG 1 --- [     parallel-4] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/actuator/health' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x0000000801210430@28cd420f
2025-04-17 00:40:43.070 | 2025-04-16T17:40:43.070Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 00:40:43.071 | 2025-04-16T17:40:43.071Z DEBUG 1 --- [     parallel-4] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@621ef7f4'
2025-04-17 00:40:43.073 | 2025-04-16T17:40:43.073Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [d98c2b4a-3] Using 'application/vnd.spring-boot.actuator.v3+json' given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-04-17 00:40:43.073 | 2025-04-16T17:40:43.073Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [d98c2b4a-3] 0..1 [org.springframework.boot.actuate.health.SystemHealth]
2025-04-17 00:40:43.074 | 2025-04-16T17:40:43.074Z DEBUG 1 --- [llEventLoop-5-1] org.springframework.web.HttpLogging      : [d98c2b4a-3] Encoding [org.springframework.boot.actuate.health.SystemHealth@4de40e13]
2025-04-17 00:40:43.076 | 2025-04-16T17:40:43.076Z DEBUG 1 --- [or-http-epoll-6] r.n.http.server.HttpServerOperations     : [d98c2b4a-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:40892] Decreasing pending responses, now 0
2025-04-17 00:40:43.077 | 2025-04-16T17:40:43.077Z DEBUG 1 --- [or-http-epoll-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d98c2b4a-3] Completed 200 OK
2025-04-17 00:40:43.077 | 2025-04-16T17:40:43.077Z DEBUG 1 --- [or-http-epoll-6] r.n.http.server.HttpServerOperations     : [d98c2b4a-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:40892] Last HTTP response frame
2025-04-17 00:40:43.077 | 2025-04-16T17:40:43.077Z DEBUG 1 --- [or-http-epoll-6] r.netty.channel.ChannelOperations        : [d98c2b4a-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:40892] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 00:40:43.077 | 2025-04-16T17:40:43.077Z DEBUG 1 --- [or-http-epoll-6] r.n.http.server.HttpServerOperations     : [d98c2b4a-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:40892] Last HTTP packet was sent, terminating the channel
2025-04-17 00:40:43.671 | 2025-04-16T17:40:43.671Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [780261b2, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Increasing pending responses, now 1
2025-04-17 00:40:43.671 | 2025-04-16T17:40:43.671Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.http.server.HttpServer     : [780261b2-2, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@27fcbc7f
2025-04-17 00:40:43.674 | 2025-04-16T17:40:43.674Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [780261b2-4] HTTP POST "/api/images"
2025-04-17 00:40:43.677 | 2025-04-16T17:40:43.676Z DEBUG 1 --- [     parallel-5] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 00:40:43.677 | 2025-04-16T17:40:43.677Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 00:40:43.677 | 2025-04-16T17:40:43.677Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 00:40:43.677 | 2025-04-16T17:40:43.677Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:40:43.678 | 2025-04-16T17:40:43.677Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 00:40:43.678 | 2025-04-16T17:40:43.678Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 00:40:43.678 | 2025-04-16T17:40:43.678Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 00:40:43.678 | 2025-04-16T17:40:43.678Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 00:40:43.678 | 2025-04-16T17:40:43.678Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 00:40:43.678 | 2025-04-16T17:40:43.678Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 00:40:43.678 | 2025-04-16T17:40:43.678Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 00:40:43.678 | 2025-04-16T17:40:43.678Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 00:40:43.678 | 2025-04-16T17:40:43.678Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:40:43.678 | 2025-04-16T17:40:43.678Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 00:40:43.678 | 2025-04-16T17:40:43.678Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 00:40:43.679 | 2025-04-16T17:40:43.678Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 00:40:43.679 | 2025-04-16T17:40:43.679Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 00:40:43.679 | 2025-04-16T17:40:43.679Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:40:43.679 | 2025-04-16T17:40:43.679Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 00:40:43.679 | 2025-04-16T17:40:43.679Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 00:40:43.679 | 2025-04-16T17:40:43.679Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:40:43.679 | 2025-04-16T17:40:43.679Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 00:40:43.679 | 2025-04-16T17:40:43.679Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 00:40:43.679 | 2025-04-16T17:40:43.679Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 00:40:43.679 | 2025-04-16T17:40:43.679Z DEBUG 1 --- [     parallel-5] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x0000000801210430@28cd420f
2025-04-17 00:40:43.680 | 2025-04-16T17:40:43.680Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 00:40:43.683 | 2025-04-16T17:40:43.682Z DEBUG 1 --- [     parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 00:40:43.684 | 2025-04-16T17:40:43.683Z DEBUG 1 --- [     parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1298/0x0000000801308208@541264d8, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 00:40:43.684 | 2025-04-16T17:40:43.683Z DEBUG 1 --- [     parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [780261b2-4] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@61ca35
2025-04-17 00:40:43.684 | 2025-04-16T17:40:43.683Z DEBUG 1 --- [     parallel-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@4b869331}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@4ad3d266}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@6754ef00}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@ce9b9a9}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4038cd3a}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@3f4cd155}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1298/0x0000000801308208@541264d8, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@3533df16}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@563a89b5}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@14ac77b9}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@38018b62}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@15d0849}, order = 2147483647]]
2025-04-17 00:40:43.684 | 2025-04-16T17:40:43.684Z  INFO 1 --- [     parallel-5] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: 83cfd6eb-7b14-4f3c-adbb-566628fe780c]
2025-04-17 00:40:43.685 | 2025-04-16T17:40:43.685Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.channel.FluxReceive        : [780261b2-2, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 00:40:43.699 | 2025-04-16T17:40:43.699Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.ReactorNetty               : [780261b2-2, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:40:43.705 | 2025-04-16T17:40:43.705Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=99, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 00:40:43.706 | 2025-04-16T17:40:43.706Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"2660717", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryAK6E4LvZlr4Zsn9f", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"83cfd6eb-7b14-4f3c-adbb-566628fe780c", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:56194"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 00:40:43.707 | 2025-04-16T17:40:43.707Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7caf89ec', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.54737E-4, duration(nanos)=154737.0, startTimeNanos=24206685757145}'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7cb8e223', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.026279071, duration(nanos)=2.6279071E7, startTimeNanos=24206659756836}'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3a18a4c9', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=24206654302974}'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@106d760b', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.032291799, duration(nanos)=3.2291799E7, startTimeNanos=24206653981679}'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"2660717", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryAK6E4LvZlr4Zsn9f", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"83cfd6eb-7b14-4f3c-adbb-566628fe780c", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:56194"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 00:40:43.709 | 2025-04-16T17:40:43.708Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 00:40:43.709 | 2025-04-16T17:40:43.709Z DEBUG 1 --- [or-http-epoll-5] r.netty.http.client.HttpClientConnect    : [62cb2f10-2, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 00:40:43.709 | 2025-04-16T17:40:43.709Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10-2, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}}, [request_prepared])
2025-04-17 00:40:43.742 | 2025-04-16T17:40:43.741Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10-2, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}}, [request_sent])
2025-04-17 00:40:44.103 | 2025-04-16T17:40:44.103Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [62cb2f10-2, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 00:40:44.104 | HTTP/1.1 201 
2025-04-17 00:40:44.104 | Vary: <filtered>
2025-04-17 00:40:44.104 | Vary: <filtered>
2025-04-17 00:40:44.104 | Vary: <filtered>
2025-04-17 00:40:44.104 | Access-Control-Allow-Origin: <filtered>
2025-04-17 00:40:44.104 | Access-Control-Expose-Headers: <filtered>
2025-04-17 00:40:44.104 | Access-Control-Allow-Credentials: <filtered>
2025-04-17 00:40:44.104 | Content-Type: <filtered>
2025-04-17 00:40:44.104 | Transfer-Encoding: <filtered>
2025-04-17 00:40:44.104 | Date: <filtered>
2025-04-17 00:40:44.104 | 2025-04-16T17:40:44.103Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10-2, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}}, [response_received])
2025-04-17 00:40:44.104 | 2025-04-16T17:40:44.104Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 00:40:44.105 | 2025-04-16T17:40:44.104Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7caf89ec', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.397490167, duration(nanos)=3.97490167E8, startTimeNanos=24206685757145}'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7cb8e223', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.423554739, duration(nanos)=4.23554739E8, startTimeNanos=24206659756836}'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3a18a4c9', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=24206654302974}'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@106d760b', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.42963823, duration(nanos)=4.2963823E8, startTimeNanos=24206653981679}'], parentObservation=null}}}}
2025-04-17 00:40:44.105 | 2025-04-16T17:40:44.105Z DEBUG 1 --- [or-http-epoll-5] reactor.netty.channel.FluxReceive        : [62cb2f10-2, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 00:40:44.106 | 2025-04-16T17:40:44.106Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [62cb2f10-2, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Received last HTTP packet
2025-04-17 00:40:44.106 | 2025-04-16T17:40:44.106Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}}, [response_completed])
2025-04-17 00:40:44.106 | 2025-04-16T17:40:44.106Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}}, [disconnecting])
2025-04-17 00:40:44.106 | 2025-04-16T17:40:44.106Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Releasing channel
2025-04-17 00:40:44.107 | 2025-04-16T17:40:44.106Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 00:40:44.107 | 2025-04-16T17:40:44.107Z  INFO 1 --- [or-http-epoll-3] s.s.a.filter.GlobalFilters               : Completed request: POST /api/images - 201 in 423 ms [request_id: 83cfd6eb-7b14-4f3c-adbb-566628fe780c]
2025-04-17 00:40:44.108 | 2025-04-16T17:40:44.108Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [780261b2-4] Completed 201 CREATED
2025-04-17 00:40:44.108 | 2025-04-16T17:40:44.108Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [780261b2-2, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Last HTTP response frame
2025-04-17 00:40:44.108 | 2025-04-16T17:40:44.108Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [780261b2-2, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Decreasing pending responses, now 0
2025-04-17 00:40:44.109 | 2025-04-16T17:40:44.109Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [780261b2-2, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Last HTTP packet was sent, terminating the channel
2025-04-17 00:40:44.110 | 2025-04-16T17:40:44.109Z DEBUG 1 --- [or-http-epoll-3] r.netty.channel.ChannelOperations        : [780261b2-2, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 00:41:13.103 | 2025-04-16T17:41:13.103Z DEBUG 1 --- [or-http-epoll-7] r.n.http.server.HttpServerOperations     : [6fe758fd, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:41492] New http connection, requesting read
2025-04-17 00:41:13.103 | 2025-04-16T17:41:13.103Z DEBUG 1 --- [or-http-epoll-7] r.netty.transport.TransportConfig        : [6fe758fd, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:41492] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:41:13.104 | 2025-04-16T17:41:13.105Z DEBUG 1 --- [or-http-epoll-7] r.n.http.server.HttpServerOperations     : [6fe758fd, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:41492] Increasing pending responses, now 1
2025-04-17 00:41:13.104 | 2025-04-16T17:41:13.104Z DEBUG 1 --- [or-http-epoll-7] reactor.netty.http.server.HttpServer     : [6fe758fd-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:41492] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@27fcbc7f
2025-04-17 00:41:13.104 | 2025-04-16T17:41:13.104Z DEBUG 1 --- [or-http-epoll-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [6fe758fd-5] HTTP GET "/actuator/health"
2025-04-17 00:41:13.106 | 2025-04-16T17:41:13.105Z DEBUG 1 --- [or-http-epoll-7] reactor.netty.ReactorNetty               : [6fe758fd-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:41492] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:41:13.106 | 2025-04-16T17:41:13.106Z DEBUG 1 --- [     parallel-7] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 00:41:13.106 | 2025-04-16T17:41:13.106Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 00:41:13.106 | 2025-04-16T17:41:13.106Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'POST /logout'
2025-04-17 00:41:13.106 | 2025-04-16T17:41:13.106Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:41:13.107 | 2025-04-16T17:41:13.107Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 00:41:13.107 | 2025-04-16T17:41:13.107Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /v3/api-docs/**'
2025-04-17 00:41:13.107 | 2025-04-16T17:41:13.107Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 00:41:13.107 | 2025-04-16T17:41:13.107Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui/**'
2025-04-17 00:41:13.107 | 2025-04-16T17:41:13.107Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 00:41:13.107 | 2025-04-16T17:41:13.107Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui.html'
2025-04-17 00:41:13.107 | 2025-04-16T17:41:13.107Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 00:41:13.107 | 2025-04-16T17:41:13.107Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /webjars/**'
2025-04-17 00:41:13.107 | 2025-04-16T17:41:13.107Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:41:13.108 | 2025-04-16T17:41:13.107Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 00:41:13.108 | 2025-04-16T17:41:13.108Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Checking match of request : '/actuator/health'; against '/actuator/health/**'
2025-04-17 00:41:13.108 | 2025-04-16T17:41:13.108Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 00:41:13.108 | 2025-04-16T17:41:13.108Z DEBUG 1 --- [     parallel-7] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/actuator/health' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x0000000801210430@28cd420f
2025-04-17 00:41:13.108 | 2025-04-16T17:41:13.108Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 00:41:13.109 | 2025-04-16T17:41:13.109Z DEBUG 1 --- [     parallel-7] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@2baf469e'
2025-04-17 00:41:13.111 | 2025-04-16T17:41:13.111Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [6fe758fd-5] Using 'application/vnd.spring-boot.actuator.v3+json' given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-04-17 00:41:13.111 | 2025-04-16T17:41:13.111Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [6fe758fd-5] 0..1 [org.springframework.boot.actuate.health.SystemHealth]
2025-04-17 00:41:13.112 | 2025-04-16T17:41:13.112Z DEBUG 1 --- [llEventLoop-5-1] org.springframework.web.HttpLogging      : [6fe758fd-5] Encoding [org.springframework.boot.actuate.health.SystemHealth@54deeb8d]
2025-04-17 00:41:13.113 | 2025-04-16T17:41:13.113Z DEBUG 1 --- [or-http-epoll-7] r.n.http.server.HttpServerOperations     : [6fe758fd-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:41492] Decreasing pending responses, now 0
2025-04-17 00:41:13.113 | 2025-04-16T17:41:13.113Z DEBUG 1 --- [or-http-epoll-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [6fe758fd-5] Completed 200 OK
2025-04-17 00:41:13.113 | 2025-04-16T17:41:13.113Z DEBUG 1 --- [or-http-epoll-7] r.n.http.server.HttpServerOperations     : [6fe758fd-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:41492] Last HTTP response frame
2025-04-17 00:41:13.113 | 2025-04-16T17:41:13.113Z DEBUG 1 --- [or-http-epoll-7] r.netty.channel.ChannelOperations        : [6fe758fd-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:41492] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 00:41:13.113 | 2025-04-16T17:41:13.113Z DEBUG 1 --- [or-http-epoll-7] r.n.http.server.HttpServerOperations     : [6fe758fd-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:41492] Last HTTP packet was sent, terminating the channel
2025-04-17 00:41:19.350 | 2025-04-16T17:41:19.350Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [780261b2, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Increasing pending responses, now 1
2025-04-17 00:41:19.350 | 2025-04-16T17:41:19.350Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.http.server.HttpServer     : [780261b2-3, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@27fcbc7f
2025-04-17 00:41:19.351 | 2025-04-16T17:41:19.350Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [780261b2-6] HTTP GET "/api/images"
2025-04-17 00:41:19.352 | 2025-04-16T17:41:19.352Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.ReactorNetty               : [780261b2-3, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:41:19.352 | 2025-04-16T17:41:19.352Z DEBUG 1 --- [     parallel-8] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 00:41:19.353 | 2025-04-16T17:41:19.352Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 00:41:19.353 | 2025-04-16T17:41:19.353Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'POST /logout'
2025-04-17 00:41:19.353 | 2025-04-16T17:41:19.353Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:41:19.353 | 2025-04-16T17:41:19.353Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 00:41:19.353 | 2025-04-16T17:41:19.353Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 00:41:19.354 | 2025-04-16T17:41:19.353Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 00:41:19.354 | 2025-04-16T17:41:19.354Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 00:41:19.354 | 2025-04-16T17:41:19.354Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 00:41:19.354 | 2025-04-16T17:41:19.354Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 00:41:19.354 | 2025-04-16T17:41:19.354Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 00:41:19.354 | 2025-04-16T17:41:19.354Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /webjars/**'
2025-04-17 00:41:19.354 | 2025-04-16T17:41:19.354Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:41:19.354 | 2025-04-16T17:41:19.354Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 00:41:19.354 | 2025-04-16T17:41:19.354Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 00:41:19.354 | 2025-04-16T17:41:19.354Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 00:41:19.354 | 2025-04-16T17:41:19.354Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /actuator/info'
2025-04-17 00:41:19.355 | 2025-04-16T17:41:19.354Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:41:19.355 | 2025-04-16T17:41:19.355Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 00:41:19.355 | 2025-04-16T17:41:19.355Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /fallback/**'
2025-04-17 00:41:19.355 | 2025-04-16T17:41:19.355Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:41:19.355 | 2025-04-16T17:41:19.355Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 00:41:19.355 | 2025-04-16T17:41:19.355Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 00:41:19.355 | 2025-04-16T17:41:19.355Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 00:41:19.362 | 2025-04-16T17:41:19.361Z DEBUG 1 --- [     parallel-8] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x0000000801210430@28cd420f
2025-04-17 00:41:19.362 | 2025-04-16T17:41:19.362Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 00:41:19.363 | 2025-04-16T17:41:19.363Z DEBUG 1 --- [     parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 00:41:19.364 | 2025-04-16T17:41:19.363Z DEBUG 1 --- [     parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1298/0x0000000801308208@541264d8, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 00:41:19.364 | 2025-04-16T17:41:19.363Z DEBUG 1 --- [     parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [780261b2-6] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@61ca35
2025-04-17 00:41:19.364 | 2025-04-16T17:41:19.364Z DEBUG 1 --- [     parallel-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@4b869331}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@4ad3d266}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@6754ef00}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@ce9b9a9}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4038cd3a}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@3f4cd155}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1298/0x0000000801308208@541264d8, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@3533df16}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@563a89b5}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@14ac77b9}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@38018b62}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@15d0849}, order = 2147483647]]
2025-04-17 00:41:19.364 | 2025-04-16T17:41:19.364Z  INFO 1 --- [     parallel-8] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images from 172.18.0.1 [request_id: fae8dbb1-b576-4fb6-8bfc-9cde8fdc07cf]
2025-04-17 00:41:19.365 | 2025-04-16T17:41:19.364Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.channel.FluxReceive        : [780261b2-3, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 00:41:19.366 | 2025-04-16T17:41:19.366Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=99, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 00:41:19.367 | 2025-04-16T17:41:19.367Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"fae8dbb1-b576-4fb6-8bfc-9cde8fdc07cf", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:56194"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 00:41:19.368 | 2025-04-16T17:41:19.368Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2ff81233', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.51827E-4, duration(nanos)=151827.0, startTimeNanos=24242347929533}'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@54e697ba', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0055299, duration(nanos)=5529900.0, startTimeNanos=24242342767834}'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6cd9099', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=24242331886358}'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@25ec914e', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.016983158, duration(nanos)=1.6983158E7, startTimeNanos=24242331506135}'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"fae8dbb1-b576-4fb6-8bfc-9cde8fdc07cf", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:56194"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 00:41:19.369 | 2025-04-16T17:41:19.369Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 00:41:19.369 | 2025-04-16T17:41:19.369Z DEBUG 1 --- [or-http-epoll-5] r.netty.http.client.HttpClientConnect    : [62cb2f10-3, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=GET}
2025-04-17 00:41:19.370 | 2025-04-16T17:41:19.370Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10-3, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}}, [request_prepared])
2025-04-17 00:41:19.370 | 2025-04-16T17:41:19.370Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10-3, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}}, [request_sent])
2025-04-17 00:41:19.380 | 2025-04-16T17:41:19.380Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [62cb2f10-3, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 00:41:19.380 | HTTP/1.1 200 
2025-04-17 00:41:19.380 | Vary: <filtered>
2025-04-17 00:41:19.380 | Vary: <filtered>
2025-04-17 00:41:19.380 | Vary: <filtered>
2025-04-17 00:41:19.380 | Access-Control-Allow-Origin: <filtered>
2025-04-17 00:41:19.380 | Access-Control-Expose-Headers: <filtered>
2025-04-17 00:41:19.380 | Access-Control-Allow-Credentials: <filtered>
2025-04-17 00:41:19.380 | Content-Type: <filtered>
2025-04-17 00:41:19.380 | Transfer-Encoding: <filtered>
2025-04-17 00:41:19.380 | Date: <filtered>
2025-04-17 00:41:19.380 | 2025-04-16T17:41:19.380Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10-3, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}}, [response_received])
2025-04-17 00:41:19.381 | 2025-04-16T17:41:19.380Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 00:41:19.381 | 2025-04-16T17:41:19.381Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2ff81233', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.013349136, duration(nanos)=1.3349136E7, startTimeNanos=24242347929533}'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@54e697ba', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.018562908, duration(nanos)=1.8562908E7, startTimeNanos=24242342767834}'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6cd9099', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=24242331886358}'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@25ec914e', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.030068469, duration(nanos)=3.0068469E7, startTimeNanos=24242331506135}'], parentObservation=null}}}}
2025-04-17 00:41:19.382 | 2025-04-16T17:41:19.382Z DEBUG 1 --- [or-http-epoll-5] reactor.netty.channel.FluxReceive        : [62cb2f10-3, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 00:41:19.383 | 2025-04-16T17:41:19.383Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [62cb2f10-3, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Received last HTTP packet
2025-04-17 00:41:19.383 | 2025-04-16T17:41:19.383Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}}, [response_completed])
2025-04-17 00:41:19.383 | 2025-04-16T17:41:19.383Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081]}}, [disconnecting])
2025-04-17 00:41:19.384 | 2025-04-16T17:41:19.383Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Releasing channel
2025-04-17 00:41:19.384 | 2025-04-16T17:41:19.384Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [62cb2f10, L:/172.18.0.7:47460 - R:image-storage/172.18.0.5:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 00:41:19.384 | 2025-04-16T17:41:19.384Z  INFO 1 --- [or-http-epoll-3] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images - 200 in 20 ms [request_id: fae8dbb1-b576-4fb6-8bfc-9cde8fdc07cf]
2025-04-17 00:41:19.385 | 2025-04-16T17:41:19.384Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [780261b2-6] Completed 200 OK
2025-04-17 00:41:19.385 | 2025-04-16T17:41:19.384Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [780261b2-3, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Last HTTP response frame
2025-04-17 00:41:19.385 | 2025-04-16T17:41:19.385Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [780261b2-3, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Decreasing pending responses, now 0
2025-04-17 00:41:19.385 | 2025-04-16T17:41:19.385Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [780261b2-3, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] Last HTTP packet was sent, terminating the channel
2025-04-17 00:41:19.385 | 2025-04-16T17:41:19.385Z DEBUG 1 --- [or-http-epoll-3] r.netty.channel.ChannelOperations        : [780261b2-3, L:/172.18.0.7:8082 - R:/172.18.0.1:56194] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 00:41:43.138 | 2025-04-16T17:41:43.138Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [728683fd, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:32966] New http connection, requesting read
2025-04-17 00:41:43.138 | 2025-04-16T17:41:43.138Z DEBUG 1 --- [or-http-epoll-8] r.netty.transport.TransportConfig        : [728683fd, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:32966] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:41:43.140 | 2025-04-16T17:41:43.140Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [728683fd, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:32966] Increasing pending responses, now 1
2025-04-17 00:41:43.140 | 2025-04-16T17:41:43.140Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.http.server.HttpServer     : [728683fd-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:32966] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@27fcbc7f
2025-04-17 00:41:43.141 | 2025-04-16T17:41:43.140Z DEBUG 1 --- [or-http-epoll-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [728683fd-7] HTTP GET "/actuator/health"
2025-04-17 00:41:43.142 | 2025-04-16T17:41:43.142Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.ReactorNetty               : [728683fd-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:32966] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:41:43.142 | 2025-04-16T17:41:43.142Z DEBUG 1 --- [    parallel-10] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 00:41:43.142 | 2025-04-16T17:41:43.142Z DEBUG 1 --- [    parallel-10] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 00:41:43.142 | 2025-04-16T17:41:43.142Z DEBUG 1 --- [    parallel-10] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'POST /logout'
2025-04-17 00:41:43.143 | 2025-04-16T17:41:43.142Z DEBUG 1 --- [    parallel-10] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:41:43.143 | 2025-04-16T17:41:43.143Z DEBUG 1 --- [    parallel-10] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 00:41:43.143 | 2025-04-16T17:41:43.143Z DEBUG 1 --- [    parallel-10] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /v3/api-docs/**'
2025-04-17 00:41:43.143 | 2025-04-16T17:41:43.143Z DEBUG 1 --- [    parallel-10] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 00:41:43.143 | 2025-04-16T17:41:43.143Z DEBUG 1 --- [    parallel-10] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui/**'
2025-04-17 00:41:43.143 | 2025-04-16T17:41:43.143Z DEBUG 1 --- [    parallel-10] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 00:41:43.143 | 2025-04-16T17:41:43.143Z DEBUG 1 --- [    parallel-10] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui.html'
2025-04-17 00:41:43.143 | 2025-04-16T17:41:43.143Z DEBUG 1 --- [    parallel-10] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 00:41:43.143 | 2025-04-16T17:41:43.143Z DEBUG 1 --- [    parallel-10] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /webjars/**'
2025-04-17 00:41:43.144 | 2025-04-16T17:41:43.143Z DEBUG 1 --- [    parallel-10] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:41:43.144 | 2025-04-16T17:41:43.144Z DEBUG 1 --- [    parallel-10] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 00:41:43.144 | 2025-04-16T17:41:43.144Z DEBUG 1 --- [    parallel-10] athPatternParserServerWebExchangeMatcher : Checking match of request : '/actuator/health'; against '/actuator/health/**'
2025-04-17 00:41:43.144 | 2025-04-16T17:41:43.144Z DEBUG 1 --- [    parallel-10] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 00:41:43.144 | 2025-04-16T17:41:43.144Z DEBUG 1 --- [    parallel-10] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/actuator/health' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x0000000801210430@28cd420f
2025-04-17 00:41:43.144 | 2025-04-16T17:41:43.144Z DEBUG 1 --- [    parallel-10] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 00:41:43.145 | 2025-04-16T17:41:43.145Z DEBUG 1 --- [    parallel-10] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@4de311d6'
2025-04-17 00:41:43.147 | 2025-04-16T17:41:43.147Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [728683fd-7] Using 'application/vnd.spring-boot.actuator.v3+json' given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-04-17 00:41:43.147 | 2025-04-16T17:41:43.147Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [728683fd-7] 0..1 [org.springframework.boot.actuate.health.SystemHealth]
2025-04-17 00:41:43.147 | 2025-04-16T17:41:43.147Z DEBUG 1 --- [llEventLoop-5-1] org.springframework.web.HttpLogging      : [728683fd-7] Encoding [org.springframework.boot.actuate.health.SystemHealth@2ad163ea]
2025-04-17 00:41:43.148 | 2025-04-16T17:41:43.148Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [728683fd-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:32966] Decreasing pending responses, now 0
2025-04-17 00:41:43.149 | 2025-04-16T17:41:43.149Z DEBUG 1 --- [or-http-epoll-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [728683fd-7] Completed 200 OK
2025-04-17 00:41:43.149 | 2025-04-16T17:41:43.149Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [728683fd-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:32966] Last HTTP response frame
2025-04-17 00:41:43.149 | 2025-04-16T17:41:43.149Z DEBUG 1 --- [or-http-epoll-8] r.netty.channel.ChannelOperations        : [728683fd-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:32966] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 00:41:43.149 | 2025-04-16T17:41:43.149Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [728683fd-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:32966] Last HTTP packet was sent, terminating the channel
2025-04-17 00:42:13.175 | 2025-04-16T17:42:13.175Z DEBUG 1 --- [or-http-epoll-9] r.n.http.server.HttpServerOperations     : [ef4110fc, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:47088] New http connection, requesting read
2025-04-17 00:42:13.175 | 2025-04-16T17:42:13.175Z DEBUG 1 --- [or-http-epoll-9] r.netty.transport.TransportConfig        : [ef4110fc, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:47088] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:42:13.177 | 2025-04-16T17:42:13.177Z DEBUG 1 --- [or-http-epoll-9] r.n.http.server.HttpServerOperations     : [ef4110fc, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:47088] Increasing pending responses, now 1
2025-04-17 00:42:13.177 | 2025-04-16T17:42:13.177Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.http.server.HttpServer     : [ef4110fc-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:47088] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@27fcbc7f
2025-04-17 00:42:13.177 | 2025-04-16T17:42:13.177Z DEBUG 1 --- [or-http-epoll-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ef4110fc-8] HTTP GET "/actuator/health"
2025-04-17 00:42:13.178 | 2025-04-16T17:42:13.178Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.ReactorNetty               : [ef4110fc-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:47088] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:42:13.179 | 2025-04-16T17:42:13.179Z DEBUG 1 --- [    parallel-11] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 00:42:13.179 | 2025-04-16T17:42:13.179Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 00:42:13.179 | 2025-04-16T17:42:13.179Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'POST /logout'
2025-04-17 00:42:13.179 | 2025-04-16T17:42:13.179Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:42:13.180 | 2025-04-16T17:42:13.179Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 00:42:13.180 | 2025-04-16T17:42:13.179Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /v3/api-docs/**'
2025-04-17 00:42:13.180 | 2025-04-16T17:42:13.180Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 00:42:13.180 | 2025-04-16T17:42:13.180Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui/**'
2025-04-17 00:42:13.180 | 2025-04-16T17:42:13.180Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 00:42:13.180 | 2025-04-16T17:42:13.180Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui.html'
2025-04-17 00:42:13.180 | 2025-04-16T17:42:13.180Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 00:42:13.180 | 2025-04-16T17:42:13.180Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /webjars/**'
2025-04-17 00:42:13.180 | 2025-04-16T17:42:13.180Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:42:13.180 | 2025-04-16T17:42:13.180Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 00:42:13.180 | 2025-04-16T17:42:13.180Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Checking match of request : '/actuator/health'; against '/actuator/health/**'
2025-04-17 00:42:13.181 | 2025-04-16T17:42:13.180Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 00:42:13.181 | 2025-04-16T17:42:13.180Z DEBUG 1 --- [    parallel-11] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/actuator/health' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x0000000801210430@28cd420f
2025-04-17 00:42:13.181 | 2025-04-16T17:42:13.181Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 00:42:13.182 | 2025-04-16T17:42:13.182Z DEBUG 1 --- [    parallel-11] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@3c4e50e'
2025-04-17 00:42:13.184 | 2025-04-16T17:42:13.184Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [ef4110fc-8] Using 'application/vnd.spring-boot.actuator.v3+json' given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-04-17 00:42:13.184 | 2025-04-16T17:42:13.184Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [ef4110fc-8] 0..1 [org.springframework.boot.actuate.health.SystemHealth]
2025-04-17 00:42:13.185 | 2025-04-16T17:42:13.184Z DEBUG 1 --- [llEventLoop-5-1] org.springframework.web.HttpLogging      : [ef4110fc-8] Encoding [org.springframework.boot.actuate.health.SystemHealth@40f26771]
2025-04-17 00:42:13.186 | 2025-04-16T17:42:13.186Z DEBUG 1 --- [or-http-epoll-9] r.n.http.server.HttpServerOperations     : [ef4110fc-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:47088] Decreasing pending responses, now 0
2025-04-17 00:42:13.186 | 2025-04-16T17:42:13.186Z DEBUG 1 --- [or-http-epoll-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ef4110fc-8] Completed 200 OK
2025-04-17 00:42:13.186 | 2025-04-16T17:42:13.186Z DEBUG 1 --- [or-http-epoll-9] r.n.http.server.HttpServerOperations     : [ef4110fc-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:47088] Last HTTP response frame
2025-04-17 00:42:13.186 | 2025-04-16T17:42:13.186Z DEBUG 1 --- [or-http-epoll-9] r.netty.channel.ChannelOperations        : [ef4110fc-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:47088] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 00:42:13.186 | 2025-04-16T17:42:13.186Z DEBUG 1 --- [or-http-epoll-9] r.n.http.server.HttpServerOperations     : [ef4110fc-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:47088] Last HTTP packet was sent, terminating the channel
2025-04-17 00:42:20.165 | 2025-04-16T17:42:20.165Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [62cb2f10, L:/172.18.0.7:47460 ! R:image-storage/172.18.0.5:8081] onStateChange(PooledConnection{channel=[id: 0x62cb2f10, L:/172.18.0.7:47460 ! R:image-storage/172.18.0.5:8081]}, [disconnecting])
2025-04-17 00:42:43.217 | 2025-04-16T17:42:43.216Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [7c3dfc2b, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:52522] New http connection, requesting read
2025-04-17 00:42:43.217 | 2025-04-16T17:42:43.217Z DEBUG 1 --- [r-http-epoll-10] r.netty.transport.TransportConfig        : [7c3dfc2b, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:52522] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:42:43.219 | 2025-04-16T17:42:43.219Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [7c3dfc2b, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:52522] Increasing pending responses, now 1
2025-04-17 00:42:43.220 | 2025-04-16T17:42:43.219Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [7c3dfc2b-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:52522] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@27fcbc7f
2025-04-17 00:42:43.220 | 2025-04-16T17:42:43.220Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7c3dfc2b-9] HTTP GET "/actuator/health"
2025-04-17 00:42:43.221 | 2025-04-16T17:42:43.221Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [7c3dfc2b-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:52522] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:42:43.221 | 2025-04-16T17:42:43.221Z DEBUG 1 --- [    parallel-12] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 00:42:43.222 | 2025-04-16T17:42:43.221Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 00:42:43.222 | 2025-04-16T17:42:43.222Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'POST /logout'
2025-04-17 00:42:43.222 | 2025-04-16T17:42:43.222Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:42:43.223 | 2025-04-16T17:42:43.223Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 00:42:43.223 | 2025-04-16T17:42:43.223Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /v3/api-docs/**'
2025-04-17 00:42:43.223 | 2025-04-16T17:42:43.223Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 00:42:43.223 | 2025-04-16T17:42:43.223Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui/**'
2025-04-17 00:42:43.223 | 2025-04-16T17:42:43.223Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 00:42:43.223 | 2025-04-16T17:42:43.223Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui.html'
2025-04-17 00:42:43.223 | 2025-04-16T17:42:43.223Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 00:42:43.223 | 2025-04-16T17:42:43.223Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /webjars/**'
2025-04-17 00:42:43.224 | 2025-04-16T17:42:43.223Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:42:43.224 | 2025-04-16T17:42:43.224Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 00:42:43.224 | 2025-04-16T17:42:43.224Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Checking match of request : '/actuator/health'; against '/actuator/health/**'
2025-04-17 00:42:43.224 | 2025-04-16T17:42:43.224Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 00:42:43.224 | 2025-04-16T17:42:43.224Z DEBUG 1 --- [    parallel-12] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/actuator/health' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x0000000801210430@28cd420f
2025-04-17 00:42:43.224 | 2025-04-16T17:42:43.224Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 00:42:43.225 | 2025-04-16T17:42:43.225Z DEBUG 1 --- [    parallel-12] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@73460d64'
2025-04-17 00:42:43.228 | 2025-04-16T17:42:43.227Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [7c3dfc2b-9] Using 'application/vnd.spring-boot.actuator.v3+json' given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-04-17 00:42:43.228 | 2025-04-16T17:42:43.227Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [7c3dfc2b-9] 0..1 [org.springframework.boot.actuate.health.SystemHealth]
2025-04-17 00:42:43.228 | 2025-04-16T17:42:43.228Z DEBUG 1 --- [llEventLoop-5-1] org.springframework.web.HttpLogging      : [7c3dfc2b-9] Encoding [org.springframework.boot.actuate.health.SystemHealth@155f8c0]
2025-04-17 00:42:43.230 | 2025-04-16T17:42:43.230Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [7c3dfc2b-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:52522] Decreasing pending responses, now 0
2025-04-17 00:42:43.231 | 2025-04-16T17:42:43.231Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7c3dfc2b-9] Completed 200 OK
2025-04-17 00:42:43.231 | 2025-04-16T17:42:43.231Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [7c3dfc2b-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:52522] Last HTTP response frame
2025-04-17 00:42:43.231 | 2025-04-16T17:42:43.231Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [7c3dfc2b-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:52522] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 00:42:43.231 | 2025-04-16T17:42:43.231Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [7c3dfc2b-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:52522] Last HTTP packet was sent, terminating the channel
2025-04-17 00:42:45.779 | 2025-04-16T17:42:45.779Z DEBUG 1 --- [r-http-epoll-11] r.n.http.server.HttpServerOperations     : [76d3d5c5, L:/172.18.0.7:8082 - R:/172.18.0.1:57944] New http connection, requesting read
2025-04-17 00:42:45.779 | 2025-04-16T17:42:45.779Z DEBUG 1 --- [r-http-epoll-11] r.netty.transport.TransportConfig        : [76d3d5c5, L:/172.18.0.7:8082 - R:/172.18.0.1:57944] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:42:45.781 | 2025-04-16T17:42:45.781Z DEBUG 1 --- [r-http-epoll-11] r.n.http.server.HttpServerOperations     : [76d3d5c5, L:/172.18.0.7:8082 - R:/172.18.0.1:57944] Increasing pending responses, now 1
2025-04-17 00:42:45.782 | 2025-04-16T17:42:45.781Z DEBUG 1 --- [r-http-epoll-11] reactor.netty.http.server.HttpServer     : [76d3d5c5-1, L:/172.18.0.7:8082 - R:/172.18.0.1:57944] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@27fcbc7f
2025-04-17 00:42:45.782 | 2025-04-16T17:42:45.782Z DEBUG 1 --- [r-http-epoll-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [76d3d5c5-10] HTTP GET "/api/images"
2025-04-17 00:42:45.783 | 2025-04-16T17:42:45.783Z DEBUG 1 --- [r-http-epoll-11] reactor.netty.ReactorNetty               : [76d3d5c5-1, L:/172.18.0.7:8082 - R:/172.18.0.1:57944] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:42:45.783 | 2025-04-16T17:42:45.783Z DEBUG 1 --- [     parallel-1] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 00:42:45.784 | 2025-04-16T17:42:45.784Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 00:42:45.784 | 2025-04-16T17:42:45.784Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'POST /logout'
2025-04-17 00:42:45.784 | 2025-04-16T17:42:45.784Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:42:45.785 | 2025-04-16T17:42:45.784Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 00:42:45.785 | 2025-04-16T17:42:45.784Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 00:42:45.785 | 2025-04-16T17:42:45.785Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 00:42:45.785 | 2025-04-16T17:42:45.785Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 00:42:45.785 | 2025-04-16T17:42:45.785Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 00:42:45.785 | 2025-04-16T17:42:45.785Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 00:42:45.785 | 2025-04-16T17:42:45.785Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 00:42:45.785 | 2025-04-16T17:42:45.785Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /webjars/**'
2025-04-17 00:42:45.785 | 2025-04-16T17:42:45.785Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:42:45.785 | 2025-04-16T17:42:45.785Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 00:42:45.785 | 2025-04-16T17:42:45.785Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 00:42:45.785 | 2025-04-16T17:42:45.785Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 00:42:45.785 | 2025-04-16T17:42:45.785Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /actuator/info'
2025-04-17 00:42:45.785 | 2025-04-16T17:42:45.785Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:42:45.786 | 2025-04-16T17:42:45.786Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 00:42:45.786 | 2025-04-16T17:42:45.786Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /fallback/**'
2025-04-17 00:42:45.786 | 2025-04-16T17:42:45.786Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:42:45.786 | 2025-04-16T17:42:45.786Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 00:42:45.786 | 2025-04-16T17:42:45.786Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 00:42:45.786 | 2025-04-16T17:42:45.786Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 00:42:45.786 | 2025-04-16T17:42:45.786Z DEBUG 1 --- [     parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x0000000801210430@28cd420f
2025-04-17 00:42:45.787 | 2025-04-16T17:42:45.786Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 00:42:45.788 | 2025-04-16T17:42:45.788Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 00:42:45.788 | 2025-04-16T17:42:45.788Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1298/0x0000000801308208@541264d8, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 00:42:45.788 | 2025-04-16T17:42:45.788Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [76d3d5c5-10] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@61ca35
2025-04-17 00:42:45.789 | 2025-04-16T17:42:45.788Z DEBUG 1 --- [     parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@4b869331}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@4ad3d266}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@6754ef00}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@ce9b9a9}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4038cd3a}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@3f4cd155}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1298/0x0000000801308208@541264d8, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@3533df16}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@563a89b5}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@14ac77b9}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@38018b62}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@15d0849}, order = 2147483647]]
2025-04-17 00:42:45.789 | 2025-04-16T17:42:45.789Z  INFO 1 --- [     parallel-1] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images from 172.18.0.1 [request_id: 43769708-a6ae-47fe-b586-0162cd361a5e]
2025-04-17 00:42:45.789 | 2025-04-16T17:42:45.789Z DEBUG 1 --- [r-http-epoll-11] reactor.netty.channel.FluxReceive        : [76d3d5c5-1, L:/172.18.0.7:8082 - R:/172.18.0.1:57944] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 00:42:45.792 | 2025-04-16T17:42:45.792Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=99, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 00:42:45.795 | 2025-04-16T17:42:45.794Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"43769708-a6ae-47fe-b586-0162cd361a5e", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:57944"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 00:42:45.795 | 2025-04-16T17:42:45.795Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7e519370', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=2.46088E-4, duration(nanos)=246088.0, startTimeNanos=24328780709214}'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5f50535d', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0084743, duration(nanos)=8474300.0, startTimeNanos=24328772658489}'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@644bc3d', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=24328768553714}'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@44a6bbb4', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.013141146, duration(nanos)=1.3141146E7, startTimeNanos=24328768148609}'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"43769708-a6ae-47fe-b586-0162cd361a5e", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:57944"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 00:42:45.798 | 2025-04-16T17:42:45.798Z DEBUG 1 --- [r-http-epoll-12] r.n.resources.PooledConnectionProvider   : [8380759b] Created a new pooled channel, now: 0 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 00:42:45.799 | 2025-04-16T17:42:45.798Z DEBUG 1 --- [r-http-epoll-12] r.netty.transport.TransportConfig        : [8380759b] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpClientCodec), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:42:45.800 | 2025-04-16T17:42:45.800Z DEBUG 1 --- [r-http-epoll-12] r.netty.transport.TransportConnector     : [8380759b] Connecting to [image-storage/172.18.0.5:8081].
2025-04-17 00:42:45.801 | 2025-04-16T17:42:45.801Z DEBUG 1 --- [r-http-epoll-12] r.n.r.DefaultPooledConnectionProvider    : [8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] Registering pool release on close event for channel
2025-04-17 00:42:45.801 | 2025-04-16T17:42:45.801Z DEBUG 1 --- [r-http-epoll-12] r.n.resources.PooledConnectionProvider   : [8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] Channel connected, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 00:42:45.801 | 2025-04-16T17:42:45.801Z DEBUG 1 --- [r-http-epoll-12] r.n.r.DefaultPooledConnectionProvider    : [8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] onStateChange(PooledConnection{channel=[id: 0x8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081]}, [connected])
2025-04-17 00:42:45.801 | 2025-04-16T17:42:45.801Z DEBUG 1 --- [r-http-epoll-12] r.n.r.DefaultPooledConnectionProvider    : [8380759b-1, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=null, connection=PooledConnection{channel=[id: 0x8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081]}}, [configured])
2025-04-17 00:42:45.801 | 2025-04-16T17:42:45.801Z DEBUG 1 --- [r-http-epoll-12] r.netty.http.client.HttpClientConnect    : [8380759b-1, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=GET}
2025-04-17 00:42:45.802 | 2025-04-16T17:42:45.801Z DEBUG 1 --- [r-http-epoll-12] r.n.r.DefaultPooledConnectionProvider    : [8380759b-1, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081]}}, [request_prepared])
2025-04-17 00:42:45.804 | 2025-04-16T17:42:45.804Z DEBUG 1 --- [r-http-epoll-12] r.n.r.DefaultPooledConnectionProvider    : [8380759b-1, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081]}}, [request_sent])
2025-04-17 00:42:45.818 | 2025-04-16T17:42:45.817Z DEBUG 1 --- [r-http-epoll-12] r.n.http.client.HttpClientOperations     : [8380759b-1, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 00:42:45.818 | HTTP/1.1 200 
2025-04-17 00:42:45.818 | Vary: <filtered>
2025-04-17 00:42:45.818 | Vary: <filtered>
2025-04-17 00:42:45.818 | Vary: <filtered>
2025-04-17 00:42:45.818 | Access-Control-Allow-Origin: <filtered>
2025-04-17 00:42:45.818 | Access-Control-Expose-Headers: <filtered>
2025-04-17 00:42:45.818 | Access-Control-Allow-Credentials: <filtered>
2025-04-17 00:42:45.818 | Content-Type: <filtered>
2025-04-17 00:42:45.818 | Transfer-Encoding: <filtered>
2025-04-17 00:42:45.818 | Date: <filtered>
2025-04-17 00:42:45.818 | 2025-04-16T17:42:45.818Z DEBUG 1 --- [r-http-epoll-12] r.n.r.DefaultPooledConnectionProvider    : [8380759b-1, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081]}}, [response_received])
2025-04-17 00:42:45.818 | 2025-04-16T17:42:45.818Z DEBUG 1 --- [r-http-epoll-12] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 00:42:45.819 | 2025-04-16T17:42:45.819Z DEBUG 1 --- [r-http-epoll-12] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7e519370', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.023640243, duration(nanos)=2.3640243E7, startTimeNanos=24328780709214}'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5f50535d', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.031777042, duration(nanos)=3.1777042E7, startTimeNanos=24328772658489}'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@644bc3d', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=24328768553714}'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@44a6bbb4', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.036468728, duration(nanos)=3.6468728E7, startTimeNanos=24328768148609}'], parentObservation=null}}}}
2025-04-17 00:42:45.820 | 2025-04-16T17:42:45.820Z DEBUG 1 --- [r-http-epoll-12] reactor.netty.channel.FluxReceive        : [8380759b-1, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 00:42:45.821 | 2025-04-16T17:42:45.821Z DEBUG 1 --- [r-http-epoll-12] r.n.http.client.HttpClientOperations     : [8380759b-1, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] Received last HTTP packet
2025-04-17 00:42:45.821 | 2025-04-16T17:42:45.821Z DEBUG 1 --- [r-http-epoll-12] r.n.r.DefaultPooledConnectionProvider    : [8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081]}}, [response_completed])
2025-04-17 00:42:45.821 | 2025-04-16T17:42:45.821Z DEBUG 1 --- [r-http-epoll-12] r.n.r.DefaultPooledConnectionProvider    : [8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081]}}, [disconnecting])
2025-04-17 00:42:45.821 | 2025-04-16T17:42:45.821Z DEBUG 1 --- [r-http-epoll-12] r.n.r.DefaultPooledConnectionProvider    : [8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] Releasing channel
2025-04-17 00:42:45.822 | 2025-04-16T17:42:45.821Z DEBUG 1 --- [r-http-epoll-12] r.n.resources.PooledConnectionProvider   : [8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 00:42:45.822 | 2025-04-16T17:42:45.822Z  INFO 1 --- [r-http-epoll-11] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images - 200 in 34 ms [request_id: 43769708-a6ae-47fe-b586-0162cd361a5e]
2025-04-17 00:42:45.823 | 2025-04-16T17:42:45.823Z DEBUG 1 --- [r-http-epoll-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [76d3d5c5-10] Completed 200 OK
2025-04-17 00:42:45.823 | 2025-04-16T17:42:45.823Z DEBUG 1 --- [r-http-epoll-11] r.n.http.server.HttpServerOperations     : [76d3d5c5-1, L:/172.18.0.7:8082 - R:/172.18.0.1:57944] Last HTTP response frame
2025-04-17 00:42:45.823 | 2025-04-16T17:42:45.823Z DEBUG 1 --- [r-http-epoll-11] r.n.http.server.HttpServerOperations     : [76d3d5c5-1, L:/172.18.0.7:8082 - R:/172.18.0.1:57944] Decreasing pending responses, now 0
2025-04-17 00:42:45.823 | 2025-04-16T17:42:45.823Z DEBUG 1 --- [r-http-epoll-11] r.n.http.server.HttpServerOperations     : [76d3d5c5-1, L:/172.18.0.7:8082 - R:/172.18.0.1:57944] Last HTTP packet was sent, terminating the channel
2025-04-17 00:42:45.823 | 2025-04-16T17:42:45.823Z DEBUG 1 --- [r-http-epoll-11] r.netty.channel.ChannelOperations        : [76d3d5c5-1, L:/172.18.0.7:8082 - R:/172.18.0.1:57944] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 00:42:48.755 | 2025-04-16T17:42:48.754Z DEBUG 1 --- [or-http-epoll-1] r.n.http.server.HttpServerOperations     : [2107af3b, L:/172.18.0.7:8082 - R:/172.18.0.1:57960] New http connection, requesting read
2025-04-17 00:42:48.755 | 2025-04-16T17:42:48.755Z DEBUG 1 --- [or-http-epoll-1] r.netty.transport.TransportConfig        : [2107af3b, L:/172.18.0.7:8082 - R:/172.18.0.1:57960] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:42:48.758 | 2025-04-16T17:42:48.758Z DEBUG 1 --- [or-http-epoll-1] r.n.http.server.HttpServerOperations     : [2107af3b, L:/172.18.0.7:8082 - R:/172.18.0.1:57960] Increasing pending responses, now 1
2025-04-17 00:42:48.758 | 2025-04-16T17:42:48.758Z DEBUG 1 --- [or-http-epoll-1] reactor.netty.http.server.HttpServer     : [2107af3b-1, L:/172.18.0.7:8082 - R:/172.18.0.1:57960] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@27fcbc7f
2025-04-17 00:42:48.758 | 2025-04-16T17:42:48.758Z DEBUG 1 --- [or-http-epoll-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2107af3b-11] HTTP GET "/api/images"
2025-04-17 00:42:48.760 | 2025-04-16T17:42:48.760Z DEBUG 1 --- [or-http-epoll-1] reactor.netty.ReactorNetty               : [2107af3b-1, L:/172.18.0.7:8082 - R:/172.18.0.1:57960] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:42:48.760 | 2025-04-16T17:42:48.760Z DEBUG 1 --- [     parallel-3] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 00:42:48.761 | 2025-04-16T17:42:48.760Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 00:42:48.761 | 2025-04-16T17:42:48.761Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'POST /logout'
2025-04-17 00:42:48.761 | 2025-04-16T17:42:48.761Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:42:48.761 | 2025-04-16T17:42:48.761Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 00:42:48.761 | 2025-04-16T17:42:48.761Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 00:42:48.762 | 2025-04-16T17:42:48.761Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 00:42:48.762 | 2025-04-16T17:42:48.762Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 00:42:48.762 | 2025-04-16T17:42:48.762Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 00:42:48.762 | 2025-04-16T17:42:48.762Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 00:42:48.762 | 2025-04-16T17:42:48.762Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 00:42:48.762 | 2025-04-16T17:42:48.762Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /webjars/**'
2025-04-17 00:42:48.762 | 2025-04-16T17:42:48.762Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:42:48.762 | 2025-04-16T17:42:48.762Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 00:42:48.762 | 2025-04-16T17:42:48.762Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 00:42:48.762 | 2025-04-16T17:42:48.762Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 00:42:48.762 | 2025-04-16T17:42:48.762Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /actuator/info'
2025-04-17 00:42:48.763 | 2025-04-16T17:42:48.762Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:42:48.763 | 2025-04-16T17:42:48.762Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 00:42:48.763 | 2025-04-16T17:42:48.763Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /fallback/**'
2025-04-17 00:42:48.763 | 2025-04-16T17:42:48.763Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:42:48.763 | 2025-04-16T17:42:48.763Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 00:42:48.763 | 2025-04-16T17:42:48.763Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 00:42:48.763 | 2025-04-16T17:42:48.763Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 00:42:48.763 | 2025-04-16T17:42:48.763Z DEBUG 1 --- [     parallel-3] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x0000000801210430@28cd420f
2025-04-17 00:42:48.763 | 2025-04-16T17:42:48.763Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 00:42:48.765 | 2025-04-16T17:42:48.765Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 00:42:48.765 | 2025-04-16T17:42:48.765Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1298/0x0000000801308208@541264d8, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 00:42:48.765 | 2025-04-16T17:42:48.765Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [2107af3b-11] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@61ca35
2025-04-17 00:42:48.765 | 2025-04-16T17:42:48.765Z DEBUG 1 --- [     parallel-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@4b869331}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@4ad3d266}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@6754ef00}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@ce9b9a9}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4038cd3a}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@3f4cd155}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1298/0x0000000801308208@541264d8, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@3533df16}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@563a89b5}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@14ac77b9}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@38018b62}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@15d0849}, order = 2147483647]]
2025-04-17 00:42:48.766 | 2025-04-16T17:42:48.766Z  INFO 1 --- [     parallel-3] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images from 172.18.0.1 [request_id: 312ed7fc-4faf-4517-b39c-bbc50e3efc67]
2025-04-17 00:42:48.766 | 2025-04-16T17:42:48.766Z DEBUG 1 --- [or-http-epoll-1] reactor.netty.channel.FluxReceive        : [2107af3b-1, L:/172.18.0.7:8082 - R:/172.18.0.1:57960] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 00:42:48.771 | 2025-04-16T17:42:48.770Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=99, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 00:42:48.772 | 2025-04-16T17:42:48.772Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"312ed7fc-4faf-4517-b39c-bbc50e3efc67", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:57960"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 00:42:48.773 | 2025-04-16T17:42:48.773Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7c8c31d1', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.07954E-4, duration(nanos)=107954.0, startTimeNanos=24331758183908}'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5f4de10b', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.009072024, duration(nanos)=9072024.0, startTimeNanos=24331749446912}'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@68feef1d', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=24331745291245}'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7d28b9da', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.013845605, duration(nanos)=1.3845605E7, startTimeNanos=24331744830227}'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"312ed7fc-4faf-4517-b39c-bbc50e3efc67", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:57960"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 00:42:48.774 | 2025-04-16T17:42:48.774Z DEBUG 1 --- [r-http-epoll-12] r.n.resources.PooledConnectionProvider   : [8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 00:42:48.774 | 2025-04-16T17:42:48.774Z DEBUG 1 --- [r-http-epoll-12] r.netty.http.client.HttpClientConnect    : [8380759b-2, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=GET}
2025-04-17 00:42:48.774 | 2025-04-16T17:42:48.774Z DEBUG 1 --- [r-http-epoll-12] r.n.r.DefaultPooledConnectionProvider    : [8380759b-2, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081]}}, [request_prepared])
2025-04-17 00:42:48.775 | 2025-04-16T17:42:48.775Z DEBUG 1 --- [r-http-epoll-12] r.n.r.DefaultPooledConnectionProvider    : [8380759b-2, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081]}}, [request_sent])
2025-04-17 00:42:48.791 | 2025-04-16T17:42:48.790Z DEBUG 1 --- [r-http-epoll-12] r.n.http.client.HttpClientOperations     : [8380759b-2, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 00:42:48.791 | HTTP/1.1 200 
2025-04-17 00:42:48.791 | Vary: <filtered>
2025-04-17 00:42:48.791 | Vary: <filtered>
2025-04-17 00:42:48.791 | Vary: <filtered>
2025-04-17 00:42:48.791 | Access-Control-Allow-Origin: <filtered>
2025-04-17 00:42:48.791 | Access-Control-Expose-Headers: <filtered>
2025-04-17 00:42:48.791 | Access-Control-Allow-Credentials: <filtered>
2025-04-17 00:42:48.791 | Content-Type: <filtered>
2025-04-17 00:42:48.791 | Transfer-Encoding: <filtered>
2025-04-17 00:42:48.791 | Date: <filtered>
2025-04-17 00:42:48.791 | 2025-04-16T17:42:48.791Z DEBUG 1 --- [r-http-epoll-12] r.n.r.DefaultPooledConnectionProvider    : [8380759b-2, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081]}}, [response_received])
2025-04-17 00:42:48.791 | 2025-04-16T17:42:48.791Z DEBUG 1 --- [r-http-epoll-12] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 00:42:48.792 | 2025-04-16T17:42:48.792Z DEBUG 1 --- [r-http-epoll-12] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7c8c31d1', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.019099477, duration(nanos)=1.9099477E7, startTimeNanos=24331758183908}'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5f4de10b', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.027988428, duration(nanos)=2.7988428E7, startTimeNanos=24331749446912}'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@68feef1d', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=24331745291245}'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7d28b9da', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.032753889, duration(nanos)=3.2753889E7, startTimeNanos=24331744830227}'], parentObservation=null}}}}
2025-04-17 00:42:48.793 | 2025-04-16T17:42:48.793Z DEBUG 1 --- [r-http-epoll-12] reactor.netty.channel.FluxReceive        : [8380759b-2, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 00:42:48.794 | 2025-04-16T17:42:48.794Z DEBUG 1 --- [r-http-epoll-12] r.n.http.client.HttpClientOperations     : [8380759b-2, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] Received last HTTP packet
2025-04-17 00:42:48.794 | 2025-04-16T17:42:48.794Z DEBUG 1 --- [r-http-epoll-12] r.n.r.DefaultPooledConnectionProvider    : [8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081]}}, [response_completed])
2025-04-17 00:42:48.794 | 2025-04-16T17:42:48.794Z DEBUG 1 --- [r-http-epoll-12] r.n.r.DefaultPooledConnectionProvider    : [8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081]}}, [disconnecting])
2025-04-17 00:42:48.795 | 2025-04-16T17:42:48.794Z DEBUG 1 --- [r-http-epoll-12] r.n.r.DefaultPooledConnectionProvider    : [8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] Releasing channel
2025-04-17 00:42:48.795 | 2025-04-16T17:42:48.795Z DEBUG 1 --- [r-http-epoll-12] r.n.resources.PooledConnectionProvider   : [8380759b, L:/172.18.0.7:57136 - R:image-storage/172.18.0.5:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 00:42:48.795 | 2025-04-16T17:42:48.795Z  INFO 1 --- [or-http-epoll-1] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images - 200 in 30 ms [request_id: 312ed7fc-4faf-4517-b39c-bbc50e3efc67]
2025-04-17 00:42:48.795 | 2025-04-16T17:42:48.795Z DEBUG 1 --- [or-http-epoll-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2107af3b-11] Completed 200 OK
2025-04-17 00:42:48.796 | 2025-04-16T17:42:48.795Z DEBUG 1 --- [or-http-epoll-1] r.n.http.server.HttpServerOperations     : [2107af3b-1, L:/172.18.0.7:8082 - R:/172.18.0.1:57960] Last HTTP response frame
2025-04-17 00:42:48.796 | 2025-04-16T17:42:48.796Z DEBUG 1 --- [or-http-epoll-1] r.n.http.server.HttpServerOperations     : [2107af3b-1, L:/172.18.0.7:8082 - R:/172.18.0.1:57960] Decreasing pending responses, now 0
2025-04-17 00:42:48.796 | 2025-04-16T17:42:48.796Z DEBUG 1 --- [or-http-epoll-1] r.n.http.server.HttpServerOperations     : [2107af3b-1, L:/172.18.0.7:8082 - R:/172.18.0.1:57960] Last HTTP packet was sent, terminating the channel
2025-04-17 00:42:48.796 | 2025-04-16T17:42:48.796Z DEBUG 1 --- [or-http-epoll-1] r.netty.channel.ChannelOperations        : [2107af3b-1, L:/172.18.0.7:8082 - R:/172.18.0.1:57960] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 00:43:13.256 | 2025-04-16T17:43:13.256Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [c07d1674, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:39956] New http connection, requesting read
2025-04-17 00:43:13.256 | 2025-04-16T17:43:13.256Z DEBUG 1 --- [or-http-epoll-2] r.netty.transport.TransportConfig        : [c07d1674, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:39956] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:43:13.257 | 2025-04-16T17:43:13.257Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [c07d1674, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:39956] Increasing pending responses, now 1
2025-04-17 00:43:13.257 | 2025-04-16T17:43:13.257Z DEBUG 1 --- [or-http-epoll-2] reactor.netty.http.server.HttpServer     : [c07d1674-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:39956] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@27fcbc7f
2025-04-17 00:43:13.257 | 2025-04-16T17:43:13.257Z DEBUG 1 --- [or-http-epoll-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c07d1674-12] HTTP GET "/actuator/health"
2025-04-17 00:43:13.258 | 2025-04-16T17:43:13.258Z DEBUG 1 --- [or-http-epoll-2] reactor.netty.ReactorNetty               : [c07d1674-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:39956] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 00:43:13.258 | 2025-04-16T17:43:13.258Z DEBUG 1 --- [     parallel-5] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 00:43:13.259 | 2025-04-16T17:43:13.258Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 00:43:13.259 | 2025-04-16T17:43:13.259Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'POST /logout'
2025-04-17 00:43:13.259 | 2025-04-16T17:43:13.259Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:43:13.259 | 2025-04-16T17:43:13.259Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 00:43:13.259 | 2025-04-16T17:43:13.259Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /v3/api-docs/**'
2025-04-17 00:43:13.259 | 2025-04-16T17:43:13.259Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 00:43:13.259 | 2025-04-16T17:43:13.259Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui/**'
2025-04-17 00:43:13.259 | 2025-04-16T17:43:13.259Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 00:43:13.259 | 2025-04-16T17:43:13.259Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui.html'
2025-04-17 00:43:13.259 | 2025-04-16T17:43:13.259Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 00:43:13.259 | 2025-04-16T17:43:13.259Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /webjars/**'
2025-04-17 00:43:13.259 | 2025-04-16T17:43:13.259Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 00:43:13.260 | 2025-04-16T17:43:13.259Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 00:43:13.260 | 2025-04-16T17:43:13.259Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Checking match of request : '/actuator/health'; against '/actuator/health/**'
2025-04-17 00:43:13.260 | 2025-04-16T17:43:13.260Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 00:43:13.260 | 2025-04-16T17:43:13.260Z DEBUG 1 --- [     parallel-5] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/actuator/health' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x0000000801210430@28cd420f
2025-04-17 00:43:13.260 | 2025-04-16T17:43:13.260Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 00:43:13.261 | 2025-04-16T17:43:13.261Z DEBUG 1 --- [     parallel-5] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@7b6d1518'
2025-04-17 00:43:13.263 | 2025-04-16T17:43:13.263Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [c07d1674-12] Using 'application/vnd.spring-boot.actuator.v3+json' given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-04-17 00:43:13.263 | 2025-04-16T17:43:13.263Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [c07d1674-12] 0..1 [org.springframework.boot.actuate.health.SystemHealth]
2025-04-17 00:43:13.263 | 2025-04-16T17:43:13.263Z DEBUG 1 --- [llEventLoop-5-1] org.springframework.web.HttpLogging      : [c07d1674-12] Encoding [org.springframework.boot.actuate.health.SystemHealth@60b70d17]
2025-04-17 00:43:13.264 | 2025-04-16T17:43:13.264Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [c07d1674-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:39956] Decreasing pending responses, now 0
2025-04-17 00:43:13.265 | 2025-04-16T17:43:13.265Z DEBUG 1 --- [or-http-epoll-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c07d1674-12] Completed 200 OK
2025-04-17 00:43:13.265 | 2025-04-16T17:43:13.265Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [c07d1674-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:39956] Last HTTP response frame
2025-04-17 00:43:13.265 | 2025-04-16T17:43:13.265Z DEBUG 1 --- [or-http-epoll-2] r.netty.channel.ChannelOperations        : [c07d1674-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:39956] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 00:43:13.265 | 2025-04-16T17:43:13.265Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [c07d1674-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:39956] Last HTTP packet was sent, terminating the channel