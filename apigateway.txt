2025-04-17 19:54:10.942 | 
2025-04-17 19:54:10.942 |   .   ____          _            __ _ _
2025-04-17 19:54:10.942 |  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2025-04-17 19:54:10.943 | ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2025-04-17 19:54:10.943 |  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2025-04-17 19:54:10.943 |   '  |____| .__|_| |_|_| |_\__, | / / / /
2025-04-17 19:54:10.943 |  =========|_|==============|___/=/_/_/_/
2025-04-17 19:54:10.945 |  :: Spring Boot ::                (v3.1.5)
2025-04-17 19:54:10.945 | 
2025-04-17 19:54:11.284 | 2025-04-17T12:54:11.280Z  INFO 1 --- [           main] iGatewayCompressionRankSystemApplication : Starting ApiGatewayCompressionRankSystemApplication v0.0.1-SNAPSHOT using Java 17.0.2 with PID 1 (/app/app.jar started by root in /app)
2025-04-17 19:54:11.284 | 2025-04-17T12:54:11.284Z DEBUG 1 --- [           main] iGatewayCompressionRankSystemApplication : Running with Spring Boot v3.1.5, Spring v6.0.13
2025-04-17 19:54:11.285 | 2025-04-17T12:54:11.285Z  INFO 1 --- [           main] iGatewayCompressionRankSystemApplication : No active profile set, falling back to 1 default profile: "default"
2025-04-17 19:54:14.824 | 2025-04-17T12:54:14.824Z  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-04-17 19:54:14.841 | 2025-04-17T12:54:14.840Z  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-04-17 19:54:15.007 | 2025-04-17T12:54:15.006Z  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 50 ms. Found 0 Redis repository interfaces.
2025-04-17 19:54:16.520 | 2025-04-17T12:54:16.519Z  INFO 1 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=f1206842-9b66-3f06-bc9c-4438e9c5b5e8
2025-04-17 19:54:17.173 | 2025-04-17T12:54:17.171Z DEBUG 1 --- [           main] reactor.netty.tcp.TcpResources           : [http] resources will use the default LoopResources: DefaultLoopResources {prefix=reactor-http, daemon=true, selectCount=12, workerCount=12}
2025-04-17 19:54:17.173 | 2025-04-17T12:54:17.173Z DEBUG 1 --- [           main] reactor.netty.tcp.TcpResources           : [http] resources will use the default ConnectionProvider: reactor.netty.resources.DefaultPooledConnectionProvider@4e517165
2025-04-17 19:54:18.751 | 2025-04-17T12:54:18.751Z DEBUG 1 --- [           main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-api', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/auth/**}}], filters=[FilterDefinition{name='RequestRateLimiter', args={key-resolver=#{@ipKeyResolver}, redis-rate-limiter.replenishRate=50, redis-rate-limiter.burstCapacity=100}}, FilterDefinition{name='Retry', args={retries=3, statuses=BAD_GATEWAY,GATEWAY_TIMEOUT,SERVICE_UNAVAILABLE, methods=GET,POST,PUT,DELETE, backoff.firstBackoff=50ms, backoff.maxBackoff=500ms, backoff.factor=2, backoff.basedOnPreviousValue=false}}, FilterDefinition{name='CircuitBreaker', args={name=authCircuitBreaker, fallbackUri=forward:/fallback/auth}}], uri=http://auth-service:8085, order=0, metadata={}}, RouteDefinition{id='image-storage-api', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/images/**}}], filters=[FilterDefinition{name='RequestRateLimiter', args={key-resolver=#{@ipKeyResolver}, redis-rate-limiter.replenishRate=50, redis-rate-limiter.burstCapacity=100}}, FilterDefinition{name='Retry', args={retries=3, statuses=BAD_GATEWAY,GATEWAY_TIMEOUT,SERVICE_UNAVAILABLE, methods=GET,POST, backoff.firstBackoff=50ms, backoff.maxBackoff=500ms, backoff.factor=2, backoff.basedOnPreviousValue=false}}, FilterDefinition{name='CircuitBreaker', args={name=imageStorageCircuitBreaker, fallbackUri=forward:/fallback/image-storage}}], uri=http://image-storage:8081, order=0, metadata={}}, RouteDefinition{id='compression-api', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/compression/**}}], filters=[FilterDefinition{name='RequestRateLimiter', args={key-resolver=#{@ipKeyResolver}, redis-rate-limiter.replenishRate=30, redis-rate-limiter.burstCapacity=60}}, FilterDefinition{name='Retry', args={retries=3, statuses=BAD_GATEWAY,GATEWAY_TIMEOUT,SERVICE_UNAVAILABLE, methods=GET,POST, backoff.firstBackoff=50ms, backoff.maxBackoff=500ms, backoff.factor=2, backoff.basedOnPreviousValue=false}}, FilterDefinition{name='CircuitBreaker', args={name=compressionCircuitBreaker, fallbackUri=forward:/fallback/compression}}], uri=http://compression-service:8080, order=0, metadata={}}, RouteDefinition{id='statistics-api', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/statistics/**}}], filters=[FilterDefinition{name='RequestRateLimiter', args={key-resolver=#{@ipKeyResolver}, redis-rate-limiter.replenishRate=50, redis-rate-limiter.burstCapacity=100}}, FilterDefinition{name='Retry', args={retries=3, statuses=BAD_GATEWAY,GATEWAY_TIMEOUT,SERVICE_UNAVAILABLE, methods=GET,POST, backoff.firstBackoff=50ms, backoff.maxBackoff=500ms, backoff.factor=2, backoff.basedOnPreviousValue=false}}, FilterDefinition{name='CircuitBreaker', args={name=statisticsCircuitBreaker, fallbackUri=forward:/fallback/statistics}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='statistics-api-compat', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/images/statistics/**}}], filters=[FilterDefinition{name='RewritePath', args={_genkey_0=/api/images/statistics/(?<segment>.*), _genkey_1=/api/statistics/$\{segment}}}, FilterDefinition{name='RewritePath', args={_genkey_0=/api/images/statistics$, _genkey_1=/api/statistics}}, FilterDefinition{name='RequestRateLimiter', args={key-resolver=#{@ipKeyResolver}, redis-rate-limiter.replenishRate=50, redis-rate-limiter.burstCapacity=100}}, FilterDefinition{name='CircuitBreaker', args={name=statisticsCircuitBreaker, fallbackUri=forward:/fallback/statistics}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='openapi', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/v3/api-docs/**, _genkey_1=/swagger-ui/**, _genkey_2=/swagger-ui.html, _genkey_3=/webjars/**}}], filters=[FilterDefinition{name='RewritePath', args={_genkey_0=/(?<segment>.*), _genkey_1=/$\{segment}}}], uri=http://localhost:8082, order=0, metadata={}}]
2025-04-17 19:54:19.586 | 2025-04-17T12:54:19.585Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-04-17 19:54:19.586 | 2025-04-17T12:54:19.586Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-04-17 19:54:19.586 | 2025-04-17T12:54:19.586Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-04-17 19:54:19.587 | 2025-04-17T12:54:19.587Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-04-17 19:54:19.587 | 2025-04-17T12:54:19.587Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-04-17 19:54:19.587 | 2025-04-17T12:54:19.587Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-04-17 19:54:19.588 | 2025-04-17T12:54:19.587Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-04-17 19:54:19.588 | 2025-04-17T12:54:19.588Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-04-17 19:54:19.588 | 2025-04-17T12:54:19.588Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-04-17 19:54:19.589 | 2025-04-17T12:54:19.588Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-04-17 19:54:19.589 | 2025-04-17T12:54:19.589Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-04-17 19:54:19.589 | 2025-04-17T12:54:19.589Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-17 19:54:19.589 | 2025-04-17T12:54:19.589Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-04-17 19:54:19.589 | 2025-04-17T12:54:19.589Z  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-17 19:54:19.626 | 2025-04-17T12:54:19.625Z  INFO 1 --- [           main] ctiveUserDetailsServiceAutoConfiguration : 
2025-04-17 19:54:19.626 | 
2025-04-17 19:54:19.626 | Using generated security password: 817aaec5-1fdc-4e1f-9e5a-1c57d40886a3
2025-04-17 19:54:19.626 | 
2025-04-17 19:54:19.850 | 2025-04-17T12:54:19.849Z DEBUG 1 --- [           main] s.w.r.r.m.a.RequestMappingHandlerMapping : 13 mappings in 'requestMappingHandlerMapping'
2025-04-17 19:54:20.104 | 2025-04-17T12:54:20.104Z DEBUG 1 --- [           main] o.s.w.r.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-04-17 19:54:20.356 | 2025-04-17T12:54:20.355Z  INFO 1 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoint(s) beneath base path '/actuator'
2025-04-17 19:54:20.430 | 2025-04-17T12:54:20.430Z DEBUG 1 --- [           main] o.s.w.r.r.m.a.ControllerMethodResolver   : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 @ExceptionHandler
2025-04-17 19:54:20.483 | 2025-04-17T12:54:20.483Z DEBUG 1 --- [           main] o.s.w.s.adapter.HttpWebHandlerAdapter    : enableLoggingRequestDetails='false': form data and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-04-17 19:54:21.094 | 2025-04-17T12:54:21.093Z DEBUG 1 --- [           main] r.netty.resources.DefaultLoopIOUring     : Default io_uring support : false
2025-04-17 19:54:21.096 | 2025-04-17T12:54:21.096Z DEBUG 1 --- [           main] r.netty.resources.DefaultLoopEpoll       : Default Epoll support : true
2025-04-17 19:54:21.190 | 2025-04-17T12:54:21.189Z DEBUG 1 --- [or-http-epoll-1] r.netty.transport.ServerTransport        : [7c1df68f, L:/[0:0:0:0:0:0:0:0%0]:8082] Bound new server
2025-04-17 19:54:21.191 | 2025-04-17T12:54:21.191Z  INFO 1 --- [           main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8082
2025-04-17 19:54:21.246 | 2025-04-17T12:54:21.246Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-api applying {_genkey_0=/api/auth/**} to Path
2025-04-17 19:54:21.271 | 2025-04-17T12:54:21.270Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-api applying filter {key-resolver=#{@ipKeyResolver}, redis-rate-limiter.replenishRate=50, redis-rate-limiter.burstCapacity=100} to RequestRateLimiter
2025-04-17 19:54:21.299 | 2025-04-17T12:54:21.299Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-api applying filter {retries=3, statuses=BAD_GATEWAY,GATEWAY_TIMEOUT,SERVICE_UNAVAILABLE, methods=GET,POST,PUT,DELETE, backoff.firstBackoff=50ms, backoff.maxBackoff=500ms, backoff.factor=2, backoff.basedOnPreviousValue=false} to Retry
2025-04-17 19:54:21.319 | 2025-04-17T12:54:21.318Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-api applying filter {name=authCircuitBreaker, fallbackUri=forward:/fallback/auth} to CircuitBreaker
2025-04-17 19:54:21.333 | 2025-04-17T12:54:21.332Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-api
2025-04-17 19:54:21.333 | 2025-04-17T12:54:21.333Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition image-storage-api applying {_genkey_0=/api/images/**} to Path
2025-04-17 19:54:21.334 | 2025-04-17T12:54:21.334Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition image-storage-api applying filter {key-resolver=#{@ipKeyResolver}, redis-rate-limiter.replenishRate=50, redis-rate-limiter.burstCapacity=100} to RequestRateLimiter
2025-04-17 19:54:21.336 | 2025-04-17T12:54:21.336Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition image-storage-api applying filter {retries=3, statuses=BAD_GATEWAY,GATEWAY_TIMEOUT,SERVICE_UNAVAILABLE, methods=GET,POST, backoff.firstBackoff=50ms, backoff.maxBackoff=500ms, backoff.factor=2, backoff.basedOnPreviousValue=false} to Retry
2025-04-17 19:54:21.350 | 2025-04-17T12:54:21.349Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition image-storage-api applying filter {name=imageStorageCircuitBreaker, fallbackUri=forward:/fallback/image-storage} to CircuitBreaker
2025-04-17 19:54:21.351 | 2025-04-17T12:54:21.351Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: image-storage-api
2025-04-17 19:54:21.351 | 2025-04-17T12:54:21.351Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition compression-api applying {_genkey_0=/api/compression/**} to Path
2025-04-17 19:54:21.353 | 2025-04-17T12:54:21.352Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition compression-api applying filter {key-resolver=#{@ipKeyResolver}, redis-rate-limiter.replenishRate=30, redis-rate-limiter.burstCapacity=60} to RequestRateLimiter
2025-04-17 19:54:21.355 | 2025-04-17T12:54:21.354Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition compression-api applying filter {retries=3, statuses=BAD_GATEWAY,GATEWAY_TIMEOUT,SERVICE_UNAVAILABLE, methods=GET,POST, backoff.firstBackoff=50ms, backoff.maxBackoff=500ms, backoff.factor=2, backoff.basedOnPreviousValue=false} to Retry
2025-04-17 19:54:21.357 | 2025-04-17T12:54:21.356Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition compression-api applying filter {name=compressionCircuitBreaker, fallbackUri=forward:/fallback/compression} to CircuitBreaker
2025-04-17 19:54:21.358 | 2025-04-17T12:54:21.358Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: compression-api
2025-04-17 19:54:21.358 | 2025-04-17T12:54:21.358Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition statistics-api applying {_genkey_0=/api/statistics/**} to Path
2025-04-17 19:54:21.359 | 2025-04-17T12:54:21.359Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition statistics-api applying filter {key-resolver=#{@ipKeyResolver}, redis-rate-limiter.replenishRate=50, redis-rate-limiter.burstCapacity=100} to RequestRateLimiter
2025-04-17 19:54:21.361 | 2025-04-17T12:54:21.361Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition statistics-api applying filter {retries=3, statuses=BAD_GATEWAY,GATEWAY_TIMEOUT,SERVICE_UNAVAILABLE, methods=GET,POST, backoff.firstBackoff=50ms, backoff.maxBackoff=500ms, backoff.factor=2, backoff.basedOnPreviousValue=false} to Retry
2025-04-17 19:54:21.364 | 2025-04-17T12:54:21.364Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition statistics-api applying filter {name=statisticsCircuitBreaker, fallbackUri=forward:/fallback/statistics} to CircuitBreaker
2025-04-17 19:54:21.366 | 2025-04-17T12:54:21.366Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: statistics-api
2025-04-17 19:54:21.366 | 2025-04-17T12:54:21.366Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition statistics-api-compat applying {_genkey_0=/api/images/statistics/**} to Path
2025-04-17 19:54:21.367 | 2025-04-17T12:54:21.367Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition statistics-api-compat applying filter {_genkey_0=/api/images/statistics/(?<segment>.*), _genkey_1=/api/statistics/$\{segment}} to RewritePath
2025-04-17 19:54:21.369 | 2025-04-17T12:54:21.369Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition statistics-api-compat applying filter {_genkey_0=/api/images/statistics$, _genkey_1=/api/statistics} to RewritePath
2025-04-17 19:54:21.370 | 2025-04-17T12:54:21.370Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition statistics-api-compat applying filter {key-resolver=#{@ipKeyResolver}, redis-rate-limiter.replenishRate=50, redis-rate-limiter.burstCapacity=100} to RequestRateLimiter
2025-04-17 19:54:21.373 | 2025-04-17T12:54:21.373Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition statistics-api-compat applying filter {name=statisticsCircuitBreaker, fallbackUri=forward:/fallback/statistics} to CircuitBreaker
2025-04-17 19:54:21.374 | 2025-04-17T12:54:21.374Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: statistics-api-compat
2025-04-17 19:54:21.375 | 2025-04-17T12:54:21.375Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition openapi applying {_genkey_0=/v3/api-docs/**, _genkey_1=/swagger-ui/**, _genkey_2=/swagger-ui.html, _genkey_3=/webjars/**} to Path
2025-04-17 19:54:21.376 | 2025-04-17T12:54:21.376Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition openapi applying filter {_genkey_0=/(?<segment>.*), _genkey_1=/$\{segment}} to RewritePath
2025-04-17 19:54:21.377 | 2025-04-17T12:54:21.377Z DEBUG 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: openapi
2025-04-17 19:54:21.386 | 2025-04-17T12:54:21.386Z DEBUG 1 --- [           main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 6
2025-04-17 19:54:21.395 | 2025-04-17T12:54:21.395Z  INFO 1 --- [           main] iGatewayCompressionRankSystemApplication : Started ApiGatewayCompressionRankSystemApplication in 11.434 seconds (process running for 13.077)
2025-04-17 19:54:23.828 | 2025-04-17T12:54:23.827Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [3d2e9587, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53100] New http connection, requesting read
2025-04-17 19:54:23.828 | 2025-04-17T12:54:23.828Z DEBUG 1 --- [or-http-epoll-2] r.netty.transport.TransportConfig        : [3d2e9587, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53100] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:54:23.943 | 2025-04-17T12:54:23.943Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [3d2e9587, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53100] Increasing pending responses, now 1
2025-04-17 19:54:23.954 | 2025-04-17T12:54:23.953Z DEBUG 1 --- [or-http-epoll-2] reactor.netty.http.server.HttpServer     : [3d2e9587-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53100] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:54:23.976 | 2025-04-17T12:54:23.976Z DEBUG 1 --- [or-http-epoll-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3d2e9587-1] HTTP GET "/actuator/health"
2025-04-17 19:54:24.152 | 2025-04-17T12:54:24.150Z DEBUG 1 --- [or-http-epoll-2] reactor.netty.ReactorNetty               : [3d2e9587-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53100] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:54:24.159 | 2025-04-17T12:54:24.156Z DEBUG 1 --- [     parallel-1] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:54:24.176 | 2025-04-17T12:54:24.175Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:54:24.183 | 2025-04-17T12:54:24.183Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'POST /logout'
2025-04-17 19:54:24.184 | 2025-04-17T12:54:24.184Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:24.201 | 2025-04-17T12:54:24.200Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:54:24.201 | 2025-04-17T12:54:24.201Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:54:24.202 | 2025-04-17T12:54:24.201Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:54:24.202 | 2025-04-17T12:54:24.202Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui/**'
2025-04-17 19:54:24.202 | 2025-04-17T12:54:24.202Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:54:24.202 | 2025-04-17T12:54:24.202Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui.html'
2025-04-17 19:54:24.202 | 2025-04-17T12:54:24.202Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:54:24.202 | 2025-04-17T12:54:24.202Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /webjars/**'
2025-04-17 19:54:24.202 | 2025-04-17T12:54:24.202Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:24.203 | 2025-04-17T12:54:24.202Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:54:24.203 | 2025-04-17T12:54:24.203Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/actuator/health'; against '/actuator/health/**'
2025-04-17 19:54:24.203 | 2025-04-17T12:54:24.203Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:54:24.204 | 2025-04-17T12:54:24.204Z DEBUG 1 --- [     parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/actuator/health' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:54:24.206 | 2025-04-17T12:54:24.205Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:54:24.230 | 2025-04-17T12:54:24.230Z DEBUG 1 --- [     parallel-1] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@2bc3a3b1'
2025-04-17 19:54:24.574 | 2025-04-17T12:54:24.573Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [3d2e9587-1] Using 'application/vnd.spring-boot.actuator.v3+json' given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-04-17 19:54:24.574 | 2025-04-17T12:54:24.574Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [3d2e9587-1] 0..1 [org.springframework.boot.actuate.health.SystemHealth]
2025-04-17 19:54:24.615 | 2025-04-17T12:54:24.614Z DEBUG 1 --- [llEventLoop-5-1] org.springframework.web.HttpLogging      : [3d2e9587-1] Encoding [org.springframework.boot.actuate.health.SystemHealth@32883916]
2025-04-17 19:54:24.642 | 2025-04-17T12:54:24.642Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [3d2e9587-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53100] Decreasing pending responses, now 0
2025-04-17 19:54:24.644 | 2025-04-17T12:54:24.644Z DEBUG 1 --- [or-http-epoll-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3d2e9587-1] Completed 200 OK
2025-04-17 19:54:24.646 | 2025-04-17T12:54:24.645Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [3d2e9587-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53100] Last HTTP response frame
2025-04-17 19:54:24.646 | 2025-04-17T12:54:24.646Z DEBUG 1 --- [or-http-epoll-2] r.netty.channel.ChannelOperations        : [3d2e9587-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53100] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:54:24.646 | 2025-04-17T12:54:24.646Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [3d2e9587-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53100] Last HTTP packet was sent, terminating the channel
2025-04-17 19:54:51.266 | 2025-04-17T12:54:51.266Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] New http connection, requesting read
2025-04-17 19:54:51.266 | 2025-04-17T12:54:51.266Z DEBUG 1 --- [or-http-epoll-3] r.netty.transport.TransportConfig        : [ec2d2c63, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:54:51.269 | 2025-04-17T12:54:51.269Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Increasing pending responses, now 1
2025-04-17 19:54:51.270 | 2025-04-17T12:54:51.269Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.http.server.HttpServer     : [ec2d2c63-1, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:54:51.271 | 2025-04-17T12:54:51.270Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ec2d2c63-2] HTTP GET "/api/images"
2025-04-17 19:54:51.280 | 2025-04-17T12:54:51.279Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.ReactorNetty               : [ec2d2c63-1, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:54:51.280 | 2025-04-17T12:54:51.279Z DEBUG 1 --- [     parallel-2] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:54:51.280 | 2025-04-17T12:54:51.280Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:54:51.280 | 2025-04-17T12:54:51.280Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'POST /logout'
2025-04-17 19:54:51.281 | 2025-04-17T12:54:51.280Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:51.281 | 2025-04-17T12:54:51.281Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:54:51.281 | 2025-04-17T12:54:51.281Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:54:51.281 | 2025-04-17T12:54:51.281Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:54:51.281 | 2025-04-17T12:54:51.281Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:54:51.282 | 2025-04-17T12:54:51.281Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:54:51.282 | 2025-04-17T12:54:51.282Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:54:51.282 | 2025-04-17T12:54:51.282Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:54:51.282 | 2025-04-17T12:54:51.282Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:54:51.282 | 2025-04-17T12:54:51.282Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:51.282 | 2025-04-17T12:54:51.282Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:54:51.282 | 2025-04-17T12:54:51.282Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:54:51.282 | 2025-04-17T12:54:51.282Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:54:51.282 | 2025-04-17T12:54:51.282Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:54:51.283 | 2025-04-17T12:54:51.282Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:51.283 | 2025-04-17T12:54:51.283Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:54:51.283 | 2025-04-17T12:54:51.283Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:54:51.283 | 2025-04-17T12:54:51.283Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:51.283 | 2025-04-17T12:54:51.283Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:54:51.283 | 2025-04-17T12:54:51.283Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:54:51.283 | 2025-04-17T12:54:51.283Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:54:51.283 | 2025-04-17T12:54:51.283Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:54:51.283 | 2025-04-17T12:54:51.283Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:54:51.283 | 2025-04-17T12:54:51.283Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:54:51.284 | 2025-04-17T12:54:51.283Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:51.284 | 2025-04-17T12:54:51.284Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:54:51.284 | 2025-04-17T12:54:51.284Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:54:51.284 | 2025-04-17T12:54:51.284Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:54:51.284 | 2025-04-17T12:54:51.284Z DEBUG 1 --- [     parallel-2] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:54:51.284 | 2025-04-17T12:54:51.284Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:54:51.291 | 2025-04-17T12:54:51.290Z DEBUG 1 --- [     parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:54:51.294 | 2025-04-17T12:54:51.294Z DEBUG 1 --- [     parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:54:51.294 | 2025-04-17T12:54:51.294Z DEBUG 1 --- [     parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [ec2d2c63-2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:54:51.295 | 2025-04-17T12:54:51.295Z DEBUG 1 --- [     parallel-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:54:51.299 | 2025-04-17T12:54:51.299Z  INFO 1 --- [     parallel-2] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images from 172.18.0.1 [request_id: 7e2668e8-f559-4d86-a3a6-69e349478192]
2025-04-17 19:54:51.304 | 2025-04-17T12:54:51.304Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.channel.FluxReceive        : [ec2d2c63-1, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:54:51.330 | 2025-04-17T12:54:51.330Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=99, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:54:51.353 | 2025-04-17T12:54:51.352Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Android"", User-Agent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Mobile Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?1", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"7e2668e8-f559-4d86-a3a6-69e349478192", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:57116"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:54:51.359 | 2025-04-17T12:54:51.359Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.001831739, duration(nanos)=1831739.0, startTimeNanos=66488662011296}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@206a72c4'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.074404584, duration(nanos)=7.4404584E7, startTimeNanos=66488589735902}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2e07320b'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66488576995378}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@793bb52d'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.088118214, duration(nanos)=8.8118214E7, startTimeNanos=66488576313103}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@65541213'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Android"", User-Agent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Mobile Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?1", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"7e2668e8-f559-4d86-a3a6-69e349478192", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:57116"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:54:51.379 | 2025-04-17T12:54:51.379Z DEBUG 1 --- [llEventLoop-5-1] r.n.resources.PooledConnectionProvider   : Creating a new [proxy] client pool [PoolFactory{evictionInterval=PT0S, leasingStrategy=fifo, maxConnections=2147483647, maxIdleTime=-1, maxLifeTime=-1, metricsEnabled=false, pendingAcquireMaxCount=-1, pendingAcquireTimeout=0}] for [image-storage/<unresolved>:8081]
2025-04-17 19:54:51.393 | 2025-04-17T12:54:51.393Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [301d055a] Created a new pooled channel, now: 0 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:54:51.398 | 2025-04-17T12:54:51.398Z DEBUG 1 --- [or-http-epoll-5] r.netty.transport.TransportConfig        : [301d055a] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpClientCodec), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:54:51.403 | 2025-04-17T12:54:51.402Z DEBUG 1 --- [or-http-epoll-5] r.netty.transport.TransportConnector     : [301d055a] Connecting to [image-storage/172.18.0.6:8081].
2025-04-17 19:54:51.404 | 2025-04-17T12:54:51.404Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] Registering pool release on close event for channel
2025-04-17 19:54:51.404 | 2025-04-17T12:54:51.404Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] Channel connected, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:54:51.404 | 2025-04-17T12:54:51.404Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] onStateChange(PooledConnection{channel=[id: 0x301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081]}, [connected])
2025-04-17 19:54:51.408 | 2025-04-17T12:54:51.407Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a-1, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=null, connection=PooledConnection{channel=[id: 0x301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081]}}, [configured])
2025-04-17 19:54:51.408 | 2025-04-17T12:54:51.408Z DEBUG 1 --- [or-http-epoll-5] r.netty.http.client.HttpClientConnect    : [301d055a-1, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=GET}
2025-04-17 19:54:51.409 | 2025-04-17T12:54:51.409Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a-1, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:54:51.413 | 2025-04-17T12:54:51.413Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a-1, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:54:51.456 | 2025-04-17T12:54:51.456Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [301d055a-1, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:54:51.456 | HTTP/1.1 200 
2025-04-17 19:54:51.456 | Content-Type: <filtered>
2025-04-17 19:54:51.456 | Transfer-Encoding: <filtered>
2025-04-17 19:54:51.456 | Date: <filtered>
2025-04-17 19:54:51.456 | 2025-04-17T12:54:51.456Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a-1, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:54:51.457 | 2025-04-17T12:54:51.457Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:54:51.457 | 2025-04-17T12:54:51.457Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.10042477, duration(nanos)=1.0042477E8, startTimeNanos=66488662011296}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@206a72c4'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.172768496, duration(nanos)=1.72768496E8, startTimeNanos=66488589735902}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2e07320b'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66488576995378}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@793bb52d'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.186345671, duration(nanos)=1.86345671E8, startTimeNanos=66488576313103}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@65541213'], parentObservation=null}}}}
2025-04-17 19:54:51.464 | 2025-04-17T12:54:51.464Z DEBUG 1 --- [or-http-epoll-5] reactor.netty.channel.FluxReceive        : [301d055a-1, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:54:51.468 | 2025-04-17T12:54:51.468Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [301d055a-1, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:54:51.469 | 2025-04-17T12:54:51.468Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:54:51.469 | 2025-04-17T12:54:51.469Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:54:51.469 | 2025-04-17T12:54:51.469Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:54:51.470 | 2025-04-17T12:54:51.470Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:54:51.471 | 2025-04-17T12:54:51.471Z  INFO 1 --- [or-http-epoll-3] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images - 200 in 176 ms [request_id: 7e2668e8-f559-4d86-a3a6-69e349478192]
2025-04-17 19:54:51.472 | 2025-04-17T12:54:51.472Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ec2d2c63-2] Completed 200 OK
2025-04-17 19:54:51.472 | 2025-04-17T12:54:51.472Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63-1, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Last HTTP response frame
2025-04-17 19:54:51.472 | 2025-04-17T12:54:51.472Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63-1, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Decreasing pending responses, now 0
2025-04-17 19:54:51.473 | 2025-04-17T12:54:51.473Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63-1, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Last HTTP packet was sent, terminating the channel
2025-04-17 19:54:51.473 | 2025-04-17T12:54:51.473Z DEBUG 1 --- [or-http-epoll-3] r.netty.channel.ChannelOperations        : [ec2d2c63-1, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:54:51.480 | 2025-04-17T12:54:51.479Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Increasing pending responses, now 1
2025-04-17 19:54:51.480 | 2025-04-17T12:54:51.480Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.http.server.HttpServer     : [ec2d2c63-2, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:54:51.480 | 2025-04-17T12:54:51.480Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ec2d2c63-3] HTTP GET "/api/images/statistics"
2025-04-17 19:54:51.481 | 2025-04-17T12:54:51.481Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.ReactorNetty               : [ec2d2c63-2, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:54:51.482 | 2025-04-17T12:54:51.481Z DEBUG 1 --- [     parallel-4] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:54:51.482 | 2025-04-17T12:54:51.482Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:54:51.482 | 2025-04-17T12:54:51.482Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'POST /logout'
2025-04-17 19:54:51.482 | 2025-04-17T12:54:51.482Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:51.482 | 2025-04-17T12:54:51.482Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:54:51.482 | 2025-04-17T12:54:51.482Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:54:51.483 | 2025-04-17T12:54:51.482Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:54:51.483 | 2025-04-17T12:54:51.482Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /swagger-ui/**'
2025-04-17 19:54:51.483 | 2025-04-17T12:54:51.483Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:54:51.483 | 2025-04-17T12:54:51.483Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /swagger-ui.html'
2025-04-17 19:54:51.483 | 2025-04-17T12:54:51.483Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:54:51.483 | 2025-04-17T12:54:51.483Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /webjars/**'
2025-04-17 19:54:51.483 | 2025-04-17T12:54:51.483Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:51.483 | 2025-04-17T12:54:51.483Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:54:51.483 | 2025-04-17T12:54:51.483Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /actuator/health/**'
2025-04-17 19:54:51.483 | 2025-04-17T12:54:51.483Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:54:51.483 | 2025-04-17T12:54:51.483Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /actuator/info'
2025-04-17 19:54:51.484 | 2025-04-17T12:54:51.483Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:51.484 | 2025-04-17T12:54:51.484Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:54:51.484 | 2025-04-17T12:54:51.484Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /fallback/**'
2025-04-17 19:54:51.484 | 2025-04-17T12:54:51.484Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:51.484 | 2025-04-17T12:54:51.484Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:54:51.484 | 2025-04-17T12:54:51.484Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /api/auth/login'
2025-04-17 19:54:51.484 | 2025-04-17T12:54:51.484Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:54:51.484 | 2025-04-17T12:54:51.484Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /api/auth/register'
2025-04-17 19:54:51.484 | 2025-04-17T12:54:51.484Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:54:51.484 | 2025-04-17T12:54:51.484Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /api/auth/refresh'
2025-04-17 19:54:51.484 | 2025-04-17T12:54:51.484Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:51.485 | 2025-04-17T12:54:51.484Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:54:51.485 | 2025-04-17T12:54:51.484Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/statistics'; against '/api/**'
2025-04-17 19:54:51.485 | 2025-04-17T12:54:51.485Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:54:51.485 | 2025-04-17T12:54:51.485Z DEBUG 1 --- [     parallel-4] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/statistics' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:54:51.485 | 2025-04-17T12:54:51.485Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:54:51.486 | 2025-04-17T12:54:51.486Z DEBUG 1 --- [     parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:54:51.486 | 2025-04-17T12:54:51.486Z DEBUG 1 --- [     parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/statistics] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:54:51.486 | 2025-04-17T12:54:51.486Z DEBUG 1 --- [     parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [ec2d2c63-3] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:54:51.487 | 2025-04-17T12:54:51.487Z DEBUG 1 --- [     parallel-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:54:51.487 | 2025-04-17T12:54:51.487Z  INFO 1 --- [     parallel-4] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/statistics from 172.18.0.1 [request_id: c0e4935b-5952-428a-8989-53c1c474e1f2]
2025-04-17 19:54:51.487 | 2025-04-17T12:54:51.487Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.channel.FluxReceive        : [ec2d2c63-2, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:54:51.489 | 2025-04-17T12:54:51.489Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=98, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:54:51.490 | 2025-04-17T12:54:51.490Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Android"", User-Agent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Mobile Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?1", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"c0e4935b-5952-428a-8989-53c1c474e1f2", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:57116"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:54:51.491 | 2025-04-17T12:54:51.491Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/statistics'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.04584E-4, duration(nanos)=104584.0, startTimeNanos=66488795651430}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@148767fd'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.005293478, duration(nanos)=5293478.0, startTimeNanos=66488790538279}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@41bcc7e'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66488785972849}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@511ce119'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/statistics'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.010357796, duration(nanos)=1.0357796E7, startTimeNanos=66488785672308}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@72c698e5'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Android"", User-Agent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Mobile Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?1", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"c0e4935b-5952-428a-8989-53c1c474e1f2", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:57116"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:54:51.492 | 2025-04-17T12:54:51.492Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:54:51.492 | 2025-04-17T12:54:51.492Z DEBUG 1 --- [or-http-epoll-5] r.netty.http.client.HttpClientConnect    : [301d055a-2, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/statistics, method=GET}
2025-04-17 19:54:51.493 | 2025-04-17T12:54:51.492Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a-2, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/statistics, connection=PooledConnection{channel=[id: 0x301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:54:51.493 | 2025-04-17T12:54:51.493Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a-2, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/statistics, connection=PooledConnection{channel=[id: 0x301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:54:51.520 | 2025-04-17T12:54:51.520Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [301d055a-2, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:54:51.520 | HTTP/1.1 404 
2025-04-17 19:54:51.520 | Content-Length: <filtered>
2025-04-17 19:54:51.520 | Date: <filtered>
2025-04-17 19:54:51.520 | 2025-04-17T12:54:51.520Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a-2, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/statistics, connection=PooledConnection{channel=[id: 0x301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:54:51.521 | 2025-04-17T12:54:51.520Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:54:51.521 | 2025-04-17T12:54:51.521Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/statistics'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.030449277, duration(nanos)=3.0449277E7, startTimeNanos=66488795651430}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@148767fd'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.035638001, duration(nanos)=3.5638001E7, startTimeNanos=66488790538279}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@41bcc7e'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66488785972849}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@511ce119'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/statistics'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.040772082, duration(nanos)=4.0772082E7, startTimeNanos=66488785672308}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@72c698e5'], parentObservation=null}}}}
2025-04-17 19:54:51.522 | 2025-04-17T12:54:51.522Z DEBUG 1 --- [or-http-epoll-5] reactor.netty.channel.FluxReceive        : [301d055a-2, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:54:51.522 | 2025-04-17T12:54:51.522Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [301d055a-2, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:54:51.523 | 2025-04-17T12:54:51.523Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/statistics, connection=PooledConnection{channel=[id: 0x301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:54:51.523 | 2025-04-17T12:54:51.523Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/statistics, connection=PooledConnection{channel=[id: 0x301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:54:51.523 | 2025-04-17T12:54:51.523Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:54:51.523 | 2025-04-17T12:54:51.523Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:54:51.523 | 2025-04-17T12:54:51.523Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63-2, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Decreasing pending responses, now 0
2025-04-17 19:54:51.523 | 2025-04-17T12:54:51.523Z  INFO 1 --- [or-http-epoll-3] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/statistics - 404 in 36 ms [request_id: c0e4935b-5952-428a-8989-53c1c474e1f2]
2025-04-17 19:54:51.524 | 2025-04-17T12:54:51.524Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ec2d2c63-3] Completed 404 NOT_FOUND
2025-04-17 19:54:51.524 | 2025-04-17T12:54:51.524Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63-2, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Last HTTP response frame
2025-04-17 19:54:51.524 | 2025-04-17T12:54:51.524Z DEBUG 1 --- [or-http-epoll-3] r.netty.channel.ChannelOperations        : [ec2d2c63-2, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:54:51.524 | 2025-04-17T12:54:51.524Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63-2, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Last HTTP packet was sent, terminating the channel
2025-04-17 19:54:54.672 | 2025-04-17T12:54:54.671Z DEBUG 1 --- [or-http-epoll-6] r.n.http.server.HttpServerOperations     : [e31afdea, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:48752] New http connection, requesting read
2025-04-17 19:54:54.672 | 2025-04-17T12:54:54.672Z DEBUG 1 --- [or-http-epoll-6] r.netty.transport.TransportConfig        : [e31afdea, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:48752] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:54:54.674 | 2025-04-17T12:54:54.674Z DEBUG 1 --- [or-http-epoll-6] r.n.http.server.HttpServerOperations     : [e31afdea, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:48752] Increasing pending responses, now 1
2025-04-17 19:54:54.674 | 2025-04-17T12:54:54.674Z DEBUG 1 --- [or-http-epoll-6] reactor.netty.http.server.HttpServer     : [e31afdea-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:48752] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:54:54.674 | 2025-04-17T12:54:54.674Z DEBUG 1 --- [or-http-epoll-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e31afdea-4] HTTP GET "/actuator/health"
2025-04-17 19:54:54.675 | 2025-04-17T12:54:54.675Z DEBUG 1 --- [or-http-epoll-6] reactor.netty.ReactorNetty               : [e31afdea-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:48752] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:54:54.676 | 2025-04-17T12:54:54.676Z DEBUG 1 --- [     parallel-6] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:54:54.676 | 2025-04-17T12:54:54.676Z DEBUG 1 --- [     parallel-6] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:54:54.676 | 2025-04-17T12:54:54.676Z DEBUG 1 --- [     parallel-6] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'POST /logout'
2025-04-17 19:54:54.676 | 2025-04-17T12:54:54.676Z DEBUG 1 --- [     parallel-6] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:54.676 | 2025-04-17T12:54:54.676Z DEBUG 1 --- [     parallel-6] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:54:54.676 | 2025-04-17T12:54:54.676Z DEBUG 1 --- [     parallel-6] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:54:54.676 | 2025-04-17T12:54:54.676Z DEBUG 1 --- [     parallel-6] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:54:54.676 | 2025-04-17T12:54:54.676Z DEBUG 1 --- [     parallel-6] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui/**'
2025-04-17 19:54:54.677 | 2025-04-17T12:54:54.676Z DEBUG 1 --- [     parallel-6] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:54:54.677 | 2025-04-17T12:54:54.677Z DEBUG 1 --- [     parallel-6] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui.html'
2025-04-17 19:54:54.677 | 2025-04-17T12:54:54.677Z DEBUG 1 --- [     parallel-6] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:54:54.677 | 2025-04-17T12:54:54.677Z DEBUG 1 --- [     parallel-6] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /webjars/**'
2025-04-17 19:54:54.677 | 2025-04-17T12:54:54.677Z DEBUG 1 --- [     parallel-6] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:54.677 | 2025-04-17T12:54:54.677Z DEBUG 1 --- [     parallel-6] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:54:54.677 | 2025-04-17T12:54:54.677Z DEBUG 1 --- [     parallel-6] athPatternParserServerWebExchangeMatcher : Checking match of request : '/actuator/health'; against '/actuator/health/**'
2025-04-17 19:54:54.677 | 2025-04-17T12:54:54.677Z DEBUG 1 --- [     parallel-6] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:54:54.677 | 2025-04-17T12:54:54.677Z DEBUG 1 --- [     parallel-6] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/actuator/health' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:54:54.677 | 2025-04-17T12:54:54.677Z DEBUG 1 --- [     parallel-6] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:54:54.678 | 2025-04-17T12:54:54.678Z DEBUG 1 --- [     parallel-6] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@49e5d793'
2025-04-17 19:54:54.680 | 2025-04-17T12:54:54.680Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [e31afdea-4] Using 'application/vnd.spring-boot.actuator.v3+json' given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-04-17 19:54:54.680 | 2025-04-17T12:54:54.680Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [e31afdea-4] 0..1 [org.springframework.boot.actuate.health.SystemHealth]
2025-04-17 19:54:54.681 | 2025-04-17T12:54:54.681Z DEBUG 1 --- [llEventLoop-5-1] org.springframework.web.HttpLogging      : [e31afdea-4] Encoding [org.springframework.boot.actuate.health.SystemHealth@3151c3f9]
2025-04-17 19:54:54.683 | 2025-04-17T12:54:54.683Z DEBUG 1 --- [or-http-epoll-6] r.n.http.server.HttpServerOperations     : [e31afdea-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:48752] Decreasing pending responses, now 0
2025-04-17 19:54:54.684 | 2025-04-17T12:54:54.683Z DEBUG 1 --- [or-http-epoll-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e31afdea-4] Completed 200 OK
2025-04-17 19:54:54.684 | 2025-04-17T12:54:54.684Z DEBUG 1 --- [or-http-epoll-6] r.n.http.server.HttpServerOperations     : [e31afdea-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:48752] Last HTTP response frame
2025-04-17 19:54:54.684 | 2025-04-17T12:54:54.684Z DEBUG 1 --- [or-http-epoll-6] r.netty.channel.ChannelOperations        : [e31afdea-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:48752] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:54:54.684 | 2025-04-17T12:54:54.684Z DEBUG 1 --- [or-http-epoll-6] r.n.http.server.HttpServerOperations     : [e31afdea-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:48752] Last HTTP packet was sent, terminating the channel
2025-04-17 19:54:57.869 | 2025-04-17T12:54:57.869Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Increasing pending responses, now 1
2025-04-17 19:54:57.870 | 2025-04-17T12:54:57.869Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.http.server.HttpServer     : [ec2d2c63-3, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:54:57.874 | 2025-04-17T12:54:57.873Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ec2d2c63-5] HTTP POST "/api/images"
2025-04-17 19:54:57.876 | 2025-04-17T12:54:57.876Z DEBUG 1 --- [     parallel-7] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:54:57.876 | 2025-04-17T12:54:57.876Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:54:57.876 | 2025-04-17T12:54:57.876Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 19:54:57.876 | 2025-04-17T12:54:57.876Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:57.877 | 2025-04-17T12:54:57.877Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:54:57.877 | 2025-04-17T12:54:57.877Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:54:57.877 | 2025-04-17T12:54:57.877Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:54:57.877 | 2025-04-17T12:54:57.877Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:54:57.877 | 2025-04-17T12:54:57.877Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:54:57.877 | 2025-04-17T12:54:57.877Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:54:57.877 | 2025-04-17T12:54:57.877Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:54:57.877 | 2025-04-17T12:54:57.877Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:54:57.877 | 2025-04-17T12:54:57.877Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:57.877 | 2025-04-17T12:54:57.877Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:54:57.877 | 2025-04-17T12:54:57.877Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:54:57.878 | 2025-04-17T12:54:57.877Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:54:57.878 | 2025-04-17T12:54:57.878Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:54:57.878 | 2025-04-17T12:54:57.878Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:57.878 | 2025-04-17T12:54:57.878Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:54:57.878 | 2025-04-17T12:54:57.878Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:54:57.878 | 2025-04-17T12:54:57.878Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:57.878 | 2025-04-17T12:54:57.878Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:54:57.878 | 2025-04-17T12:54:57.878Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:54:57.878 | 2025-04-17T12:54:57.878Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:54:57.878 | 2025-04-17T12:54:57.878Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:54:57.878 | 2025-04-17T12:54:57.878Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:54:57.878 | 2025-04-17T12:54:57.878Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:54:57.878 | 2025-04-17T12:54:57.878Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:54:57.879 | 2025-04-17T12:54:57.878Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:54:57.879 | 2025-04-17T12:54:57.878Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:54:57.879 | 2025-04-17T12:54:57.878Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:54:57.879 | 2025-04-17T12:54:57.879Z DEBUG 1 --- [     parallel-7] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:54:57.879 | 2025-04-17T12:54:57.879Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:54:57.880 | 2025-04-17T12:54:57.880Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:54:57.880 | 2025-04-17T12:54:57.880Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:54:57.880 | 2025-04-17T12:54:57.880Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [ec2d2c63-5] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:54:57.880 | 2025-04-17T12:54:57.880Z DEBUG 1 --- [     parallel-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:54:57.881 | 2025-04-17T12:54:57.880Z  INFO 1 --- [     parallel-7] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: f3090b52-341d-4009-82d2-25dc6dc146e1]
2025-04-17 19:54:57.881 | 2025-04-17T12:54:57.881Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.channel.FluxReceive        : [ec2d2c63-3, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:54:57.939 | 2025-04-17T12:54:57.938Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.ReactorNetty               : [ec2d2c63-3, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:54:57.952 | 2025-04-17T12:54:57.951Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=99, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:54:57.954 | 2025-04-17T12:54:57.953Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"5480022", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundary04VtAAUSM1eUQ4iy", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"f3090b52-341d-4009-82d2-25dc6dc146e1", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:57116"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:54:57.955 | 2025-04-17T12:54:57.954Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.32664E-4, duration(nanos)=132664.0, startTimeNanos=66495259248533}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7de30fc6'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.075168228, duration(nanos)=7.5168228E7, startTimeNanos=66495184350204}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@65d8b55c'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66495179941382}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6ddb0922'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.080278863, duration(nanos)=8.0278863E7, startTimeNanos=66495179419195}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6198aac0'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"5480022", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundary04VtAAUSM1eUQ4iy", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"f3090b52-341d-4009-82d2-25dc6dc146e1", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:57116"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:54:57.956 | 2025-04-17T12:54:57.956Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:54:57.957 | 2025-04-17T12:54:57.957Z DEBUG 1 --- [or-http-epoll-5] r.netty.http.client.HttpClientConnect    : [301d055a-3, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 19:54:57.957 | 2025-04-17T12:54:57.957Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a-3, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:54:58.045 | 2025-04-17T12:54:58.045Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a-3, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x301d055a, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:54:58.956 | 2025-04-17T12:54:58.956Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [301d055a-3, L:/172.18.0.10:57550 - R:image-storage/172.18.0.6:8081] Http client inbound receiver cancelled, closing channel.
2025-04-17 19:54:58.958 | 2025-04-17T12:54:58.957Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [301d055a-3, L:/172.18.0.10:57550 ! R:image-storage/172.18.0.6:8081] Channel closed, now: 0 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:54:58.958 | 2025-04-17T12:54:58.957Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [301d055a-3, L:/172.18.0.10:57550 ! R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x301d055a, L:/172.18.0.10:57550 ! R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:54:58.959 | 2025-04-17T12:54:58.959Z DEBUG 1 --- [     parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: fallback-routes
2025-04-17 19:54:58.960 | 2025-04-17T12:54:58.960Z DEBUG 1 --- [     parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST /fallback/image-storage] to Route{id='fallback-routes', uri=forward:/internal/fallback, order=0, predicate=Paths: [/fallback/**], match trailing slash: true, gatewayFilters=[[[SetResponseHeader X-Fallback = 'true'], order = 0]], metadata={}}
2025-04-17 19:54:58.960 | 2025-04-17T12:54:58.960Z DEBUG 1 --- [     parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [ec2d2c63-5] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:54:58.960 | 2025-04-17T12:54:58.960Z DEBUG 1 --- [     parallel-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [[SetResponseHeader X-Fallback = 'true'], order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:54:58.960 | 2025-04-17T12:54:58.960Z  INFO 1 --- [     parallel-8] s.s.a.filter.GlobalFilters               : Incoming request: POST /fallback/image-storage from 172.18.0.1 [request_id: f3090b52-341d-4009-82d2-25dc6dc146e1]
2025-04-17 19:54:58.966 | 2025-04-17T12:54:58.966Z DEBUG 1 --- [     parallel-8] o.s.w.r.handler.SimpleUrlHandlerMapping  : [ec2d2c63-5] Mapped to ResourceWebHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/]]
2025-04-17 19:54:58.968 | 2025-04-17T12:54:58.968Z DEBUG 1 --- [     parallel-8] o.s.w.r.resource.ResourceWebHandler      : [ec2d2c63-5] Resource not found
2025-04-17 19:54:58.972 | 2025-04-17T12:54:58.972Z DEBUG 1 --- [     parallel-8] .o.ObservationClosingWebExceptionHandler : An exception occurred and observation was not previously stopped, will stop it. The exception was [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND]
2025-04-17 19:54:58.978 | 2025-04-17T12:54:58.972Z ERROR 1 --- [     parallel-8] s.s.a.exception.GlobalExceptionHandler   : Gateway Exception: status=404 NOT_FOUND, path=/api/images, error=404 NOT_FOUND
2025-04-17 19:54:58.978 | 
2025-04-17 19:54:58.978 | org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND
2025-04-17 19:54:58.978 | 	at org.springframework.web.reactive.resource.ResourceWebHandler.lambda$handle$1(ResourceWebHandler.java:406) ~[spring-webflux-6.0.13.jar!/:6.0.13]
2025-04-17 19:54:58.978 | 	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
2025-04-17 19:54:58.978 | Error has been observed at the following site(s):
2025-04-17 19:54:58.978 | 	*__checkpoint  org.springframework.web.cors.reactive.CorsWebFilter [DefaultWebFilterChain]
2025-04-17 19:54:58.978 | 	*__checkpoint  org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter [DefaultWebFilterChain]
2025-04-17 19:54:58.978 | 	*__checkpoint  AuthorizationWebFilter [DefaultWebFilterChain]
2025-04-17 19:54:58.978 | 	*__checkpoint  ExceptionTranslationWebFilter [DefaultWebFilterChain]
2025-04-17 19:54:58.978 | 	*__checkpoint  LogoutWebFilter [DefaultWebFilterChain]
2025-04-17 19:54:58.978 | 	*__checkpoint  ServerRequestCacheWebFilter [DefaultWebFilterChain]
2025-04-17 19:54:58.978 | 	*__checkpoint  SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]
2025-04-17 19:54:58.978 | 	*__checkpoint  ReactorContextWebFilter [DefaultWebFilterChain]
2025-04-17 19:54:58.978 | 	*__checkpoint  CorsWebFilter [DefaultWebFilterChain]
2025-04-17 19:54:58.978 | 	*__checkpoint  HttpHeaderWriterWebFilter [DefaultWebFilterChain]
2025-04-17 19:54:58.978 | 	*__checkpoint  ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]
2025-04-17 19:54:58.978 | 	*__checkpoint  org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]
2025-04-17 19:54:58.978 | 	*__checkpoint  org.springframework.web.filter.reactive.ServerHttpObservationFilter [DefaultWebFilterChain]
2025-04-17 19:54:58.978 | 	*__checkpoint  HTTP POST "/api/images" [ExceptionHandlingWebHandler]
2025-04-17 19:54:58.978 | Original Stack Trace:
2025-04-17 19:54:58.978 | 		at org.springframework.web.reactive.resource.ResourceWebHandler.lambda$handle$1(ResourceWebHandler.java:406) ~[spring-webflux-6.0.13.jar!/:6.0.13]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:45) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onComplete(FluxConcatMapNoPrefetch.java:240) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:357) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:336) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2341) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2215) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2545) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2341) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2215) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onNext(FluxConcatMapNoPrefetch.java:206) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerComplete(FluxConcatMapNoPrefetch.java:274) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onComplete(FluxConcatMap.java:887) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:85) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:209) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:238) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onComplete(FluxConcatMapNoPrefetch.java:240) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.onComplete(FluxDematerialize.java:121) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.onNext(FluxDematerialize.java:91) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.onNext(FluxDematerialize.java:44) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.request(FluxDematerialize.java:127) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerComplete(FluxConcatMapNoPrefetch.java:274) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onComplete(FluxConcatMap.java:887) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2205) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onComplete(MonoPeekTerminal.java:299) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.onNext(MonoFilterWhen.java:141) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2545) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.request(MonoFilterWhen.java:182) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2305) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2305) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2305) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2305) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2341) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2215) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.978 | 		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:158) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.onNext(MonoFilterWhen.java:136) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2545) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.request(MonoFilterWhen.java:182) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2341) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onSubscribe(FluxOnErrorResume.java:74) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onSubscribe(MonoPeekTerminal.java:152) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.onSubscribe(MonoFilterWhen.java:100) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onNext(FluxConcatMapNoPrefetch.java:206) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.onNext(FluxDematerialize.java:98) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.onNext(FluxDematerialize.java:44) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.request(FluxDematerialize.java:127) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerComplete(FluxConcatMapNoPrefetch.java:274) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onComplete(FluxConcatMap.java:887) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2205) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onComplete(MonoPeekTerminal.java:299) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.onNext(MonoFilterWhen.java:141) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2545) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.request(MonoFilterWhen.java:182) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2305) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2305) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2305) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2305) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2341) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2215) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:103) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onError(MonoPeekTerminal.java:258) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.SerializedSubscriber.onError(SerializedSubscriber.java:124) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.handleTimeout(FluxTimeout.java:295) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.doTimeout(FluxTimeout.java:280) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxTimeout$TimeoutTimeoutSubscriber.onNext(FluxTimeout.java:419) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoDelay$MonoDelayRunnable.propagateDelay(MonoDelay.java:271) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.publisher.MonoDelay$MonoDelayRunnable.run(MonoDelay.java:286) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:54:58.979 | 		at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
2025-04-17 19:54:58.979 | 		at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]
2025-04-17 19:54:58.979 | 		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]
2025-04-17 19:54:58.979 | 		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]
2025-04-17 19:54:58.979 | 		at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]
2025-04-17 19:54:58.979 | 
2025-04-17 19:54:58.980 | 2025-04-17T12:54:58.980Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63-3, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Decreasing pending responses, now 0
2025-04-17 19:54:58.980 | 2025-04-17T12:54:58.980Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ec2d2c63-5] Completed 404 NOT_FOUND
2025-04-17 19:54:58.980 | 2025-04-17T12:54:58.980Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63-3, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Last HTTP response frame
2025-04-17 19:54:58.980 | 2025-04-17T12:54:58.980Z DEBUG 1 --- [or-http-epoll-3] r.netty.channel.ChannelOperations        : [ec2d2c63-3, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:54:58.980 | 2025-04-17T12:54:58.980Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63-3, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:03.809 | 2025-04-17T12:55:03.808Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Increasing pending responses, now 1
2025-04-17 19:55:03.809 | 2025-04-17T12:55:03.809Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.http.server.HttpServer     : [ec2d2c63-4, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:03.810 | 2025-04-17T12:55:03.809Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ec2d2c63-6] HTTP POST "/api/images"
2025-04-17 19:55:03.811 | 2025-04-17T12:55:03.811Z DEBUG 1 --- [     parallel-9] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:03.811 | 2025-04-17T12:55:03.811Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:03.812 | 2025-04-17T12:55:03.811Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:03.812 | 2025-04-17T12:55:03.811Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:03.812 | 2025-04-17T12:55:03.812Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:03.812 | 2025-04-17T12:55:03.812Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:03.812 | 2025-04-17T12:55:03.812Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:03.812 | 2025-04-17T12:55:03.812Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:03.812 | 2025-04-17T12:55:03.812Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:03.812 | 2025-04-17T12:55:03.812Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:03.812 | 2025-04-17T12:55:03.812Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:03.812 | 2025-04-17T12:55:03.812Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:03.813 | 2025-04-17T12:55:03.812Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:03.813 | 2025-04-17T12:55:03.812Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:03.813 | 2025-04-17T12:55:03.812Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:03.813 | 2025-04-17T12:55:03.813Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:03.813 | 2025-04-17T12:55:03.813Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:03.813 | 2025-04-17T12:55:03.813Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:03.813 | 2025-04-17T12:55:03.813Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:03.813 | 2025-04-17T12:55:03.813Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:03.813 | 2025-04-17T12:55:03.813Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:03.813 | 2025-04-17T12:55:03.813Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:03.813 | 2025-04-17T12:55:03.813Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:03.813 | 2025-04-17T12:55:03.813Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:03.813 | 2025-04-17T12:55:03.813Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:03.813 | 2025-04-17T12:55:03.813Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:03.814 | 2025-04-17T12:55:03.813Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:03.814 | 2025-04-17T12:55:03.813Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:03.814 | 2025-04-17T12:55:03.814Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:03.814 | 2025-04-17T12:55:03.814Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:03.814 | 2025-04-17T12:55:03.814Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:03.814 | 2025-04-17T12:55:03.814Z DEBUG 1 --- [     parallel-9] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:03.814 | 2025-04-17T12:55:03.814Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:03.815 | 2025-04-17T12:55:03.815Z DEBUG 1 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:03.817 | 2025-04-17T12:55:03.817Z DEBUG 1 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:03.817 | 2025-04-17T12:55:03.817Z DEBUG 1 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [ec2d2c63-6] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:03.818 | 2025-04-17T12:55:03.817Z DEBUG 1 --- [     parallel-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:03.818 | 2025-04-17T12:55:03.818Z  INFO 1 --- [     parallel-9] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: 6689d618-b9dc-4b88-8bf7-bc602a317b9f]
2025-04-17 19:55:03.818 | 2025-04-17T12:55:03.818Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.channel.FluxReceive        : [ec2d2c63-4, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:03.993 | 2025-04-17T12:55:03.993Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.ReactorNetty               : [ec2d2c63-4, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:03.996 | 2025-04-17T12:55:03.995Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=99, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:03.997 | 2025-04-17T12:55:03.996Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"4539838", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryBIu3qG5xkVjNummf", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"6689d618-b9dc-4b88-8bf7-bc602a317b9f", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:57116"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:03.997 | 2025-04-17T12:55:03.997Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.18705E-4, duration(nanos)=118705.0, startTimeNanos=66501302267775}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@24b2339f'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.182784709, duration(nanos)=1.82784709E8, startTimeNanos=66501119715795}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1115bc32'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66501115483670}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@35ffda7a'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.187403029, duration(nanos)=1.87403029E8, startTimeNanos=66501115232850}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@31bbd88b'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"4539838", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryBIu3qG5xkVjNummf", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", X-Request-ID:"6689d618-b9dc-4b88-8bf7-bc602a317b9f", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:57116"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:03.998 | 2025-04-17T12:55:03.998Z DEBUG 1 --- [or-http-epoll-7] r.n.resources.PooledConnectionProvider   : [5e6d3345] Created a new pooled channel, now: 0 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:03.999 | 2025-04-17T12:55:03.999Z DEBUG 1 --- [or-http-epoll-7] r.netty.transport.TransportConfig        : [5e6d3345] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpClientCodec), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:04.001 | 2025-04-17T12:55:04.000Z DEBUG 1 --- [or-http-epoll-7] r.netty.transport.TransportConnector     : [5e6d3345] Connecting to [image-storage/172.18.0.6:8081].
2025-04-17 19:55:04.001 | 2025-04-17T12:55:04.001Z DEBUG 1 --- [or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [5e6d3345, L:/172.18.0.10:34050 - R:image-storage/172.18.0.6:8081] Registering pool release on close event for channel
2025-04-17 19:55:04.001 | 2025-04-17T12:55:04.001Z DEBUG 1 --- [or-http-epoll-7] r.n.resources.PooledConnectionProvider   : [5e6d3345, L:/172.18.0.10:34050 - R:image-storage/172.18.0.6:8081] Channel connected, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:04.001 | 2025-04-17T12:55:04.001Z DEBUG 1 --- [or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [5e6d3345, L:/172.18.0.10:34050 - R:image-storage/172.18.0.6:8081] onStateChange(PooledConnection{channel=[id: 0x5e6d3345, L:/172.18.0.10:34050 - R:image-storage/172.18.0.6:8081]}, [connected])
2025-04-17 19:55:04.001 | 2025-04-17T12:55:04.001Z DEBUG 1 --- [or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [5e6d3345-1, L:/172.18.0.10:34050 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=null, connection=PooledConnection{channel=[id: 0x5e6d3345, L:/172.18.0.10:34050 - R:image-storage/172.18.0.6:8081]}}, [configured])
2025-04-17 19:55:04.001 | 2025-04-17T12:55:04.001Z DEBUG 1 --- [or-http-epoll-7] r.netty.http.client.HttpClientConnect    : [5e6d3345-1, L:/172.18.0.10:34050 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 19:55:04.002 | 2025-04-17T12:55:04.001Z DEBUG 1 --- [or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [5e6d3345-1, L:/172.18.0.10:34050 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x5e6d3345, L:/172.18.0.10:34050 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:04.114 | 2025-04-17T12:55:04.114Z DEBUG 1 --- [or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [5e6d3345-1, L:/172.18.0.10:34050 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x5e6d3345, L:/172.18.0.10:34050 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:04.998 | 2025-04-17T12:55:04.998Z DEBUG 1 --- [or-http-epoll-7] r.n.http.client.HttpClientOperations     : [5e6d3345-1, L:/172.18.0.10:34050 - R:image-storage/172.18.0.6:8081] Http client inbound receiver cancelled, closing channel.
2025-04-17 19:55:04.998 | 2025-04-17T12:55:04.998Z DEBUG 1 --- [or-http-epoll-7] r.n.resources.PooledConnectionProvider   : [5e6d3345-1, L:/172.18.0.10:34050 ! R:image-storage/172.18.0.6:8081] Channel closed, now: 0 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:04.999 | 2025-04-17T12:55:04.998Z DEBUG 1 --- [or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [5e6d3345-1, L:/172.18.0.10:34050 ! R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x5e6d3345, L:/172.18.0.10:34050 ! R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:04.999 | 2025-04-17T12:55:04.999Z DEBUG 1 --- [    parallel-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: fallback-routes
2025-04-17 19:55:04.999 | 2025-04-17T12:55:04.999Z DEBUG 1 --- [    parallel-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST /fallback/image-storage] to Route{id='fallback-routes', uri=forward:/internal/fallback, order=0, predicate=Paths: [/fallback/**], match trailing slash: true, gatewayFilters=[[[SetResponseHeader X-Fallback = 'true'], order = 0]], metadata={}}
2025-04-17 19:55:04.999 | 2025-04-17T12:55:04.999Z DEBUG 1 --- [    parallel-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [ec2d2c63-6] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:04.999 | 2025-04-17T12:55:04.999Z DEBUG 1 --- [    parallel-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [[SetResponseHeader X-Fallback = 'true'], order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:04.999 | 2025-04-17T12:55:04.999Z  INFO 1 --- [    parallel-10] s.s.a.filter.GlobalFilters               : Incoming request: POST /fallback/image-storage from 172.18.0.1 [request_id: 6689d618-b9dc-4b88-8bf7-bc602a317b9f]
2025-04-17 19:55:05.000 | 2025-04-17T12:55:05.000Z DEBUG 1 --- [    parallel-10] o.s.w.r.handler.SimpleUrlHandlerMapping  : [ec2d2c63-6] Mapped to ResourceWebHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/]]
2025-04-17 19:55:05.000 | 2025-04-17T12:55:05.000Z DEBUG 1 --- [    parallel-10] o.s.w.r.resource.ResourceWebHandler      : [ec2d2c63-6] Resource not found
2025-04-17 19:55:05.154 | 2025-04-17T12:55:05.154Z DEBUG 1 --- [    parallel-10] .o.ObservationClosingWebExceptionHandler : An exception occurred and observation was not previously stopped, will stop it. The exception was [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND]
2025-04-17 19:55:05.161 | 2025-04-17T12:55:05.154Z ERROR 1 --- [    parallel-10] s.s.a.exception.GlobalExceptionHandler   : Gateway Exception: status=404 NOT_FOUND, path=/api/images, error=404 NOT_FOUND
2025-04-17 19:55:05.161 | 
2025-04-17 19:55:05.161 | org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND
2025-04-17 19:55:05.161 | 	at org.springframework.web.reactive.resource.ResourceWebHandler.lambda$handle$1(ResourceWebHandler.java:406) ~[spring-webflux-6.0.13.jar!/:6.0.13]
2025-04-17 19:55:05.161 | 	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
2025-04-17 19:55:05.161 | Error has been observed at the following site(s):
2025-04-17 19:55:05.161 | 	*__checkpoint  org.springframework.web.cors.reactive.CorsWebFilter [DefaultWebFilterChain]
2025-04-17 19:55:05.161 | 	*__checkpoint  org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter [DefaultWebFilterChain]
2025-04-17 19:55:05.161 | 	*__checkpoint  AuthorizationWebFilter [DefaultWebFilterChain]
2025-04-17 19:55:05.161 | 	*__checkpoint  ExceptionTranslationWebFilter [DefaultWebFilterChain]
2025-04-17 19:55:05.161 | 	*__checkpoint  LogoutWebFilter [DefaultWebFilterChain]
2025-04-17 19:55:05.161 | 	*__checkpoint  ServerRequestCacheWebFilter [DefaultWebFilterChain]
2025-04-17 19:55:05.161 | 	*__checkpoint  SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]
2025-04-17 19:55:05.161 | 	*__checkpoint  ReactorContextWebFilter [DefaultWebFilterChain]
2025-04-17 19:55:05.161 | 	*__checkpoint  CorsWebFilter [DefaultWebFilterChain]
2025-04-17 19:55:05.161 | 	*__checkpoint  HttpHeaderWriterWebFilter [DefaultWebFilterChain]
2025-04-17 19:55:05.161 | 	*__checkpoint  ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]
2025-04-17 19:55:05.161 | 	*__checkpoint  org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]
2025-04-17 19:55:05.161 | 	*__checkpoint  org.springframework.web.filter.reactive.ServerHttpObservationFilter [DefaultWebFilterChain]
2025-04-17 19:55:05.161 | 	*__checkpoint  HTTP POST "/api/images" [ExceptionHandlingWebHandler]
2025-04-17 19:55:05.161 | Original Stack Trace:
2025-04-17 19:55:05.161 | 		at org.springframework.web.reactive.resource.ResourceWebHandler.lambda$handle$1(ResourceWebHandler.java:406) ~[spring-webflux-6.0.13.jar!/:6.0.13]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:45) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onComplete(FluxConcatMapNoPrefetch.java:240) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:357) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:336) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2341) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2215) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2545) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2341) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2215) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.161 | 		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onNext(FluxConcatMapNoPrefetch.java:206) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerComplete(FluxConcatMapNoPrefetch.java:274) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onComplete(FluxConcatMap.java:887) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:85) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:209) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:238) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onComplete(FluxConcatMapNoPrefetch.java:240) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.onComplete(FluxDematerialize.java:121) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.onNext(FluxDematerialize.java:91) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.onNext(FluxDematerialize.java:44) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.request(FluxDematerialize.java:127) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerComplete(FluxConcatMapNoPrefetch.java:274) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onComplete(FluxConcatMap.java:887) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2205) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onComplete(MonoPeekTerminal.java:299) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.onNext(MonoFilterWhen.java:141) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2545) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.request(MonoFilterWhen.java:182) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2305) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2305) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2305) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2305) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2341) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2215) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:158) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.onNext(MonoFilterWhen.java:136) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2545) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.request(MonoFilterWhen.java:182) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2341) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onSubscribe(FluxOnErrorResume.java:74) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onSubscribe(MonoPeekTerminal.java:152) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.onSubscribe(MonoFilterWhen.java:100) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onNext(FluxConcatMapNoPrefetch.java:206) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.onNext(FluxDematerialize.java:98) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.onNext(FluxDematerialize.java:44) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.request(FluxDematerialize.java:127) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerComplete(FluxConcatMapNoPrefetch.java:274) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onComplete(FluxConcatMap.java:887) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2205) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onComplete(MonoPeekTerminal.java:299) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.onNext(MonoFilterWhen.java:141) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2545) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.request(MonoFilterWhen.java:182) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2305) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2305) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2305) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2305) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2341) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2215) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.Mono.subscribe(Mono.java:4495) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:103) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onError(MonoPeekTerminal.java:258) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.SerializedSubscriber.onError(SerializedSubscriber.java:124) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.handleTimeout(FluxTimeout.java:295) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.doTimeout(FluxTimeout.java:280) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxTimeout$TimeoutTimeoutSubscriber.onNext(FluxTimeout.java:419) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoDelay$MonoDelayRunnable.propagateDelay(MonoDelay.java:271) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.publisher.MonoDelay$MonoDelayRunnable.run(MonoDelay.java:286) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.5.11.jar!/:3.5.11]
2025-04-17 19:55:05.162 | 		at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
2025-04-17 19:55:05.162 | 		at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]
2025-04-17 19:55:05.162 | 		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]
2025-04-17 19:55:05.162 | 		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]
2025-04-17 19:55:05.162 | 		at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]
2025-04-17 19:55:05.162 | 
2025-04-17 19:55:05.162 | 2025-04-17T12:55:05.158Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63-4, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Decreasing pending responses, now 0
2025-04-17 19:55:05.162 | 2025-04-17T12:55:05.158Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ec2d2c63-6] Completed 404 NOT_FOUND
2025-04-17 19:55:05.162 | 2025-04-17T12:55:05.158Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63-4, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Last HTTP response frame
2025-04-17 19:55:05.162 | 2025-04-17T12:55:05.158Z DEBUG 1 --- [or-http-epoll-3] r.netty.channel.ChannelOperations        : [ec2d2c63-4, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:05.162 | 2025-04-17T12:55:05.158Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63-4, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:06.940 | 2025-04-17T12:55:06.940Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] New http connection, requesting read
2025-04-17 19:55:06.940 | 2025-04-17T12:55:06.940Z DEBUG 1 --- [or-http-epoll-8] r.netty.transport.TransportConfig        : [ee29768f, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:07.032 | 2025-04-17T12:55:07.032Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Increasing pending responses, now 1
2025-04-17 19:55:07.032 | 2025-04-17T12:55:07.032Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.http.server.HttpServer     : [ee29768f-1, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:07.032 | 2025-04-17T12:55:07.032Z DEBUG 1 --- [or-http-epoll-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ee29768f-7] HTTP GET "/api/images"
2025-04-17 19:55:07.037 | 2025-04-17T12:55:07.036Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.ReactorNetty               : [ee29768f-1, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:07.039 | 2025-04-17T12:55:07.039Z DEBUG 1 --- [    parallel-11] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:07.039 | 2025-04-17T12:55:07.039Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:07.039 | 2025-04-17T12:55:07.039Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:07.039 | 2025-04-17T12:55:07.039Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.040 | 2025-04-17T12:55:07.039Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:07.040 | 2025-04-17T12:55:07.040Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:07.040 | 2025-04-17T12:55:07.040Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:07.040 | 2025-04-17T12:55:07.040Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:07.040 | 2025-04-17T12:55:07.040Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:07.040 | 2025-04-17T12:55:07.040Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:07.040 | 2025-04-17T12:55:07.040Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:07.040 | 2025-04-17T12:55:07.040Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:07.040 | 2025-04-17T12:55:07.040Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.040 | 2025-04-17T12:55:07.040Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:07.040 | 2025-04-17T12:55:07.040Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:07.040 | 2025-04-17T12:55:07.040Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:07.040 | 2025-04-17T12:55:07.040Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:07.040 | 2025-04-17T12:55:07.040Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.040 | 2025-04-17T12:55:07.040Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:07.041 | 2025-04-17T12:55:07.040Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:07.041 | 2025-04-17T12:55:07.041Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.041 | 2025-04-17T12:55:07.041Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:07.041 | 2025-04-17T12:55:07.041Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:07.041 | 2025-04-17T12:55:07.041Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:07.041 | 2025-04-17T12:55:07.041Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:07.041 | 2025-04-17T12:55:07.041Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:07.041 | 2025-04-17T12:55:07.041Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:07.041 | 2025-04-17T12:55:07.041Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.041 | 2025-04-17T12:55:07.041Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:07.041 | 2025-04-17T12:55:07.041Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:07.041 | 2025-04-17T12:55:07.041Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:07.041 | 2025-04-17T12:55:07.041Z DEBUG 1 --- [    parallel-11] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:07.042 | 2025-04-17T12:55:07.041Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:07.043 | 2025-04-17T12:55:07.043Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:07.043 | 2025-04-17T12:55:07.043Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:07.043 | 2025-04-17T12:55:07.043Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [ee29768f-7] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:07.044 | 2025-04-17T12:55:07.043Z DEBUG 1 --- [    parallel-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:07.044 | 2025-04-17T12:55:07.044Z  INFO 1 --- [    parallel-11] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images from 172.18.0.1 [request_id: 9847126a-ef09-4c9e-9df5-8216063a1fab]
2025-04-17 19:55:07.044 | 2025-04-17T12:55:07.044Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.channel.FluxReceive        : [ee29768f-1, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:07.046 | 2025-04-17T12:55:07.046Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=99, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:07.047 | 2025-04-17T12:55:07.046Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"9847126a-ef09-4c9e-9df5-8216063a1fab", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43082"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:07.047 | 2025-04-17T12:55:07.047Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=7.9883E-5, duration(nanos)=79883.0, startTimeNanos=66504352089881}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3868f372'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.005130125, duration(nanos)=5130125.0, startTimeNanos=66504347109052}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@738fd20f'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66504338404783}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1c1f3375'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.01426215, duration(nanos)=1.426215E7, startTimeNanos=66504338088931}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1965b465'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"9847126a-ef09-4c9e-9df5-8216063a1fab", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43082"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:07.049 | 2025-04-17T12:55:07.048Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac] Created a new pooled channel, now: 0 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:07.049 | 2025-04-17T12:55:07.049Z DEBUG 1 --- [or-http-epoll-9] r.netty.transport.TransportConfig        : [048130ac] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpClientCodec), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:07.050 | 2025-04-17T12:55:07.050Z DEBUG 1 --- [or-http-epoll-9] r.netty.transport.TransportConnector     : [048130ac] Connecting to [image-storage/172.18.0.6:8081].
2025-04-17 19:55:07.051 | 2025-04-17T12:55:07.051Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Registering pool release on close event for channel
2025-04-17 19:55:07.051 | 2025-04-17T12:55:07.051Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel connected, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:07.051 | 2025-04-17T12:55:07.051Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}, [connected])
2025-04-17 19:55:07.051 | 2025-04-17T12:55:07.051Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-1, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=null, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [configured])
2025-04-17 19:55:07.051 | 2025-04-17T12:55:07.051Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-1, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=GET}
2025-04-17 19:55:07.051 | 2025-04-17T12:55:07.051Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-1, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:07.313 | 2025-04-17T12:55:07.312Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-1, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:07.328 | 2025-04-17T12:55:07.328Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-1, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:07.328 | HTTP/1.1 200 
2025-04-17 19:55:07.328 | Content-Type: <filtered>
2025-04-17 19:55:07.328 | Transfer-Encoding: <filtered>
2025-04-17 19:55:07.328 | Date: <filtered>
2025-04-17 19:55:07.330 | 2025-04-17T12:55:07.328Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-1, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:07.330 | 2025-04-17T12:55:07.328Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:07.330 | 2025-04-17T12:55:07.329Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.28183495, duration(nanos)=2.8183495E8, startTimeNanos=66504352089881}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3868f372'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.286872711, duration(nanos)=2.86872711E8, startTimeNanos=66504347109052}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@738fd20f'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66504338404783}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1c1f3375'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.296075349, duration(nanos)=2.96075349E8, startTimeNanos=66504338088931}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1965b465'], parentObservation=null}}}}
2025-04-17 19:55:07.330 | 2025-04-17T12:55:07.329Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-1, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:07.330 | 2025-04-17T12:55:07.330Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-1, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:07.330 | 2025-04-17T12:55:07.330Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:07.330 | 2025-04-17T12:55:07.330Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:07.331 | 2025-04-17T12:55:07.330Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:07.331 | 2025-04-17T12:55:07.330Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:07.331 | 2025-04-17T12:55:07.331Z  INFO 1 --- [or-http-epoll-8] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images - 200 in 287 ms [request_id: 9847126a-ef09-4c9e-9df5-8216063a1fab]
2025-04-17 19:55:07.332 | 2025-04-17T12:55:07.331Z DEBUG 1 --- [or-http-epoll-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ee29768f-7] Completed 200 OK
2025-04-17 19:55:07.332 | 2025-04-17T12:55:07.332Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f-1, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Last HTTP response frame
2025-04-17 19:55:07.332 | 2025-04-17T12:55:07.332Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f-1, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Decreasing pending responses, now 0
2025-04-17 19:55:07.332 | 2025-04-17T12:55:07.332Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f-1, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:07.332 | 2025-04-17T12:55:07.332Z DEBUG 1 --- [or-http-epoll-8] r.netty.channel.ChannelOperations        : [ee29768f-1, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:07.335 | 2025-04-17T12:55:07.335Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Increasing pending responses, now 1
2025-04-17 19:55:07.335 | 2025-04-17T12:55:07.335Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.http.server.HttpServer     : [ee29768f-2, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:07.335 | 2025-04-17T12:55:07.335Z DEBUG 1 --- [or-http-epoll-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ee29768f-8] HTTP GET "/api/images/statistics"
2025-04-17 19:55:07.336 | 2025-04-17T12:55:07.336Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.ReactorNetty               : [ee29768f-2, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.336Z DEBUG 1 --- [     parallel-1] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.337Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.337Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'POST /logout'
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.337Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.337Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.337Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.337Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.337Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.337Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.337Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.337Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.337Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /webjars/**'
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.337Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.337Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:07.338 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /actuator/info'
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /fallback/**'
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /api/auth/login'
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /api/auth/register'
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/statistics'; against '/api/**'
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.338Z DEBUG 1 --- [     parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/statistics' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.339Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:07.339 | 2025-04-17T12:55:07.339Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:07.340 | 2025-04-17T12:55:07.340Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/statistics] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:07.340 | 2025-04-17T12:55:07.340Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [ee29768f-8] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:07.340 | 2025-04-17T12:55:07.340Z DEBUG 1 --- [     parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:07.340 | 2025-04-17T12:55:07.340Z  INFO 1 --- [     parallel-1] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/statistics from 172.18.0.1 [request_id: a16b4c69-a682-4b6b-b455-dde28be03f00]
2025-04-17 19:55:07.340 | 2025-04-17T12:55:07.340Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.channel.FluxReceive        : [ee29768f-2, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:07.342 | 2025-04-17T12:55:07.342Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=98, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:07.343 | 2025-04-17T12:55:07.343Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"a16b4c69-a682-4b6b-b455-dde28be03f00", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43082"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:07.344 | 2025-04-17T12:55:07.344Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/statistics'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=7.6993E-5, duration(nanos)=76993.0, startTimeNanos=66504648745038}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6b7b9e20'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.004670462, duration(nanos)=4670462.0, startTimeNanos=66504644216561}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@e1a8ca1'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66504641122550}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3a68c79b'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/statistics'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.008134388, duration(nanos)=8134388.0, startTimeNanos=66504640847899}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@15946479'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"a16b4c69-a682-4b6b-b455-dde28be03f00", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43082"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:07.344 | 2025-04-17T12:55:07.344Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:07.344 | 2025-04-17T12:55:07.344Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-2, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/statistics, method=GET}
2025-04-17 19:55:07.344 | 2025-04-17T12:55:07.344Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-2, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/statistics, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:07.345 | 2025-04-17T12:55:07.345Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-2, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/statistics, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:07.350 | 2025-04-17T12:55:07.350Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-2, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:07.350 | HTTP/1.1 404 
2025-04-17 19:55:07.350 | Content-Length: <filtered>
2025-04-17 19:55:07.350 | Date: <filtered>
2025-04-17 19:55:07.350 | 2025-04-17T12:55:07.350Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-2, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/statistics, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:07.350 | 2025-04-17T12:55:07.350Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:07.350 | 2025-04-17T12:55:07.350Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/statistics'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.006699509, duration(nanos)=6699509.0, startTimeNanos=66504648745038}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6b7b9e20'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.011272238, duration(nanos)=1.1272238E7, startTimeNanos=66504644216561}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@e1a8ca1'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66504641122550}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3a68c79b'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/statistics'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.014735574, duration(nanos)=1.4735574E7, startTimeNanos=66504640847899}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@15946479'], parentObservation=null}}}}
2025-04-17 19:55:07.354 | 2025-04-17T12:55:07.351Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-2, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:07.354 | 2025-04-17T12:55:07.351Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-2, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:07.354 | 2025-04-17T12:55:07.351Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/statistics, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:07.354 | 2025-04-17T12:55:07.351Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/statistics, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:07.354 | 2025-04-17T12:55:07.351Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:07.354 | 2025-04-17T12:55:07.351Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:07.354 | 2025-04-17T12:55:07.351Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f-2, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Decreasing pending responses, now 0
2025-04-17 19:55:07.354 | 2025-04-17T12:55:07.352Z  INFO 1 --- [or-http-epoll-8] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/statistics - 404 in 12 ms [request_id: a16b4c69-a682-4b6b-b455-dde28be03f00]
2025-04-17 19:55:07.354 | 2025-04-17T12:55:07.352Z DEBUG 1 --- [or-http-epoll-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ee29768f-8] Completed 404 NOT_FOUND
2025-04-17 19:55:07.354 | 2025-04-17T12:55:07.352Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f-2, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Last HTTP response frame
2025-04-17 19:55:07.354 | 2025-04-17T12:55:07.352Z DEBUG 1 --- [or-http-epoll-8] r.netty.channel.ChannelOperations        : [ee29768f-2, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:07.354 | 2025-04-17T12:55:07.352Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f-2, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:07.381 | 2025-04-17T12:55:07.381Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Increasing pending responses, now 1
2025-04-17 19:55:07.381 | 2025-04-17T12:55:07.381Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.http.server.HttpServer     : [ee29768f-3, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:07.381 | 2025-04-17T12:55:07.381Z DEBUG 1 --- [or-http-epoll-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ee29768f-9] HTTP GET "/api/images/4e23a893-9a2d-4673-970c-d38e56355413"
2025-04-17 19:55:07.382 | 2025-04-17T12:55:07.382Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.ReactorNetty               : [ee29768f-3, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:07.382 | 2025-04-17T12:55:07.382Z DEBUG 1 --- [     parallel-3] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:07.382 | 2025-04-17T12:55:07.382Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:07.382 | 2025-04-17T12:55:07.382Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'POST /logout'
2025-04-17 19:55:07.382 | 2025-04-17T12:55:07.382Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.383 | 2025-04-17T12:55:07.382Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /webjars/**'
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /actuator/info'
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /fallback/**'
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.383Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /api/auth/login'
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.384Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.384Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /api/auth/register'
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.384Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.384Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.384Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.384Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.384Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/4e23a893-9a2d-4673-970c-d38e56355413'; against '/api/**'
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.384Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.384Z DEBUG 1 --- [     parallel-3] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/4e23a893-9a2d-4673-970c-d38e56355413' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.384Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:07.386 | 2025-04-17T12:55:07.385Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:07.387 | 2025-04-17T12:55:07.386Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/4e23a893-9a2d-4673-970c-d38e56355413] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:07.387 | 2025-04-17T12:55:07.386Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [ee29768f-9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:07.387 | 2025-04-17T12:55:07.386Z DEBUG 1 --- [     parallel-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:07.387 | 2025-04-17T12:55:07.386Z  INFO 1 --- [     parallel-3] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413 from 172.18.0.1 [request_id: 26fd4909-d292-4605-8b37-7a65fb9a9e71]
2025-04-17 19:55:07.387 | 2025-04-17T12:55:07.386Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.channel.FluxReceive        : [ee29768f-3, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:07.389 | 2025-04-17T12:55:07.388Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] New http connection, requesting read
2025-04-17 19:55:07.389 | 2025-04-17T12:55:07.388Z DEBUG 1 --- [r-http-epoll-10] r.netty.transport.TransportConfig        : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:07.389 | 2025-04-17T12:55:07.389Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=97, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:07.394 | 2025-04-17T12:55:07.394Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"26fd4909-d292-4605-8b37-7a65fb9a9e71", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43082"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:07.394 | 2025-04-17T12:55:07.394Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/4e23a893-9a2d-4673-970c-d38e56355413'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=9.6164E-5, duration(nanos)=96164.0, startTimeNanos=66504699228053}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@22a96275'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.009741021, duration(nanos)=9741021.0, startTimeNanos=66504689666619}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@788c9d05'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66504686968855}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4a4d990'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/4e23a893-9a2d-4673-970c-d38e56355413'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.012795659, duration(nanos)=1.2795659E7, startTimeNanos=66504686721055}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3225c2d1'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"26fd4909-d292-4605-8b37-7a65fb9a9e71", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43082"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:07.395 | 2025-04-17T12:55:07.395Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:07.395 | 2025-04-17T12:55:07.395Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-3, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/4e23a893-9a2d-4673-970c-d38e56355413, method=GET}
2025-04-17 19:55:07.419 | 2025-04-17T12:55:07.419Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-3, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/4e23a893-9a2d-4673-970c-d38e56355413, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:07.420 | 2025-04-17T12:55:07.419Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-3, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/4e23a893-9a2d-4673-970c-d38e56355413, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:07.476 | 2025-04-17T12:55:07.476Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-3, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:07.476 | HTTP/1.1 200 
2025-04-17 19:55:07.476 | Content-Type: <filtered>
2025-04-17 19:55:07.476 | Content-Length: <filtered>
2025-04-17 19:55:07.476 | Date: <filtered>
2025-04-17 19:55:07.476 | 2025-04-17T12:55:07.476Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-3, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/4e23a893-9a2d-4673-970c-d38e56355413, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:07.476 | 2025-04-17T12:55:07.476Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:07.477 | 2025-04-17T12:55:07.477Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/4e23a893-9a2d-4673-970c-d38e56355413'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.082673828, duration(nanos)=8.2673828E7, startTimeNanos=66504699228053}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@22a96275'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.092309855, duration(nanos)=9.2309855E7, startTimeNanos=66504689666619}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@788c9d05'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66504686968855}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4a4d990'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/4e23a893-9a2d-4673-970c-d38e56355413'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.095443596, duration(nanos)=9.5443596E7, startTimeNanos=66504686721055}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3225c2d1'], parentObservation=null}}}}
2025-04-17 19:55:07.478 | 2025-04-17T12:55:07.477Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-3, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:07.492 | 2025-04-17T12:55:07.492Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:07.493 | 2025-04-17T12:55:07.492Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-1, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:07.493 | 2025-04-17T12:55:07.493Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-10] HTTP GET "/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b"
2025-04-17 19:55:07.499 | 2025-04-17T12:55:07.498Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-1, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:07.499 | 2025-04-17T12:55:07.498Z DEBUG 1 --- [     parallel-5] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:07.499 | 2025-04-17T12:55:07.499Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:07.499 | 2025-04-17T12:55:07.499Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'POST /logout'
2025-04-17 19:55:07.499 | 2025-04-17T12:55:07.499Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.499 | 2025-04-17T12:55:07.499Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:07.499 | 2025-04-17T12:55:07.499Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:07.499 | 2025-04-17T12:55:07.499Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:07.499 | 2025-04-17T12:55:07.499Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:07.499 | 2025-04-17T12:55:07.499Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:07.499 | 2025-04-17T12:55:07.499Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:07.499 | 2025-04-17T12:55:07.499Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:07.499 | 2025-04-17T12:55:07.499Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /webjars/**'
2025-04-17 19:55:07.499 | 2025-04-17T12:55:07.499Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.500 | 2025-04-17T12:55:07.500Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:07.500 | 2025-04-17T12:55:07.500Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:07.500 | 2025-04-17T12:55:07.500Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:07.500 | 2025-04-17T12:55:07.500Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /actuator/info'
2025-04-17 19:55:07.500 | 2025-04-17T12:55:07.500Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.500 | 2025-04-17T12:55:07.500Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:07.500 | 2025-04-17T12:55:07.500Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /fallback/**'
2025-04-17 19:55:07.500 | 2025-04-17T12:55:07.500Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.500 | 2025-04-17T12:55:07.500Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:07.500 | 2025-04-17T12:55:07.500Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /api/auth/login'
2025-04-17 19:55:07.500 | 2025-04-17T12:55:07.500Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:07.501 | 2025-04-17T12:55:07.500Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /api/auth/register'
2025-04-17 19:55:07.501 | 2025-04-17T12:55:07.500Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:07.501 | 2025-04-17T12:55:07.500Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:07.501 | 2025-04-17T12:55:07.501Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:07.501 | 2025-04-17T12:55:07.501Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:07.501 | 2025-04-17T12:55:07.501Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b'; against '/api/**'
2025-04-17 19:55:07.501 | 2025-04-17T12:55:07.501Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:07.501 | 2025-04-17T12:55:07.501Z DEBUG 1 --- [     parallel-5] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:07.501 | 2025-04-17T12:55:07.501Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:07.502 | 2025-04-17T12:55:07.502Z DEBUG 1 --- [     parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:07.503 | 2025-04-17T12:55:07.502Z DEBUG 1 --- [     parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:07.503 | 2025-04-17T12:55:07.502Z DEBUG 1 --- [     parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-10] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:07.503 | 2025-04-17T12:55:07.503Z DEBUG 1 --- [     parallel-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:07.503 | 2025-04-17T12:55:07.503Z  INFO 1 --- [     parallel-5] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b from 172.18.0.1 [request_id: f44eccbe-b805-432b-a21e-4d100419f8dd]
2025-04-17 19:55:07.503 | 2025-04-17T12:55:07.503Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-1, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:07.506 | 2025-04-17T12:55:07.506Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-3, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:07.507 | 2025-04-17T12:55:07.507Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/4e23a893-9a2d-4673-970c-d38e56355413, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:07.507 | 2025-04-17T12:55:07.507Z  INFO 1 --- [or-http-epoll-8] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413 - 200 in 121 ms [request_id: 26fd4909-d292-4605-8b37-7a65fb9a9e71]
2025-04-17 19:55:07.507 | 2025-04-17T12:55:07.507Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/4e23a893-9a2d-4673-970c-d38e56355413, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:07.507 | 2025-04-17T12:55:07.507Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:07.507 | 2025-04-17T12:55:07.507Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:07.508 | 2025-04-17T12:55:07.508Z DEBUG 1 --- [or-http-epoll-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ee29768f-9] Completed 200 OK
2025-04-17 19:55:07.508 | 2025-04-17T12:55:07.508Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f-3, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Last HTTP response frame
2025-04-17 19:55:07.508 | 2025-04-17T12:55:07.508Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=96, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:07.508 | 2025-04-17T12:55:07.508Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f-3, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Decreasing pending responses, now 0
2025-04-17 19:55:07.508 | 2025-04-17T12:55:07.508Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f-3, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:07.508 | 2025-04-17T12:55:07.508Z DEBUG 1 --- [or-http-epoll-8] r.netty.channel.ChannelOperations        : [ee29768f-3, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:07.509 | 2025-04-17T12:55:07.509Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"f44eccbe-b805-432b-a21e-4d100419f8dd", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:07.516 | 2025-04-17T12:55:07.515Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.04424E-4, duration(nanos)=104424.0, startTimeNanos=66504814348626}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5bf6b42a'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.007840781, duration(nanos)=7840781.0, startTimeNanos=66504806686322}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@478e6ee4'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66504800794200}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@65c457dc'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.015796944, duration(nanos)=1.5796944E7, startTimeNanos=66504798836503}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@79eb22ff'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"f44eccbe-b805-432b-a21e-4d100419f8dd", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:07.516 | 2025-04-17T12:55:07.516Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:07.516 | 2025-04-17T12:55:07.516Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-4, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b, method=GET}
2025-04-17 19:55:07.516 | 2025-04-17T12:55:07.516Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-4, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:07.517 | 2025-04-17T12:55:07.517Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-4, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:07.594 | 2025-04-17T12:55:07.594Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-4, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:07.594 | HTTP/1.1 200 
2025-04-17 19:55:07.594 | Content-Type: <filtered>
2025-04-17 19:55:07.594 | Content-Length: <filtered>
2025-04-17 19:55:07.594 | Date: <filtered>
2025-04-17 19:55:07.594 | 2025-04-17T12:55:07.594Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-4, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:07.594 | 2025-04-17T12:55:07.594Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:07.595 | 2025-04-17T12:55:07.595Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.085493345, duration(nanos)=8.5493345E7, startTimeNanos=66504814348626}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5bf6b42a'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.09319924, duration(nanos)=9.319924E7, startTimeNanos=66504806686322}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@478e6ee4'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66504800794200}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@65c457dc'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.101225596, duration(nanos)=1.01225596E8, startTimeNanos=66504798836503}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@79eb22ff'], parentObservation=null}}}}
2025-04-17 19:55:07.595 | 2025-04-17T12:55:07.595Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-4, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:07.612 | 2025-04-17T12:55:07.611Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-4, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:07.612 | 2025-04-17T12:55:07.612Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:07.612 | 2025-04-17T12:55:07.612Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b - 200 in 109 ms [request_id: f44eccbe-b805-432b-a21e-4d100419f8dd]
2025-04-17 19:55:07.612 | 2025-04-17T12:55:07.612Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:07.612 | 2025-04-17T12:55:07.612Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:07.616 | 2025-04-17T12:55:07.612Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:07.616 | 2025-04-17T12:55:07.612Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-10] Completed 200 OK
2025-04-17 19:55:07.616 | 2025-04-17T12:55:07.612Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-1, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:07.616 | 2025-04-17T12:55:07.612Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-1, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:07.616 | 2025-04-17T12:55:07.612Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-1, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:07.616 | 2025-04-17T12:55:07.613Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-1, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:13.541 | 2025-04-17T12:55:13.540Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:13.541 | 2025-04-17T12:55:13.541Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-2, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:13.542 | 2025-04-17T12:55:13.542Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-11] HTTP POST "/api/images"
2025-04-17 19:55:13.543 | 2025-04-17T12:55:13.543Z DEBUG 1 --- [     parallel-7] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:13.544 | 2025-04-17T12:55:13.544Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:13.544 | 2025-04-17T12:55:13.544Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:13.544 | 2025-04-17T12:55:13.544Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:13.544 | 2025-04-17T12:55:13.544Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:13.544 | 2025-04-17T12:55:13.544Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:13.544 | 2025-04-17T12:55:13.544Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:13.544 | 2025-04-17T12:55:13.544Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:13.544 | 2025-04-17T12:55:13.544Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:13.544 | 2025-04-17T12:55:13.544Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:13.544 | 2025-04-17T12:55:13.544Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:13.545 | 2025-04-17T12:55:13.544Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:13.545 | 2025-04-17T12:55:13.545Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:13.545 | 2025-04-17T12:55:13.545Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:13.545 | 2025-04-17T12:55:13.545Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:13.545 | 2025-04-17T12:55:13.545Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:13.545 | 2025-04-17T12:55:13.545Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:13.545 | 2025-04-17T12:55:13.545Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:13.545 | 2025-04-17T12:55:13.545Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:13.545 | 2025-04-17T12:55:13.545Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:13.545 | 2025-04-17T12:55:13.545Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:13.545 | 2025-04-17T12:55:13.545Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:13.545 | 2025-04-17T12:55:13.545Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:13.545 | 2025-04-17T12:55:13.545Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:13.545 | 2025-04-17T12:55:13.545Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:13.545 | 2025-04-17T12:55:13.545Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:13.545 | 2025-04-17T12:55:13.545Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:13.546 | 2025-04-17T12:55:13.545Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:13.546 | 2025-04-17T12:55:13.546Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:13.546 | 2025-04-17T12:55:13.546Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:13.546 | 2025-04-17T12:55:13.546Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:13.546 | 2025-04-17T12:55:13.546Z DEBUG 1 --- [     parallel-7] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:13.546 | 2025-04-17T12:55:13.546Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:13.547 | 2025-04-17T12:55:13.547Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:13.547 | 2025-04-17T12:55:13.547Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:13.547 | 2025-04-17T12:55:13.547Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-11] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:13.547 | 2025-04-17T12:55:13.547Z DEBUG 1 --- [     parallel-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:13.548 | 2025-04-17T12:55:13.547Z  INFO 1 --- [     parallel-7] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: 847d29a9-4ec6-4732-b4a2-3ea75f183dd9]
2025-04-17 19:55:13.548 | 2025-04-17T12:55:13.548Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-2, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:13.550 | 2025-04-17T12:55:13.550Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-2, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:13.552 | 2025-04-17T12:55:13.552Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=99, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:13.553 | 2025-04-17T12:55:13.552Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"1949093", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundarySqffEcIDcCgvVY40", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"847d29a9-4ec6-4732-b4a2-3ea75f183dd9", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:13.553 | 2025-04-17T12:55:13.553Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=7.1983E-5, duration(nanos)=71983.0, startTimeNanos=66510858126153}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@17529e0c'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.006626952, duration(nanos)=6626952.0, startTimeNanos=66510851626216}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@239f3b4c'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66510847821535}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@64a2e254'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.01087513, duration(nanos)=1.087513E7, startTimeNanos=66510847456901}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@447ed8e5'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"1949093", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundarySqffEcIDcCgvVY40", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"847d29a9-4ec6-4732-b4a2-3ea75f183dd9", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:13.554 | 2025-04-17T12:55:13.553Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:13.554 | 2025-04-17T12:55:13.554Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-5, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 19:55:13.554 | 2025-04-17T12:55:13.554Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-5, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:13.557 | 2025-04-17T12:55:13.557Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-5, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:13.652 | 2025-04-17T12:55:13.651Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-5, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:13.652 | HTTP/1.1 201 
2025-04-17 19:55:13.652 | Content-Type: <filtered>
2025-04-17 19:55:13.652 | Transfer-Encoding: <filtered>
2025-04-17 19:55:13.652 | Date: <filtered>
2025-04-17 19:55:13.652 | 2025-04-17T12:55:13.652Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-5, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:13.652 | 2025-04-17T12:55:13.652Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:13.653 | 2025-04-17T12:55:13.652Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.099564376, duration(nanos)=9.9564376E7, startTimeNanos=66510858126153}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@17529e0c'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.106115595, duration(nanos)=1.06115595E8, startTimeNanos=66510851626216}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@239f3b4c'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66510847821535}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@64a2e254'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.110461207, duration(nanos)=1.10461207E8, startTimeNanos=66510847456901}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@447ed8e5'], parentObservation=null}}}}
2025-04-17 19:55:13.653 | 2025-04-17T12:55:13.653Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-5, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:13.654 | 2025-04-17T12:55:13.654Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-5, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:13.655 | 2025-04-17T12:55:13.654Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:13.655 | 2025-04-17T12:55:13.654Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:13.655 | 2025-04-17T12:55:13.654Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:13.655 | 2025-04-17T12:55:13.655Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:13.655 | 2025-04-17T12:55:13.655Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: POST /api/images - 201 in 108 ms [request_id: 847d29a9-4ec6-4732-b4a2-3ea75f183dd9]
2025-04-17 19:55:13.656 | 2025-04-17T12:55:13.655Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-11] Completed 201 CREATED
2025-04-17 19:55:13.656 | 2025-04-17T12:55:13.655Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-2, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:13.656 | 2025-04-17T12:55:13.656Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-2, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:13.656 | 2025-04-17T12:55:13.656Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-2, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:13.656 | 2025-04-17T12:55:13.656Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-2, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:13.659 | 2025-04-17T12:55:13.659Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:13.660 | 2025-04-17T12:55:13.659Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-3, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:13.660 | 2025-04-17T12:55:13.660Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-12] HTTP POST "/api/images"
2025-04-17 19:55:13.661 | 2025-04-17T12:55:13.661Z DEBUG 1 --- [     parallel-9] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:13.661 | 2025-04-17T12:55:13.661Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:13.661 | 2025-04-17T12:55:13.661Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:13.661 | 2025-04-17T12:55:13.661Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:13.662 | 2025-04-17T12:55:13.661Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:13.662 | 2025-04-17T12:55:13.662Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:13.662 | 2025-04-17T12:55:13.662Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:13.662 | 2025-04-17T12:55:13.662Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:13.662 | 2025-04-17T12:55:13.662Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:13.662 | 2025-04-17T12:55:13.662Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:13.662 | 2025-04-17T12:55:13.662Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:13.662 | 2025-04-17T12:55:13.662Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:13.662 | 2025-04-17T12:55:13.662Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.662Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.662Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:13.663 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:13.664 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:13.664 | 2025-04-17T12:55:13.663Z DEBUG 1 --- [     parallel-9] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:13.664 | 2025-04-17T12:55:13.664Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:13.664 | 2025-04-17T12:55:13.664Z DEBUG 1 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:13.665 | 2025-04-17T12:55:13.664Z DEBUG 1 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:13.665 | 2025-04-17T12:55:13.664Z DEBUG 1 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-12] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:13.665 | 2025-04-17T12:55:13.665Z DEBUG 1 --- [     parallel-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:13.665 | 2025-04-17T12:55:13.665Z  INFO 1 --- [     parallel-9] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: ee58f842-b991-4a11-9be5-b35f85f48608]
2025-04-17 19:55:13.665 | 2025-04-17T12:55:13.665Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-3, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:13.715 | 2025-04-17T12:55:13.715Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-3, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:13.717 | 2025-04-17T12:55:13.717Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=98, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:13.718 | 2025-04-17T12:55:13.718Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"1868552", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryAxjKppg6kSuE4sA4", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"ee58f842-b991-4a11-9be5-b35f85f48608", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:13.718 | 2025-04-17T12:55:13.718Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=8.3683E-5, duration(nanos)=83683.0, startTimeNanos=66511023273593}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@47df9c98'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.054260926, duration(nanos)=5.4260926E7, startTimeNanos=66510969233816}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1dc09a74'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66510965657194}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6e837bda'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.058113678, duration(nanos)=5.8113678E7, startTimeNanos=66510965458407}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5c083f1f'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"1868552", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryAxjKppg6kSuE4sA4", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"ee58f842-b991-4a11-9be5-b35f85f48608", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:13.719 | 2025-04-17T12:55:13.719Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:13.719 | 2025-04-17T12:55:13.719Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-6, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 19:55:13.719 | 2025-04-17T12:55:13.719Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-6, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:13.721 | 2025-04-17T12:55:13.721Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-6, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:13.902 | 2025-04-17T12:55:13.901Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-6, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:13.902 | HTTP/1.1 201 
2025-04-17 19:55:13.902 | Content-Type: <filtered>
2025-04-17 19:55:13.902 | Transfer-Encoding: <filtered>
2025-04-17 19:55:13.902 | Date: <filtered>
2025-04-17 19:55:13.902 | 2025-04-17T12:55:13.902Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-6, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:13.902 | 2025-04-17T12:55:13.902Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:13.902 | 2025-04-17T12:55:13.902Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.18423536, duration(nanos)=1.8423536E8, startTimeNanos=66511023273593}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@47df9c98'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.238336269, duration(nanos)=2.38336269E8, startTimeNanos=66510969233816}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1dc09a74'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66510965657194}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6e837bda'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.242231753, duration(nanos)=2.42231753E8, startTimeNanos=66510965458407}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5c083f1f'], parentObservation=null}}}}
2025-04-17 19:55:13.903 | 2025-04-17T12:55:13.903Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-6, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:13.904 | 2025-04-17T12:55:13.904Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-6, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:13.904 | 2025-04-17T12:55:13.904Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:13.904 | 2025-04-17T12:55:13.904Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:13.904 | 2025-04-17T12:55:13.904Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:13.904 | 2025-04-17T12:55:13.904Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:13.904 | 2025-04-17T12:55:13.904Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: POST /api/images - 201 in 239 ms [request_id: ee58f842-b991-4a11-9be5-b35f85f48608]
2025-04-17 19:55:13.904 | 2025-04-17T12:55:13.904Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-12] Completed 201 CREATED
2025-04-17 19:55:13.904 | 2025-04-17T12:55:13.904Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-3, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:13.905 | 2025-04-17T12:55:13.904Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-3, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:13.905 | 2025-04-17T12:55:13.905Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-3, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:13.905 | 2025-04-17T12:55:13.905Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-3, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:13.909 | 2025-04-17T12:55:13.909Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:13.909 | 2025-04-17T12:55:13.909Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-4, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:13.910 | 2025-04-17T12:55:13.909Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-13] HTTP POST "/api/images"
2025-04-17 19:55:13.911 | 2025-04-17T12:55:13.910Z DEBUG 1 --- [    parallel-11] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:13.911 | 2025-04-17T12:55:13.911Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:13.911 | 2025-04-17T12:55:13.911Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:13.911 | 2025-04-17T12:55:13.911Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:13.911 | 2025-04-17T12:55:13.911Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:13.911 | 2025-04-17T12:55:13.911Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:13.911 | 2025-04-17T12:55:13.911Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:13.911 | 2025-04-17T12:55:13.911Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:13.911 | 2025-04-17T12:55:13.911Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:13.911 | 2025-04-17T12:55:13.911Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:13.911 | 2025-04-17T12:55:13.911Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:13.911 | 2025-04-17T12:55:13.911Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.911Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.911Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.912Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.912Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.912Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.912Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.912Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.912Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.912Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.912Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.912Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.912Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.912Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.912Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.912Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.912Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:13.912 | 2025-04-17T12:55:13.912Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:13.913 | 2025-04-17T12:55:13.912Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:13.913 | 2025-04-17T12:55:13.913Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:13.913 | 2025-04-17T12:55:13.913Z DEBUG 1 --- [    parallel-11] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:13.913 | 2025-04-17T12:55:13.913Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:13.914 | 2025-04-17T12:55:13.913Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:13.914 | 2025-04-17T12:55:13.914Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:13.914 | 2025-04-17T12:55:13.914Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-13] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:13.914 | 2025-04-17T12:55:13.914Z DEBUG 1 --- [    parallel-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:13.914 | 2025-04-17T12:55:13.914Z  INFO 1 --- [    parallel-11] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: 19c693b7-8fef-4699-9e02-70778b62178a]
2025-04-17 19:55:13.914 | 2025-04-17T12:55:13.914Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-4, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:13.933 | 2025-04-17T12:55:13.933Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-4, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:13.934 | 2025-04-17T12:55:13.934Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=97, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:13.935 | 2025-04-17T12:55:13.935Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"1866634", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryc8ILpBlS6s1VBkdt", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"19c693b7-8fef-4699-9e02-70778b62178a", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:13.935 | 2025-04-17T12:55:13.935Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=6.9723E-5, duration(nanos)=69723.0, startTimeNanos=66511240497617}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6708535a'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.022182627, duration(nanos)=2.2182627E7, startTimeNanos=66511218440355}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7e8276f5'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66511215308771}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@baa9f54'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.025593462, duration(nanos)=2.5593462E7, startTimeNanos=66511215097823}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1647b9f9'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"1866634", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryc8ILpBlS6s1VBkdt", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"19c693b7-8fef-4699-9e02-70778b62178a", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:13.936 | 2025-04-17T12:55:13.936Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:13.936 | 2025-04-17T12:55:13.936Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-7, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 19:55:13.936 | 2025-04-17T12:55:13.936Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-7, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:13.937 | 2025-04-17T12:55:13.937Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-7, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:14.055 | 2025-04-17T12:55:14.055Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-7, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:14.055 | HTTP/1.1 201 
2025-04-17 19:55:14.055 | Content-Type: <filtered>
2025-04-17 19:55:14.055 | Transfer-Encoding: <filtered>
2025-04-17 19:55:14.055 | Date: <filtered>
2025-04-17 19:55:14.055 | 2025-04-17T12:55:14.055Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-7, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:14.055 | 2025-04-17T12:55:14.055Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:14.056 | 2025-04-17T12:55:14.055Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.120250845, duration(nanos)=1.20250845E8, startTimeNanos=66511240497617}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6708535a'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.14238425, duration(nanos)=1.4238425E8, startTimeNanos=66511218440355}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7e8276f5'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66511215308771}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@baa9f54'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.145824626, duration(nanos)=1.45824626E8, startTimeNanos=66511215097823}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1647b9f9'], parentObservation=null}}}}
2025-04-17 19:55:14.056 | 2025-04-17T12:55:14.056Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-7, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:14.057 | 2025-04-17T12:55:14.057Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-7, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:14.057 | 2025-04-17T12:55:14.057Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:14.057 | 2025-04-17T12:55:14.057Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:14.057 | 2025-04-17T12:55:14.057Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:14.057 | 2025-04-17T12:55:14.057Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:14.057 | 2025-04-17T12:55:14.057Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: POST /api/images - 201 in 143 ms [request_id: 19c693b7-8fef-4699-9e02-70778b62178a]
2025-04-17 19:55:14.058 | 2025-04-17T12:55:14.058Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-13] Completed 201 CREATED
2025-04-17 19:55:14.058 | 2025-04-17T12:55:14.058Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-4, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:14.058 | 2025-04-17T12:55:14.058Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-4, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:14.058 | 2025-04-17T12:55:14.058Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-4, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:14.058 | 2025-04-17T12:55:14.058Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-4, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:14.061 | 2025-04-17T12:55:14.061Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:14.062 | 2025-04-17T12:55:14.062Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-5, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:14.062 | 2025-04-17T12:55:14.062Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-14] HTTP POST "/api/images"
2025-04-17 19:55:14.063 | 2025-04-17T12:55:14.063Z DEBUG 1 --- [     parallel-1] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:14.064 | 2025-04-17T12:55:14.063Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:14.064 | 2025-04-17T12:55:14.064Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:14.064 | 2025-04-17T12:55:14.064Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.064 | 2025-04-17T12:55:14.064Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:14.064 | 2025-04-17T12:55:14.064Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:14.064 | 2025-04-17T12:55:14.064Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:14.064 | 2025-04-17T12:55:14.064Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:14.064 | 2025-04-17T12:55:14.064Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:14.064 | 2025-04-17T12:55:14.064Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:14.064 | 2025-04-17T12:55:14.064Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:14.064 | 2025-04-17T12:55:14.064Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:14.064 | 2025-04-17T12:55:14.064Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.065 | 2025-04-17T12:55:14.064Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:14.065 | 2025-04-17T12:55:14.065Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:14.065 | 2025-04-17T12:55:14.065Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:14.065 | 2025-04-17T12:55:14.065Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:14.065 | 2025-04-17T12:55:14.065Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.065 | 2025-04-17T12:55:14.065Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:14.065 | 2025-04-17T12:55:14.065Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:14.065 | 2025-04-17T12:55:14.065Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.065 | 2025-04-17T12:55:14.065Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:14.065 | 2025-04-17T12:55:14.065Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:14.065 | 2025-04-17T12:55:14.065Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:14.065 | 2025-04-17T12:55:14.065Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:14.066 | 2025-04-17T12:55:14.065Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:14.066 | 2025-04-17T12:55:14.065Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:14.066 | 2025-04-17T12:55:14.066Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.066 | 2025-04-17T12:55:14.066Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:14.066 | 2025-04-17T12:55:14.066Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:14.066 | 2025-04-17T12:55:14.066Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:14.066 | 2025-04-17T12:55:14.066Z DEBUG 1 --- [     parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:14.066 | 2025-04-17T12:55:14.066Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:14.067 | 2025-04-17T12:55:14.067Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:14.067 | 2025-04-17T12:55:14.067Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:14.067 | 2025-04-17T12:55:14.067Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-14] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:14.068 | 2025-04-17T12:55:14.068Z DEBUG 1 --- [     parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:14.068 | 2025-04-17T12:55:14.068Z  INFO 1 --- [     parallel-1] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: dc075bc8-d1af-4338-8723-943cc29b40a1]
2025-04-17 19:55:14.068 | 2025-04-17T12:55:14.068Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-5, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:14.115 | 2025-04-17T12:55:14.115Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-5, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:14.117 | 2025-04-17T12:55:14.117Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=99, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:14.117 | 2025-04-17T12:55:14.117Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"1830969", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryMQ5ZRaG9qGcKiVvO", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"dc075bc8-d1af-4338-8723-943cc29b40a1", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:14.118 | 2025-04-17T12:55:14.118Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=5.8302E-5, duration(nanos)=58302.0, startTimeNanos=66511422791971}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@33f0bae8'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.051086935, duration(nanos)=5.1086935E7, startTimeNanos=66511371817700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5e2847bd'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66511367870374}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1a72313'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.055366894, duration(nanos)=5.5366894E7, startTimeNanos=66511367637035}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2a84caaf'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"1830969", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryMQ5ZRaG9qGcKiVvO", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"dc075bc8-d1af-4338-8723-943cc29b40a1", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:14.118 | 2025-04-17T12:55:14.118Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:14.118 | 2025-04-17T12:55:14.118Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-8, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 19:55:14.118 | 2025-04-17T12:55:14.118Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-8, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:14.119 | 2025-04-17T12:55:14.119Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-8, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:14.214 | 2025-04-17T12:55:14.213Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-8, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:14.214 | HTTP/1.1 201 
2025-04-17 19:55:14.214 | Content-Type: <filtered>
2025-04-17 19:55:14.214 | Transfer-Encoding: <filtered>
2025-04-17 19:55:14.214 | Date: <filtered>
2025-04-17 19:55:14.214 | 2025-04-17T12:55:14.213Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-8, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:14.214 | 2025-04-17T12:55:14.214Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:14.214 | 2025-04-17T12:55:14.214Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.096455394, duration(nanos)=9.6455394E7, startTimeNanos=66511422791971}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@33f0bae8'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.147475096, duration(nanos)=1.47475096E8, startTimeNanos=66511371817700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5e2847bd'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66511367870374}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1a72313'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.151725544, duration(nanos)=1.51725544E8, startTimeNanos=66511367637035}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2a84caaf'], parentObservation=null}}}}
2025-04-17 19:55:14.214 | 2025-04-17T12:55:14.214Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-8, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:14.215 | 2025-04-17T12:55:14.215Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-8, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:14.215 | 2025-04-17T12:55:14.215Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:14.215 | 2025-04-17T12:55:14.215Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:14.215 | 2025-04-17T12:55:14.215Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:14.215 | 2025-04-17T12:55:14.215Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:14.215 | 2025-04-17T12:55:14.215Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: POST /api/images - 201 in 147 ms [request_id: dc075bc8-d1af-4338-8723-943cc29b40a1]
2025-04-17 19:55:14.216 | 2025-04-17T12:55:14.216Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-14] Completed 201 CREATED
2025-04-17 19:55:14.216 | 2025-04-17T12:55:14.216Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-5, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:14.216 | 2025-04-17T12:55:14.216Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-5, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:14.216 | 2025-04-17T12:55:14.216Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-5, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:14.216 | 2025-04-17T12:55:14.216Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-5, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:14.220 | 2025-04-17T12:55:14.219Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:14.220 | 2025-04-17T12:55:14.220Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-6, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:14.220 | 2025-04-17T12:55:14.220Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-15] HTTP POST "/api/images"
2025-04-17 19:55:14.221 | 2025-04-17T12:55:14.221Z DEBUG 1 --- [     parallel-3] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:14.222 | 2025-04-17T12:55:14.221Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:14.222 | 2025-04-17T12:55:14.221Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:14.222 | 2025-04-17T12:55:14.221Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.222 | 2025-04-17T12:55:14.222Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:14.222 | 2025-04-17T12:55:14.222Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:14.222 | 2025-04-17T12:55:14.222Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:14.222 | 2025-04-17T12:55:14.222Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:14.222 | 2025-04-17T12:55:14.222Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:14.222 | 2025-04-17T12:55:14.222Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:14.222 | 2025-04-17T12:55:14.222Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:14.222 | 2025-04-17T12:55:14.222Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:14.222 | 2025-04-17T12:55:14.222Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.222 | 2025-04-17T12:55:14.222Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:14.222 | 2025-04-17T12:55:14.222Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:14.222 | 2025-04-17T12:55:14.222Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:14.222 | 2025-04-17T12:55:14.222Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:14.223 | 2025-04-17T12:55:14.222Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.223 | 2025-04-17T12:55:14.222Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:14.223 | 2025-04-17T12:55:14.223Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:14.223 | 2025-04-17T12:55:14.223Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.223 | 2025-04-17T12:55:14.223Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:14.223 | 2025-04-17T12:55:14.223Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:14.223 | 2025-04-17T12:55:14.223Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:14.223 | 2025-04-17T12:55:14.223Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:14.223 | 2025-04-17T12:55:14.223Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:14.223 | 2025-04-17T12:55:14.223Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:14.223 | 2025-04-17T12:55:14.223Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.223 | 2025-04-17T12:55:14.223Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:14.223 | 2025-04-17T12:55:14.223Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:14.223 | 2025-04-17T12:55:14.223Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:14.223 | 2025-04-17T12:55:14.223Z DEBUG 1 --- [     parallel-3] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:14.223 | 2025-04-17T12:55:14.223Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:14.224 | 2025-04-17T12:55:14.224Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:14.224 | 2025-04-17T12:55:14.224Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:14.224 | 2025-04-17T12:55:14.224Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-15] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:14.225 | 2025-04-17T12:55:14.224Z DEBUG 1 --- [     parallel-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:14.225 | 2025-04-17T12:55:14.225Z  INFO 1 --- [     parallel-3] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: 9085d40b-03c1-44df-a911-b83815e34a52]
2025-04-17 19:55:14.225 | 2025-04-17T12:55:14.225Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-6, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:14.285 | 2025-04-17T12:55:14.285Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-6, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:14.287 | 2025-04-17T12:55:14.287Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=98, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:14.288 | 2025-04-17T12:55:14.287Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"1810922", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundary5TDitWfm8jJV2Rsy", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"9085d40b-03c1-44df-a911-b83815e34a52", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:14.288 | 2025-04-17T12:55:14.288Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=6.7962E-5, duration(nanos)=67962.0, startTimeNanos=66511593046003}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1c9512ed'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.06424251, duration(nanos)=6.424251E7, startTimeNanos=66511528938208}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@9cab6d'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66511525959140}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@389bafd6'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.06754598, duration(nanos)=6.754598E7, startTimeNanos=66511525714221}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3446dbd8'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"1810922", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundary5TDitWfm8jJV2Rsy", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"9085d40b-03c1-44df-a911-b83815e34a52", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:14.289 | 2025-04-17T12:55:14.288Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:14.289 | 2025-04-17T12:55:14.288Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-9, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 19:55:14.289 | 2025-04-17T12:55:14.289Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-9, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:14.290 | 2025-04-17T12:55:14.289Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-9, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:14.470 | 2025-04-17T12:55:14.469Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-9, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:14.470 | HTTP/1.1 201 
2025-04-17 19:55:14.470 | Content-Type: <filtered>
2025-04-17 19:55:14.470 | Transfer-Encoding: <filtered>
2025-04-17 19:55:14.470 | Date: <filtered>
2025-04-17 19:55:14.470 | 2025-04-17T12:55:14.470Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-9, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:14.470 | 2025-04-17T12:55:14.470Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:14.470 | 2025-04-17T12:55:14.470Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.182245621, duration(nanos)=1.82245621E8, startTimeNanos=66511593046003}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1c9512ed'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.246397918, duration(nanos)=2.46397918E8, startTimeNanos=66511528938208}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@9cab6d'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66511525959140}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@389bafd6'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.249692618, duration(nanos)=2.49692618E8, startTimeNanos=66511525714221}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3446dbd8'], parentObservation=null}}}}
2025-04-17 19:55:14.471 | 2025-04-17T12:55:14.471Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-9, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:14.471 | 2025-04-17T12:55:14.471Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-9, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:14.471 | 2025-04-17T12:55:14.471Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:14.471 | 2025-04-17T12:55:14.471Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:14.471 | 2025-04-17T12:55:14.471Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:14.471 | 2025-04-17T12:55:14.471Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:14.472 | 2025-04-17T12:55:14.471Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: POST /api/images - 201 in 247 ms [request_id: 9085d40b-03c1-44df-a911-b83815e34a52]
2025-04-17 19:55:14.472 | 2025-04-17T12:55:14.472Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-15] Completed 201 CREATED
2025-04-17 19:55:14.472 | 2025-04-17T12:55:14.472Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-6, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:14.472 | 2025-04-17T12:55:14.472Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-6, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:14.472 | 2025-04-17T12:55:14.472Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-6, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:14.472 | 2025-04-17T12:55:14.472Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-6, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:14.475 | 2025-04-17T12:55:14.475Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:14.475 | 2025-04-17T12:55:14.475Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-7, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:14.476 | 2025-04-17T12:55:14.476Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-16] HTTP POST "/api/images"
2025-04-17 19:55:14.477 | 2025-04-17T12:55:14.477Z DEBUG 1 --- [     parallel-5] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:14.477 | 2025-04-17T12:55:14.477Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:14.477 | 2025-04-17T12:55:14.477Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:14.477 | 2025-04-17T12:55:14.477Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.478 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:14.478 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:14.478 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:14.478 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:14.478 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:14.478 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:14.478 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:14.478 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:14.478 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.478 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:14.478 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:14.478 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:14.478 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:14.478 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.478 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:14.478 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:14.479 | 2025-04-17T12:55:14.478Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.479 | 2025-04-17T12:55:14.479Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:14.479 | 2025-04-17T12:55:14.479Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:14.479 | 2025-04-17T12:55:14.479Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:14.479 | 2025-04-17T12:55:14.479Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:14.479 | 2025-04-17T12:55:14.479Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:14.479 | 2025-04-17T12:55:14.479Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:14.479 | 2025-04-17T12:55:14.479Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.479 | 2025-04-17T12:55:14.479Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:14.479 | 2025-04-17T12:55:14.479Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:14.479 | 2025-04-17T12:55:14.479Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:14.479 | 2025-04-17T12:55:14.479Z DEBUG 1 --- [     parallel-5] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:14.479 | 2025-04-17T12:55:14.479Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:14.480 | 2025-04-17T12:55:14.480Z DEBUG 1 --- [     parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:14.480 | 2025-04-17T12:55:14.480Z DEBUG 1 --- [     parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:14.480 | 2025-04-17T12:55:14.480Z DEBUG 1 --- [     parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-16] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:14.480 | 2025-04-17T12:55:14.480Z DEBUG 1 --- [     parallel-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:14.480 | 2025-04-17T12:55:14.480Z  INFO 1 --- [     parallel-5] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: 3a0e58a8-5887-421c-a5b7-f187b356e5dd]
2025-04-17 19:55:14.481 | 2025-04-17T12:55:14.480Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-7, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:14.484 | 2025-04-17T12:55:14.483Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-7, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:14.485 | 2025-04-17T12:55:14.485Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=97, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:14.485 | 2025-04-17T12:55:14.485Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"1793545", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundarysLiyZWJBzID6ekei", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"3a0e58a8-5887-421c-a5b7-f187b356e5dd", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:14.486 | 2025-04-17T12:55:14.486Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=5.5313E-5, duration(nanos)=55313.0, startTimeNanos=66511790900231}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@f0b5c7'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.006288569, duration(nanos)=6288569.0, startTimeNanos=66511784727127}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@65d2b177'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66511781777001}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@525704'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.009597129, duration(nanos)=9597129.0, startTimeNanos=66511781502030}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@248c4cd'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"1793545", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundarysLiyZWJBzID6ekei", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"3a0e58a8-5887-421c-a5b7-f187b356e5dd", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:14.486 | 2025-04-17T12:55:14.486Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:14.487 | 2025-04-17T12:55:14.486Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-10, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 19:55:14.487 | 2025-04-17T12:55:14.487Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-10, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:14.487 | 2025-04-17T12:55:14.487Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-10, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:14.578 | 2025-04-17T12:55:14.578Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-10, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:14.578 | HTTP/1.1 201 
2025-04-17 19:55:14.578 | Content-Type: <filtered>
2025-04-17 19:55:14.578 | Transfer-Encoding: <filtered>
2025-04-17 19:55:14.578 | Date: <filtered>
2025-04-17 19:55:14.578 | 2025-04-17T12:55:14.578Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-10, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:14.578 | 2025-04-17T12:55:14.578Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:14.578 | 2025-04-17T12:55:14.578Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.092660644, duration(nanos)=9.2660644E7, startTimeNanos=66511790900231}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@f0b5c7'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.09888779, duration(nanos)=9.888779E7, startTimeNanos=66511784727127}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@65d2b177'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66511781777001}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@525704'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.102242483, duration(nanos)=1.02242483E8, startTimeNanos=66511781502030}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@248c4cd'], parentObservation=null}}}}
2025-04-17 19:55:14.579 | 2025-04-17T12:55:14.579Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-10, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:14.580 | 2025-04-17T12:55:14.580Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-10, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:14.580 | 2025-04-17T12:55:14.580Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:14.580 | 2025-04-17T12:55:14.580Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: POST /api/images - 201 in 100 ms [request_id: 3a0e58a8-5887-421c-a5b7-f187b356e5dd]
2025-04-17 19:55:14.580 | 2025-04-17T12:55:14.580Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:14.580 | 2025-04-17T12:55:14.580Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:14.580 | 2025-04-17T12:55:14.580Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:14.581 | 2025-04-17T12:55:14.581Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-16] Completed 201 CREATED
2025-04-17 19:55:14.581 | 2025-04-17T12:55:14.581Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-7, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:14.581 | 2025-04-17T12:55:14.581Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-7, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:14.581 | 2025-04-17T12:55:14.581Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-7, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:14.581 | 2025-04-17T12:55:14.581Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-7, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:14.584 | 2025-04-17T12:55:14.584Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:14.584 | 2025-04-17T12:55:14.584Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-8, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:14.585 | 2025-04-17T12:55:14.584Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-17] HTTP POST "/api/images"
2025-04-17 19:55:14.586 | 2025-04-17T12:55:14.586Z DEBUG 1 --- [     parallel-7] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:14.586 | 2025-04-17T12:55:14.586Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:14.586 | 2025-04-17T12:55:14.586Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:14.586 | 2025-04-17T12:55:14.586Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.586 | 2025-04-17T12:55:14.586Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:14.586 | 2025-04-17T12:55:14.586Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:14.586 | 2025-04-17T12:55:14.586Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.586Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.586Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:14.587 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.588 | 2025-04-17T12:55:14.587Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:14.588 | 2025-04-17T12:55:14.588Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:14.588 | 2025-04-17T12:55:14.588Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:14.588 | 2025-04-17T12:55:14.588Z DEBUG 1 --- [     parallel-7] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:14.588 | 2025-04-17T12:55:14.588Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:14.589 | 2025-04-17T12:55:14.588Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:14.589 | 2025-04-17T12:55:14.589Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:14.589 | 2025-04-17T12:55:14.589Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-17] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:14.589 | 2025-04-17T12:55:14.589Z DEBUG 1 --- [     parallel-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:14.589 | 2025-04-17T12:55:14.589Z  INFO 1 --- [     parallel-7] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: 371a8713-1104-4233-8642-fd06aeb7856f]
2025-04-17 19:55:14.589 | 2025-04-17T12:55:14.589Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-8, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:14.635 | 2025-04-17T12:55:14.635Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-8, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:14.637 | 2025-04-17T12:55:14.637Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=96, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:14.638 | 2025-04-17T12:55:14.638Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"1751688", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryUnGo9D8mPVW1ARVc", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"371a8713-1104-4233-8642-fd06aeb7856f", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:14.638 | 2025-04-17T12:55:14.638Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=6.4613E-5, duration(nanos)=64613.0, startTimeNanos=66511943326618}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@79317ce'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.050031828, duration(nanos)=5.0031828E7, startTimeNanos=66511893420905}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@77ba5742'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66511890364209}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6542d4c6'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.053413457, duration(nanos)=5.3413457E7, startTimeNanos=66511890116639}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@21680a0f'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"1751688", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryUnGo9D8mPVW1ARVc", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"371a8713-1104-4233-8642-fd06aeb7856f", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:14.639 | 2025-04-17T12:55:14.639Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:14.639 | 2025-04-17T12:55:14.639Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-11, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 19:55:14.639 | 2025-04-17T12:55:14.639Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-11, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:14.640 | 2025-04-17T12:55:14.640Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-11, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:14.728 | 2025-04-17T12:55:14.728Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-11, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:14.728 | HTTP/1.1 201 
2025-04-17 19:55:14.728 | Content-Type: <filtered>
2025-04-17 19:55:14.728 | Transfer-Encoding: <filtered>
2025-04-17 19:55:14.728 | Date: <filtered>
2025-04-17 19:55:14.728 | 2025-04-17T12:55:14.728Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-11, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:14.728 | 2025-04-17T12:55:14.728Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:14.729 | 2025-04-17T12:55:14.729Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.090554111, duration(nanos)=9.0554111E7, startTimeNanos=66511943326618}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@79317ce'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.140511166, duration(nanos)=1.40511166E8, startTimeNanos=66511893420905}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@77ba5742'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66511890364209}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6542d4c6'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.143919736, duration(nanos)=1.43919736E8, startTimeNanos=66511890116639}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@21680a0f'], parentObservation=null}}}}
2025-04-17 19:55:14.729 | 2025-04-17T12:55:14.729Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-11, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:14.730 | 2025-04-17T12:55:14.730Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-11, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:14.730 | 2025-04-17T12:55:14.730Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:14.730 | 2025-04-17T12:55:14.730Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:14.730 | 2025-04-17T12:55:14.730Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:14.730 | 2025-04-17T12:55:14.730Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:14.730 | 2025-04-17T12:55:14.730Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: POST /api/images - 201 in 141 ms [request_id: 371a8713-1104-4233-8642-fd06aeb7856f]
2025-04-17 19:55:14.730 | 2025-04-17T12:55:14.730Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-17] Completed 201 CREATED
2025-04-17 19:55:14.731 | 2025-04-17T12:55:14.730Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-8, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:14.731 | 2025-04-17T12:55:14.730Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-8, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:14.731 | 2025-04-17T12:55:14.731Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-8, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:14.731 | 2025-04-17T12:55:14.731Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-8, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:14.735 | 2025-04-17T12:55:14.734Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:14.735 | 2025-04-17T12:55:14.735Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-9, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:14.735 | 2025-04-17T12:55:14.735Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-18] HTTP POST "/api/images"
2025-04-17 19:55:14.737 | 2025-04-17T12:55:14.737Z DEBUG 1 --- [     parallel-9] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:14.737 | 2025-04-17T12:55:14.737Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:14.737 | 2025-04-17T12:55:14.737Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:14.737 | 2025-04-17T12:55:14.737Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.737 | 2025-04-17T12:55:14.737Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:14.737 | 2025-04-17T12:55:14.737Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:14.737 | 2025-04-17T12:55:14.737Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:14.737 | 2025-04-17T12:55:14.737Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:14.738 | 2025-04-17T12:55:14.737Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:14.738 | 2025-04-17T12:55:14.738Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:14.738 | 2025-04-17T12:55:14.738Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:14.738 | 2025-04-17T12:55:14.738Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:14.738 | 2025-04-17T12:55:14.738Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.738 | 2025-04-17T12:55:14.738Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:14.738 | 2025-04-17T12:55:14.738Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:14.738 | 2025-04-17T12:55:14.738Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:14.738 | 2025-04-17T12:55:14.738Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:14.738 | 2025-04-17T12:55:14.738Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.738 | 2025-04-17T12:55:14.738Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:14.738 | 2025-04-17T12:55:14.738Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:14.738 | 2025-04-17T12:55:14.738Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.738 | 2025-04-17T12:55:14.738Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:14.739 | 2025-04-17T12:55:14.738Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:14.739 | 2025-04-17T12:55:14.738Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:14.739 | 2025-04-17T12:55:14.739Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:14.739 | 2025-04-17T12:55:14.739Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:14.739 | 2025-04-17T12:55:14.739Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:14.739 | 2025-04-17T12:55:14.739Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.739 | 2025-04-17T12:55:14.739Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:14.739 | 2025-04-17T12:55:14.739Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:14.739 | 2025-04-17T12:55:14.739Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:14.739 | 2025-04-17T12:55:14.739Z DEBUG 1 --- [     parallel-9] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:14.739 | 2025-04-17T12:55:14.739Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:14.740 | 2025-04-17T12:55:14.740Z DEBUG 1 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:14.740 | 2025-04-17T12:55:14.740Z DEBUG 1 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:14.740 | 2025-04-17T12:55:14.740Z DEBUG 1 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-18] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:14.740 | 2025-04-17T12:55:14.740Z DEBUG 1 --- [     parallel-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:14.740 | 2025-04-17T12:55:14.740Z  INFO 1 --- [     parallel-9] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: fa423062-56ae-4fd8-88e4-fa48cc45803b]
2025-04-17 19:55:14.741 | 2025-04-17T12:55:14.740Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-9, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:14.785 | 2025-04-17T12:55:14.785Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-9, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:14.787 | 2025-04-17T12:55:14.787Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=95, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:14.788 | 2025-04-17T12:55:14.788Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"1711773", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryApWk0ZuBbcU2MQAJ", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"fa423062-56ae-4fd8-88e4-fa48cc45803b", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:14.788 | 2025-04-17T12:55:14.788Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=5.7382E-5, duration(nanos)=57382.0, startTimeNanos=66512093277363}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3e5a548b'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.048634488, duration(nanos)=4.8634488E7, startTimeNanos=66512044765610}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1b7f0445'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66512041315488}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@68681708'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.05258338, duration(nanos)=5.258338E7, startTimeNanos=66512040923322}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@9b15078'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"1711773", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryApWk0ZuBbcU2MQAJ", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"fa423062-56ae-4fd8-88e4-fa48cc45803b", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:14.789 | 2025-04-17T12:55:14.789Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:14.789 | 2025-04-17T12:55:14.789Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-12, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 19:55:14.789 | 2025-04-17T12:55:14.789Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-12, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:14.790 | 2025-04-17T12:55:14.790Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-12, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:14.876 | 2025-04-17T12:55:14.876Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-12, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:14.876 | HTTP/1.1 201 
2025-04-17 19:55:14.876 | Content-Type: <filtered>
2025-04-17 19:55:14.876 | Transfer-Encoding: <filtered>
2025-04-17 19:55:14.876 | Date: <filtered>
2025-04-17 19:55:14.876 | 2025-04-17T12:55:14.876Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-12, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:14.877 | 2025-04-17T12:55:14.876Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:14.877 | 2025-04-17T12:55:14.877Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.088735099, duration(nanos)=8.8735099E7, startTimeNanos=66512093277363}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3e5a548b'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.137321095, duration(nanos)=1.37321095E8, startTimeNanos=66512044765610}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1b7f0445'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66512041315488}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@68681708'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.141296618, duration(nanos)=1.41296618E8, startTimeNanos=66512040923322}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@9b15078'], parentObservation=null}}}}
2025-04-17 19:55:14.878 | 2025-04-17T12:55:14.878Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-12, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:14.878 | 2025-04-17T12:55:14.878Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-12, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:14.878 | 2025-04-17T12:55:14.878Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:14.878 | 2025-04-17T12:55:14.878Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:14.878 | 2025-04-17T12:55:14.878Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:14.878 | 2025-04-17T12:55:14.878Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:14.879 | 2025-04-17T12:55:14.878Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: POST /api/images - 201 in 138 ms [request_id: fa423062-56ae-4fd8-88e4-fa48cc45803b]
2025-04-17 19:55:14.879 | 2025-04-17T12:55:14.879Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-18] Completed 201 CREATED
2025-04-17 19:55:14.879 | 2025-04-17T12:55:14.879Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-9, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:14.879 | 2025-04-17T12:55:14.879Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-9, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:14.879 | 2025-04-17T12:55:14.879Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-9, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:14.879 | 2025-04-17T12:55:14.879Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-9, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:14.882 | 2025-04-17T12:55:14.882Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:14.882 | 2025-04-17T12:55:14.882Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-10, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:14.883 | 2025-04-17T12:55:14.883Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-19] HTTP POST "/api/images"
2025-04-17 19:55:14.884 | 2025-04-17T12:55:14.884Z DEBUG 1 --- [    parallel-11] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:14.884 | 2025-04-17T12:55:14.884Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:14.884 | 2025-04-17T12:55:14.884Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:14.884 | 2025-04-17T12:55:14.884Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.885 | 2025-04-17T12:55:14.885Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:14.885 | 2025-04-17T12:55:14.885Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:14.885 | 2025-04-17T12:55:14.885Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:14.885 | 2025-04-17T12:55:14.885Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:14.885 | 2025-04-17T12:55:14.885Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:14.885 | 2025-04-17T12:55:14.885Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:14.885 | 2025-04-17T12:55:14.885Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:14.885 | 2025-04-17T12:55:14.885Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:14.885 | 2025-04-17T12:55:14.885Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.885 | 2025-04-17T12:55:14.885Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:14.885 | 2025-04-17T12:55:14.885Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:14.885 | 2025-04-17T12:55:14.885Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:14.885 | 2025-04-17T12:55:14.885Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:14.885 | 2025-04-17T12:55:14.885Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.886 | 2025-04-17T12:55:14.886Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:14.886 | 2025-04-17T12:55:14.886Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:14.886 | 2025-04-17T12:55:14.886Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.886 | 2025-04-17T12:55:14.886Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:14.886 | 2025-04-17T12:55:14.886Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:14.886 | 2025-04-17T12:55:14.886Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:14.886 | 2025-04-17T12:55:14.886Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:14.886 | 2025-04-17T12:55:14.886Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:14.886 | 2025-04-17T12:55:14.886Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:14.886 | 2025-04-17T12:55:14.886Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:14.886 | 2025-04-17T12:55:14.886Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:14.886 | 2025-04-17T12:55:14.886Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:14.886 | 2025-04-17T12:55:14.886Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:14.886 | 2025-04-17T12:55:14.886Z DEBUG 1 --- [    parallel-11] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:14.886 | 2025-04-17T12:55:14.886Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:14.887 | 2025-04-17T12:55:14.887Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:14.887 | 2025-04-17T12:55:14.887Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:14.887 | 2025-04-17T12:55:14.887Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-19] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:14.887 | 2025-04-17T12:55:14.887Z DEBUG 1 --- [    parallel-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:14.888 | 2025-04-17T12:55:14.887Z  INFO 1 --- [    parallel-11] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: a660f43c-3093-4a7a-82bc-bcc44595af8c]
2025-04-17 19:55:14.888 | 2025-04-17T12:55:14.888Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-10, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:14.935 | 2025-04-17T12:55:14.935Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-10, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:14.937 | 2025-04-17T12:55:14.936Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=94, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:14.937 | 2025-04-17T12:55:14.937Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"1710506", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryNadDEmQAgwL1B5yB", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"a660f43c-3093-4a7a-82bc-bcc44595af8c", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:14.938 | 2025-04-17T12:55:14.938Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=5.3142E-5, duration(nanos)=53142.0, startTimeNanos=66512242825616}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6523b3c9'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.050959635, duration(nanos)=5.0959635E7, startTimeNanos=66512191973226}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@61dde04'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66512188652094}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2ee54998'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.054649431, duration(nanos)=5.4649431E7, startTimeNanos=66512188415245}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2dd4feac'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"1710506", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryNadDEmQAgwL1B5yB", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"a660f43c-3093-4a7a-82bc-bcc44595af8c", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:14.938 | 2025-04-17T12:55:14.938Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:14.938 | 2025-04-17T12:55:14.938Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-13, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 19:55:14.938 | 2025-04-17T12:55:14.938Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-13, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:14.940 | 2025-04-17T12:55:14.940Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-13, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:15.031 | 2025-04-17T12:55:15.031Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-13, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:15.031 | HTTP/1.1 201 
2025-04-17 19:55:15.031 | Content-Type: <filtered>
2025-04-17 19:55:15.031 | Transfer-Encoding: <filtered>
2025-04-17 19:55:15.031 | Date: <filtered>
2025-04-17 19:55:15.031 | 2025-04-17T12:55:15.031Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-13, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:15.031 | 2025-04-17T12:55:15.031Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:15.032 | 2025-04-17T12:55:15.031Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.093884842, duration(nanos)=9.3884842E7, startTimeNanos=66512242825616}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6523b3c9'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.144775444, duration(nanos)=1.44775444E8, startTimeNanos=66512191973226}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@61dde04'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66512188652094}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2ee54998'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.14845006, duration(nanos)=1.4845006E8, startTimeNanos=66512188415245}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2dd4feac'], parentObservation=null}}}}
2025-04-17 19:55:15.032 | 2025-04-17T12:55:15.032Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-13, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:15.033 | 2025-04-17T12:55:15.033Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-13, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:15.033 | 2025-04-17T12:55:15.033Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:15.033 | 2025-04-17T12:55:15.033Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:15.033 | 2025-04-17T12:55:15.033Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:15.033 | 2025-04-17T12:55:15.033Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:15.033 | 2025-04-17T12:55:15.033Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: POST /api/images - 201 in 146 ms [request_id: a660f43c-3093-4a7a-82bc-bcc44595af8c]
2025-04-17 19:55:15.033 | 2025-04-17T12:55:15.033Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-19] Completed 201 CREATED
2025-04-17 19:55:15.033 | 2025-04-17T12:55:15.033Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-10, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:15.033 | 2025-04-17T12:55:15.033Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-10, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:15.034 | 2025-04-17T12:55:15.034Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-10, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:15.034 | 2025-04-17T12:55:15.034Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-10, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:15.037 | 2025-04-17T12:55:15.036Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:15.037 | 2025-04-17T12:55:15.037Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-11, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:15.037 | 2025-04-17T12:55:15.037Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-20] HTTP POST "/api/images"
2025-04-17 19:55:15.039 | 2025-04-17T12:55:15.039Z DEBUG 1 --- [     parallel-1] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:15.039 | 2025-04-17T12:55:15.039Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:15.039 | 2025-04-17T12:55:15.039Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:15.039 | 2025-04-17T12:55:15.039Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.040 | 2025-04-17T12:55:15.039Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:15.040 | 2025-04-17T12:55:15.040Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:15.040 | 2025-04-17T12:55:15.040Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:15.040 | 2025-04-17T12:55:15.040Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:15.040 | 2025-04-17T12:55:15.040Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:15.040 | 2025-04-17T12:55:15.040Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:15.040 | 2025-04-17T12:55:15.040Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:15.040 | 2025-04-17T12:55:15.040Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:15.040 | 2025-04-17T12:55:15.040Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.040 | 2025-04-17T12:55:15.040Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:15.040 | 2025-04-17T12:55:15.040Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.040Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.040Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.041Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.041Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.041Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.041Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.041Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.041Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.041Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.041Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.041Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.041Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.041Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.041Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.041Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.041Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:15.041 | 2025-04-17T12:55:15.041Z DEBUG 1 --- [     parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:15.042 | 2025-04-17T12:55:15.042Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:15.043 | 2025-04-17T12:55:15.042Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:15.043 | 2025-04-17T12:55:15.043Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:15.043 | 2025-04-17T12:55:15.043Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-20] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:15.043 | 2025-04-17T12:55:15.043Z DEBUG 1 --- [     parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:15.043 | 2025-04-17T12:55:15.043Z  INFO 1 --- [     parallel-1] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: 47b1a2fa-8b41-468d-8177-c504296b9b82]
2025-04-17 19:55:15.043 | 2025-04-17T12:55:15.043Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-11, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:15.085 | 2025-04-17T12:55:15.085Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-11, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:15.087 | 2025-04-17T12:55:15.087Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=99, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:15.087 | 2025-04-17T12:55:15.087Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"1663682", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundarypB4iAxK3UfZ7oZtL", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"47b1a2fa-8b41-468d-8177-c504296b9b82", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:15.088 | 2025-04-17T12:55:15.088Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=8.4883E-5, duration(nanos)=84883.0, startTimeNanos=66512392957733}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5591ad24'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.045961492, duration(nanos)=4.5961492E7, startTimeNanos=66512347213899}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3d14b46c'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66512343087301}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@393993df'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.050431964, duration(nanos)=5.0431964E7, startTimeNanos=66512342807550}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@33123bca'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"1663682", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundarypB4iAxK3UfZ7oZtL", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"47b1a2fa-8b41-468d-8177-c504296b9b82", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:15.088 | 2025-04-17T12:55:15.088Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:15.089 | 2025-04-17T12:55:15.088Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-14, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 19:55:15.089 | 2025-04-17T12:55:15.089Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-14, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:15.089 | 2025-04-17T12:55:15.089Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-14, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:15.323 | 2025-04-17T12:55:15.322Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-14, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:15.323 | HTTP/1.1 201 
2025-04-17 19:55:15.323 | Content-Type: <filtered>
2025-04-17 19:55:15.323 | Transfer-Encoding: <filtered>
2025-04-17 19:55:15.323 | Date: <filtered>
2025-04-17 19:55:15.323 | 2025-04-17T12:55:15.323Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-14, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:15.323 | 2025-04-17T12:55:15.323Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:15.323 | 2025-04-17T12:55:15.323Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.2353104, duration(nanos)=2.353104E8, startTimeNanos=66512392957733}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5591ad24'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.281091085, duration(nanos)=2.81091085E8, startTimeNanos=66512347213899}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3d14b46c'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66512343087301}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@393993df'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.285562577, duration(nanos)=2.85562577E8, startTimeNanos=66512342807550}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@33123bca'], parentObservation=null}}}}
2025-04-17 19:55:15.324 | 2025-04-17T12:55:15.324Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-14, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:15.324 | 2025-04-17T12:55:15.324Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-14, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:15.324 | 2025-04-17T12:55:15.324Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:15.324 | 2025-04-17T12:55:15.324Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:15.324 | 2025-04-17T12:55:15.324Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:15.324 | 2025-04-17T12:55:15.324Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:15.325 | 2025-04-17T12:55:15.324Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: POST /api/images - 201 in 281 ms [request_id: 47b1a2fa-8b41-468d-8177-c504296b9b82]
2025-04-17 19:55:15.325 | 2025-04-17T12:55:15.325Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-20] Completed 201 CREATED
2025-04-17 19:55:15.325 | 2025-04-17T12:55:15.325Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-11, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:15.325 | 2025-04-17T12:55:15.325Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-11, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:15.325 | 2025-04-17T12:55:15.325Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-11, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:15.325 | 2025-04-17T12:55:15.325Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-11, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:15.328 | 2025-04-17T12:55:15.328Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:15.328 | 2025-04-17T12:55:15.328Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-12, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:15.329 | 2025-04-17T12:55:15.328Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-21] HTTP POST "/api/images"
2025-04-17 19:55:15.330 | 2025-04-17T12:55:15.330Z DEBUG 1 --- [     parallel-3] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:15.330 | 2025-04-17T12:55:15.330Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:15.330 | 2025-04-17T12:55:15.330Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:15.330 | 2025-04-17T12:55:15.330Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:15.331 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:15.332 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:15.332 | 2025-04-17T12:55:15.331Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.332 | 2025-04-17T12:55:15.332Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:15.332 | 2025-04-17T12:55:15.332Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:15.332 | 2025-04-17T12:55:15.332Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:15.332 | 2025-04-17T12:55:15.332Z DEBUG 1 --- [     parallel-3] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:15.332 | 2025-04-17T12:55:15.332Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:15.332 | 2025-04-17T12:55:15.332Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:15.332 | 2025-04-17T12:55:15.332Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:15.333 | 2025-04-17T12:55:15.332Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-21] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:15.333 | 2025-04-17T12:55:15.333Z DEBUG 1 --- [     parallel-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:15.333 | 2025-04-17T12:55:15.333Z  INFO 1 --- [     parallel-3] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: 7dc1eedb-5d1d-44f7-96b3-7ba4d22c8bbc]
2025-04-17 19:55:15.333 | 2025-04-17T12:55:15.333Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-12, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:15.336 | 2025-04-17T12:55:15.335Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-12, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:15.337 | 2025-04-17T12:55:15.337Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=98, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:15.338 | 2025-04-17T12:55:15.338Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"1657177", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryX5ftZ0AH3OeT9963", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"7dc1eedb-5d1d-44f7-96b3-7ba4d22c8bbc", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:15.338 | 2025-04-17T12:55:15.338Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=7.7543E-5, duration(nanos)=77543.0, startTimeNanos=66512643201793}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6b325801'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.005984937, duration(nanos)=5984937.0, startTimeNanos=66512637390863}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@731d36df'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66512634598403}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6cfe408'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.009216955, duration(nanos)=9216955.0, startTimeNanos=66512634240338}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@24215370'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"1657177", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryX5ftZ0AH3OeT9963", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"7dc1eedb-5d1d-44f7-96b3-7ba4d22c8bbc", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:15.339 | 2025-04-17T12:55:15.338Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:15.339 | 2025-04-17T12:55:15.339Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-15, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 19:55:15.339 | 2025-04-17T12:55:15.339Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-15, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:15.340 | 2025-04-17T12:55:15.340Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-15, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:15.527 | 2025-04-17T12:55:15.527Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-15, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:15.527 | HTTP/1.1 201 
2025-04-17 19:55:15.527 | Content-Type: <filtered>
2025-04-17 19:55:15.527 | Transfer-Encoding: <filtered>
2025-04-17 19:55:15.527 | Date: <filtered>
2025-04-17 19:55:15.527 | 2025-04-17T12:55:15.527Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-15, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:15.527 | 2025-04-17T12:55:15.527Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:15.527 | 2025-04-17T12:55:15.527Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.189229558, duration(nanos)=1.89229558E8, startTimeNanos=66512643201793}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6b325801'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.195084439, duration(nanos)=1.95084439E8, startTimeNanos=66512637390863}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@731d36df'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66512634598403}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6cfe408'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.198298367, duration(nanos)=1.98298367E8, startTimeNanos=66512634240338}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@24215370'], parentObservation=null}}}}
2025-04-17 19:55:15.528 | 2025-04-17T12:55:15.528Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-15, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:15.528 | 2025-04-17T12:55:15.528Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-15, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:15.528 | 2025-04-17T12:55:15.528Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:15.528 | 2025-04-17T12:55:15.528Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:15.528 | 2025-04-17T12:55:15.528Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:15.528 | 2025-04-17T12:55:15.528Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:15.529 | 2025-04-17T12:55:15.529Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: POST /api/images - 201 in 196 ms [request_id: 7dc1eedb-5d1d-44f7-96b3-7ba4d22c8bbc]
2025-04-17 19:55:15.529 | 2025-04-17T12:55:15.529Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-21] Completed 201 CREATED
2025-04-17 19:55:15.529 | 2025-04-17T12:55:15.529Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-12, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:15.529 | 2025-04-17T12:55:15.529Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-12, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:15.529 | 2025-04-17T12:55:15.529Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-12, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:15.529 | 2025-04-17T12:55:15.529Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-12, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:15.532 | 2025-04-17T12:55:15.532Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:15.532 | 2025-04-17T12:55:15.532Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-13, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:15.533 | 2025-04-17T12:55:15.533Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-22] HTTP POST "/api/images"
2025-04-17 19:55:15.534 | 2025-04-17T12:55:15.534Z DEBUG 1 --- [     parallel-5] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:15.534 | 2025-04-17T12:55:15.534Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:15.534 | 2025-04-17T12:55:15.534Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:15.534 | 2025-04-17T12:55:15.534Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.534 | 2025-04-17T12:55:15.534Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:15.534 | 2025-04-17T12:55:15.534Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:15.534 | 2025-04-17T12:55:15.534Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:15.534 | 2025-04-17T12:55:15.534Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:15.534 | 2025-04-17T12:55:15.534Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:15.534 | 2025-04-17T12:55:15.534Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:15.534 | 2025-04-17T12:55:15.534Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.534Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:15.535 | 2025-04-17T12:55:15.535Z DEBUG 1 --- [     parallel-5] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:15.536 | 2025-04-17T12:55:15.536Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:15.536 | 2025-04-17T12:55:15.536Z DEBUG 1 --- [     parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:15.536 | 2025-04-17T12:55:15.536Z DEBUG 1 --- [     parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:15.536 | 2025-04-17T12:55:15.536Z DEBUG 1 --- [     parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-22] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:15.537 | 2025-04-17T12:55:15.536Z DEBUG 1 --- [     parallel-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:15.537 | 2025-04-17T12:55:15.537Z  INFO 1 --- [     parallel-5] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: 171882c8-6c26-415c-b23c-6d1ed2dcecc8]
2025-04-17 19:55:15.537 | 2025-04-17T12:55:15.537Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-13, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:15.585 | 2025-04-17T12:55:15.585Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-13, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:15.587 | 2025-04-17T12:55:15.587Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=97, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:15.587 | 2025-04-17T12:55:15.587Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"1633855", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryRFpUhCO6aAAfTiQl", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"171882c8-6c26-415c-b23c-6d1ed2dcecc8", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:15.588 | 2025-04-17T12:55:15.588Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=5.0252E-5, duration(nanos)=50252.0, startTimeNanos=66512892903302}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5d2ae5a5'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.051806023, duration(nanos)=5.1806023E7, startTimeNanos=66512841195542}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@479b8b11'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66512838457339}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3e8dc84e'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.054798487, duration(nanos)=5.4798487E7, startTimeNanos=66512838258501}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1099b63c'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"1633855", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryRFpUhCO6aAAfTiQl", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"171882c8-6c26-415c-b23c-6d1ed2dcecc8", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:15.588 | 2025-04-17T12:55:15.588Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:15.588 | 2025-04-17T12:55:15.588Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-16, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 19:55:15.588 | 2025-04-17T12:55:15.588Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-16, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:15.589 | 2025-04-17T12:55:15.589Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-16, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:15.707 | 2025-04-17T12:55:15.707Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-16, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:15.707 | HTTP/1.1 201 
2025-04-17 19:55:15.707 | Content-Type: <filtered>
2025-04-17 19:55:15.707 | Transfer-Encoding: <filtered>
2025-04-17 19:55:15.707 | Date: <filtered>
2025-04-17 19:55:15.707 | 2025-04-17T12:55:15.707Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-16, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:15.707 | 2025-04-17T12:55:15.707Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:15.707 | 2025-04-17T12:55:15.707Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.119547667, duration(nanos)=1.19547667E8, startTimeNanos=66512892903302}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5d2ae5a5'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.171314909, duration(nanos)=1.71314909E8, startTimeNanos=66512841195542}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@479b8b11'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66512838457339}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3e8dc84e'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.174328123, duration(nanos)=1.74328123E8, startTimeNanos=66512838258501}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1099b63c'], parentObservation=null}}}}
2025-04-17 19:55:15.708 | 2025-04-17T12:55:15.708Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-16, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:15.708 | 2025-04-17T12:55:15.708Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-16, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:15.708 | 2025-04-17T12:55:15.708Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:15.708 | 2025-04-17T12:55:15.708Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:15.708 | 2025-04-17T12:55:15.708Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:15.709 | 2025-04-17T12:55:15.708Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:15.709 | 2025-04-17T12:55:15.709Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: POST /api/images - 201 in 172 ms [request_id: 171882c8-6c26-415c-b23c-6d1ed2dcecc8]
2025-04-17 19:55:15.709 | 2025-04-17T12:55:15.709Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-22] Completed 201 CREATED
2025-04-17 19:55:15.709 | 2025-04-17T12:55:15.709Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-13, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:15.709 | 2025-04-17T12:55:15.709Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-13, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:15.709 | 2025-04-17T12:55:15.709Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-13, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:15.709 | 2025-04-17T12:55:15.709Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-13, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:15.713 | 2025-04-17T12:55:15.713Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:15.713 | 2025-04-17T12:55:15.713Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-14, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:15.713 | 2025-04-17T12:55:15.713Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-23] HTTP POST "/api/images"
2025-04-17 19:55:15.715 | 2025-04-17T12:55:15.714Z DEBUG 1 --- [     parallel-7] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:15.715 | 2025-04-17T12:55:15.715Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:15.715 | 2025-04-17T12:55:15.715Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:15.715 | 2025-04-17T12:55:15.715Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.715 | 2025-04-17T12:55:15.715Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:15.715 | 2025-04-17T12:55:15.715Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:15.715 | 2025-04-17T12:55:15.715Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:15.715 | 2025-04-17T12:55:15.715Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:15.715 | 2025-04-17T12:55:15.715Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:15.715 | 2025-04-17T12:55:15.715Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:15.715 | 2025-04-17T12:55:15.715Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:15.715 | 2025-04-17T12:55:15.715Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:15.715 | 2025-04-17T12:55:15.715Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.715Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.715Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:15.716 | 2025-04-17T12:55:15.716Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:15.717 | 2025-04-17T12:55:15.717Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:15.717 | 2025-04-17T12:55:15.717Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:15.717 | 2025-04-17T12:55:15.717Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-23] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:15.718 | 2025-04-17T12:55:15.717Z DEBUG 1 --- [     parallel-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:15.718 | 2025-04-17T12:55:15.718Z  INFO 1 --- [     parallel-7] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: af53ecbc-dd3d-476e-98cf-6cd1e95ea877]
2025-04-17 19:55:15.718 | 2025-04-17T12:55:15.718Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-14, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:15.721 | 2025-04-17T12:55:15.720Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-14, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:15.722 | 2025-04-17T12:55:15.722Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=96, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:15.722 | 2025-04-17T12:55:15.722Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"1609154", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryvUc87lYdreMsDA1A", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"af53ecbc-dd3d-476e-98cf-6cd1e95ea877", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:15.723 | 2025-04-17T12:55:15.723Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=6.5193E-5, duration(nanos)=65193.0, startTimeNanos=66513027867928}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1a947e47'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.006094511, duration(nanos)=6094511.0, startTimeNanos=66513021888592}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1ccbd07'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513019269148}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@51d3dac8'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.009023347, duration(nanos)=9023347.0, startTimeNanos=66513019017898}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@c26ae98'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"1609154", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryvUc87lYdreMsDA1A", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"af53ecbc-dd3d-476e-98cf-6cd1e95ea877", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:15.723 | 2025-04-17T12:55:15.723Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:15.723 | 2025-04-17T12:55:15.723Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-17, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 19:55:15.723 | 2025-04-17T12:55:15.723Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-17, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:15.724 | 2025-04-17T12:55:15.724Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-17, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:15.865 | 2025-04-17T12:55:15.865Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-17, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:15.865 | HTTP/1.1 201 
2025-04-17 19:55:15.865 | Content-Type: <filtered>
2025-04-17 19:55:15.865 | Transfer-Encoding: <filtered>
2025-04-17 19:55:15.865 | Date: <filtered>
2025-04-17 19:55:15.865 | 2025-04-17T12:55:15.865Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-17, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:15.866 | 2025-04-17T12:55:15.865Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:15.866 | 2025-04-17T12:55:15.866Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.143141756, duration(nanos)=1.43141756E8, startTimeNanos=66513027867928}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1a947e47'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.149177944, duration(nanos)=1.49177944E8, startTimeNanos=66513021888592}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1ccbd07'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513019269148}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@51d3dac8'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.152178643, duration(nanos)=1.52178643E8, startTimeNanos=66513019017898}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@c26ae98'], parentObservation=null}}}}
2025-04-17 19:55:15.866 | 2025-04-17T12:55:15.866Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-17, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:15.867 | 2025-04-17T12:55:15.867Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-17, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:15.867 | 2025-04-17T12:55:15.867Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:15.867 | 2025-04-17T12:55:15.867Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:15.867 | 2025-04-17T12:55:15.867Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:15.867 | 2025-04-17T12:55:15.867Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:15.867 | 2025-04-17T12:55:15.867Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: POST /api/images - 201 in 150 ms [request_id: af53ecbc-dd3d-476e-98cf-6cd1e95ea877]
2025-04-17 19:55:15.868 | 2025-04-17T12:55:15.867Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-23] Completed 201 CREATED
2025-04-17 19:55:15.868 | 2025-04-17T12:55:15.868Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-14, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:15.868 | 2025-04-17T12:55:15.868Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-14, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:15.868 | 2025-04-17T12:55:15.868Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-14, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:15.868 | 2025-04-17T12:55:15.868Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-14, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:15.872 | 2025-04-17T12:55:15.872Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:15.872 | 2025-04-17T12:55:15.872Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-15, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:15.873 | 2025-04-17T12:55:15.872Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-24] HTTP POST "/api/images"
2025-04-17 19:55:15.874 | 2025-04-17T12:55:15.874Z DEBUG 1 --- [     parallel-9] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:15.874 | 2025-04-17T12:55:15.874Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:15.874 | 2025-04-17T12:55:15.874Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:15.874 | 2025-04-17T12:55:15.874Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.874 | 2025-04-17T12:55:15.874Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:15.874 | 2025-04-17T12:55:15.874Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:15.874 | 2025-04-17T12:55:15.874Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:15.874 | 2025-04-17T12:55:15.874Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:15.874 | 2025-04-17T12:55:15.874Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:15.874 | 2025-04-17T12:55:15.874Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:15.874 | 2025-04-17T12:55:15.874Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.874Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.874Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Request 'POST /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:15.875 | 2025-04-17T12:55:15.875Z DEBUG 1 --- [     parallel-9] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:15.876 | 2025-04-17T12:55:15.876Z DEBUG 1 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:15.876 | 2025-04-17T12:55:15.876Z DEBUG 1 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:15.876 | 2025-04-17T12:55:15.876Z DEBUG 1 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-24] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:15.877 | 2025-04-17T12:55:15.876Z DEBUG 1 --- [     parallel-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:15.877 | 2025-04-17T12:55:15.877Z  INFO 1 --- [     parallel-9] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/images from 172.18.0.1 [request_id: 69e84ef0-8072-4b52-a85b-343d093aa3d3]
2025-04-17 19:55:15.877 | 2025-04-17T12:55:15.877Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-15, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:15.935 | 2025-04-17T12:55:15.935Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-15, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:15.936 | 2025-04-17T12:55:15.936Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=95, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:15.937 | 2025-04-17T12:55:15.937Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"1596630", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryEHushiKuXWpNPiLX", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"69e84ef0-8072-4b52-a85b-343d093aa3d3", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:15.937 | 2025-04-17T12:55:15.937Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=5.0652E-5, duration(nanos)=50652.0, startTimeNanos=66513242632746}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@35f99f1d'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.061792173, duration(nanos)=6.1792173E7, startTimeNanos=66513180947837}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@51393820'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513178485519}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1ef3bd55'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.064654696, duration(nanos)=6.4654696E7, startTimeNanos=66513178142796}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2718827d'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"1596630", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"multipart/form-data; boundary=----WebKitFormBoundaryEHushiKuXWpNPiLX", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"69e84ef0-8072-4b52-a85b-343d093aa3d3", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:15.938 | 2025-04-17T12:55:15.938Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:15.938 | 2025-04-17T12:55:15.938Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-18, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=POST}
2025-04-17 19:55:15.938 | 2025-04-17T12:55:15.938Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-18, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:15.939 | 2025-04-17T12:55:15.939Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-18, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.075 | 2025-04-17T12:55:16.074Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-18, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.075 | HTTP/1.1 201 
2025-04-17 19:55:16.075 | Content-Type: <filtered>
2025-04-17 19:55:16.075 | Transfer-Encoding: <filtered>
2025-04-17 19:55:16.075 | Date: <filtered>
2025-04-17 19:55:16.075 | 2025-04-17T12:55:16.075Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-18, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.075 | 2025-04-17T12:55:16.075Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.075 | 2025-04-17T12:55:16.075Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.137815549, duration(nanos)=1.37815549E8, startTimeNanos=66513242632746}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@35f99f1d'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.19954688, duration(nanos)=1.9954688E8, startTimeNanos=66513180947837}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@51393820'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513178485519}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1ef3bd55'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.202429034, duration(nanos)=2.02429034E8, startTimeNanos=66513178142796}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2718827d'], parentObservation=null}}}}
2025-04-17 19:55:16.076 | 2025-04-17T12:55:16.076Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-18, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.076 | 2025-04-17T12:55:16.076Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-18, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.076 | 2025-04-17T12:55:16.076Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.077 | 2025-04-17T12:55:16.076Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(POST{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.077 | 2025-04-17T12:55:16.076Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.077 | 2025-04-17T12:55:16.077Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.077 | 2025-04-17T12:55:16.077Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: POST /api/images - 201 in 201 ms [request_id: 69e84ef0-8072-4b52-a85b-343d093aa3d3]
2025-04-17 19:55:16.077 | 2025-04-17T12:55:16.077Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-24] Completed 201 CREATED
2025-04-17 19:55:16.077 | 2025-04-17T12:55:16.077Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-15, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:16.077 | 2025-04-17T12:55:16.077Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-15, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:16.077 | 2025-04-17T12:55:16.077Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-15, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.077 | 2025-04-17T12:55:16.077Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-15, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.080 | 2025-04-17T12:55:16.079Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:16.080 | 2025-04-17T12:55:16.080Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-16, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.080 | 2025-04-17T12:55:16.080Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-25] HTTP GET "/api/images"
2025-04-17 19:55:16.081 | 2025-04-17T12:55:16.081Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-16, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.081 | 2025-04-17T12:55:16.081Z DEBUG 1 --- [    parallel-11] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.081 | 2025-04-17T12:55:16.081Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.081 | 2025-04-17T12:55:16.081Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'POST /logout'
2025-04-17 19:55:16.081 | 2025-04-17T12:55:16.081Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.081 | 2025-04-17T12:55:16.081Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.081Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.081Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images'; against '/api/**'
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.082 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.083 | 2025-04-17T12:55:16.082Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.083 | 2025-04-17T12:55:16.083Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.083 | 2025-04-17T12:55:16.083Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.083 | 2025-04-17T12:55:16.083Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-25] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.084 | 2025-04-17T12:55:16.084Z DEBUG 1 --- [    parallel-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.084 | 2025-04-17T12:55:16.084Z  INFO 1 --- [    parallel-11] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images from 172.18.0.1 [request_id: 7dd1f6cb-2652-4a47-a2c2-60ec2c6a907a]
2025-04-17 19:55:16.084 | 2025-04-17T12:55:16.084Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-16, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.085 | 2025-04-17T12:55:16.085Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=99, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.086 | 2025-04-17T12:55:16.086Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"7dd1f6cb-2652-4a47-a2c2-60ec2c6a907a", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.087 | 2025-04-17T12:55:16.086Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=8.3113E-5, duration(nanos)=83113.0, startTimeNanos=66513391580605}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5ee0e0f4'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.003687075, duration(nanos)=3687075.0, startTimeNanos=66513388054066}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@46002b30'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513385847618}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@459a2fb0'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.006200525, duration(nanos)=6200525.0, startTimeNanos=66513385640890}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@26f25614'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"7dd1f6cb-2652-4a47-a2c2-60ec2c6a907a", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.087 | 2025-04-17T12:55:16.087Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.087 | 2025-04-17T12:55:16.087Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-19, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images, method=GET}
2025-04-17 19:55:16.087 | 2025-04-17T12:55:16.087Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-19, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.088 | 2025-04-17T12:55:16.088Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-19, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.097 | 2025-04-17T12:55:16.096Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-19, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.097 | HTTP/1.1 200 
2025-04-17 19:55:16.097 | Content-Type: <filtered>
2025-04-17 19:55:16.097 | Transfer-Encoding: <filtered>
2025-04-17 19:55:16.097 | Date: <filtered>
2025-04-17 19:55:16.097 | 2025-04-17T12:55:16.096Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-19, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.097 | 2025-04-17T12:55:16.097Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.097 | 2025-04-17T12:55:16.097Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.010706282, duration(nanos)=1.0706282E7, startTimeNanos=66513391580605}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5ee0e0f4'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.014268803, duration(nanos)=1.4268803E7, startTimeNanos=66513388054066}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@46002b30'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513385847618}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@459a2fb0'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.016754922, duration(nanos)=1.6754922E7, startTimeNanos=66513385640890}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@26f25614'], parentObservation=null}}}}
2025-04-17 19:55:16.098 | 2025-04-17T12:55:16.097Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-19, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.098 | 2025-04-17T12:55:16.098Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-19, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.098 | 2025-04-17T12:55:16.098Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.099 | 2025-04-17T12:55:16.098Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.099 | 2025-04-17T12:55:16.098Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.099 | 2025-04-17T12:55:16.099Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.099 | 2025-04-17T12:55:16.099Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images - 200 in 15 ms [request_id: 7dd1f6cb-2652-4a47-a2c2-60ec2c6a907a]
2025-04-17 19:55:16.099 | 2025-04-17T12:55:16.099Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-25] Completed 200 OK
2025-04-17 19:55:16.099 | 2025-04-17T12:55:16.099Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-16, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:16.099 | 2025-04-17T12:55:16.099Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-16, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:16.099 | 2025-04-17T12:55:16.099Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-16, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.099 | 2025-04-17T12:55:16.099Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-16, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.102 | 2025-04-17T12:55:16.102Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:16.102 | 2025-04-17T12:55:16.102Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-17, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.102 | 2025-04-17T12:55:16.102Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-26] HTTP GET "/api/images/statistics"
2025-04-17 19:55:16.103 | 2025-04-17T12:55:16.103Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-17, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.103 | 2025-04-17T12:55:16.103Z DEBUG 1 --- [     parallel-1] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.103 | 2025-04-17T12:55:16.103Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.103 | 2025-04-17T12:55:16.103Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'POST /logout'
2025-04-17 19:55:16.103 | 2025-04-17T12:55:16.103Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/statistics' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/statistics'; against '/api/**'
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/statistics' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.104 | 2025-04-17T12:55:16.104Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.105 | 2025-04-17T12:55:16.105Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.105 | 2025-04-17T12:55:16.105Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/statistics] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.105 | 2025-04-17T12:55:16.105Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-26] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.105 | 2025-04-17T12:55:16.105Z DEBUG 1 --- [     parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.105 | 2025-04-17T12:55:16.105Z  INFO 1 --- [     parallel-1] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/statistics from 172.18.0.1 [request_id: ed75ee24-1654-429d-8ae2-72502d31fe96]
2025-04-17 19:55:16.106 | 2025-04-17T12:55:16.105Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-17, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.107 | 2025-04-17T12:55:16.107Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=98, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.108 | 2025-04-17T12:55:16.107Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"ed75ee24-1654-429d-8ae2-72502d31fe96", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.108 | 2025-04-17T12:55:16.108Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/statistics'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=4.4122E-5, duration(nanos)=44122.0, startTimeNanos=66513413020238}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7f4ce57e'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.003211457, duration(nanos)=3211457.0, startTimeNanos=66513409897135}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3852080c'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513408181768}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2ca15719'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/statistics'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.005199715, duration(nanos)=5199715.0, startTimeNanos=66513407959219}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@18d7f66f'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"ed75ee24-1654-429d-8ae2-72502d31fe96", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.108 | 2025-04-17T12:55:16.108Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.108 | 2025-04-17T12:55:16.108Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-20, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/statistics, method=GET}
2025-04-17 19:55:16.108 | 2025-04-17T12:55:16.108Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-20, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/statistics, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.109 | 2025-04-17T12:55:16.109Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-20, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/statistics, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.113 | 2025-04-17T12:55:16.113Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-20, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.113 | HTTP/1.1 404 
2025-04-17 19:55:16.113 | Content-Length: <filtered>
2025-04-17 19:55:16.113 | Date: <filtered>
2025-04-17 19:55:16.113 | 2025-04-17T12:55:16.113Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-20, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/statistics, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.113 | 2025-04-17T12:55:16.113Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.113 | 2025-04-17T12:55:16.113Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/statistics'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.005514478, duration(nanos)=5514478.0, startTimeNanos=66513413020238}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7f4ce57e'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.008690203, duration(nanos)=8690203.0, startTimeNanos=66513409897135}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3852080c'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513408181768}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2ca15719'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/statistics'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.010705352, duration(nanos)=1.0705352E7, startTimeNanos=66513407959219}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@18d7f66f'], parentObservation=null}}}}
2025-04-17 19:55:16.114 | 2025-04-17T12:55:16.114Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-20, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.114 | 2025-04-17T12:55:16.114Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-20, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.114 | 2025-04-17T12:55:16.114Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/statistics, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.114 | 2025-04-17T12:55:16.114Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/statistics, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.114 | 2025-04-17T12:55:16.114Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.114 | 2025-04-17T12:55:16.114Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-17, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:16.114 | 2025-04-17T12:55:16.114Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.115 | 2025-04-17T12:55:16.114Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/statistics - 404 in 9 ms [request_id: ed75ee24-1654-429d-8ae2-72502d31fe96]
2025-04-17 19:55:16.115 | 2025-04-17T12:55:16.115Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-26] Completed 404 NOT_FOUND
2025-04-17 19:55:16.115 | 2025-04-17T12:55:16.115Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-17, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:16.115 | 2025-04-17T12:55:16.115Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-17, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.115 | 2025-04-17T12:55:16.115Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-17, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.139 | 2025-04-17T12:55:16.139Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:16.139 | 2025-04-17T12:55:16.139Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-18, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.140 | 2025-04-17T12:55:16.139Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-27] HTTP GET "/api/images/4e23a893-9a2d-4673-970c-d38e56355413"
2025-04-17 19:55:16.141 | 2025-04-17T12:55:16.140Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-18, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.141 | 2025-04-17T12:55:16.141Z DEBUG 1 --- [     parallel-3] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.141 | 2025-04-17T12:55:16.141Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.141 | 2025-04-17T12:55:16.141Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'POST /logout'
2025-04-17 19:55:16.141 | 2025-04-17T12:55:16.141Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.141 | 2025-04-17T12:55:16.141Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Increasing pending responses, now 1
2025-04-17 19:55:16.141 | 2025-04-17T12:55:16.141Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.141 | 2025-04-17T12:55:16.141Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.141 | 2025-04-17T12:55:16.141Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.141 | 2025-04-17T12:55:16.141Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.141 | 2025-04-17T12:55:16.141Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.141 | 2025-04-17T12:55:16.141Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.141 | 2025-04-17T12:55:16.141Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.http.server.HttpServer     : [ee29768f-4, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.141Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.141Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.141Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [or-http-epoll-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ee29768f-28] HTTP GET "/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b"
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/4e23a893-9a2d-4673-970c-d38e56355413'; against '/api/**'
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.ReactorNetty               : [ee29768f-4, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.142 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/4e23a893-9a2d-4673-970c-d38e56355413' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-4] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.142Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'POST /logout'
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/4e23a893-9a2d-4673-970c-d38e56355413] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-27] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.143 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.144 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.144 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b'; against '/api/**'
2025-04-17 19:55:16.144 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.144 | 2025-04-17T12:55:16.143Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.144 | 2025-04-17T12:55:16.144Z DEBUG 1 --- [     parallel-4] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.144 | 2025-04-17T12:55:16.144Z  INFO 1 --- [     parallel-3] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413 from 172.18.0.1 [request_id: e8548eaa-8737-4b52-a88b-79492c7bd3b2]
2025-04-17 19:55:16.144 | 2025-04-17T12:55:16.144Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.144 | 2025-04-17T12:55:16.144Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-18, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.145 | 2025-04-17T12:55:16.144Z DEBUG 1 --- [     parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.145 | 2025-04-17T12:55:16.144Z DEBUG 1 --- [     parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.145 | 2025-04-17T12:55:16.145Z DEBUG 1 --- [     parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [ee29768f-28] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.145 | 2025-04-17T12:55:16.145Z DEBUG 1 --- [     parallel-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.145 | 2025-04-17T12:55:16.145Z  INFO 1 --- [     parallel-4] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b from 172.18.0.1 [request_id: 0fab568e-9900-4313-9ad3-02c55e5d8de3]
2025-04-17 19:55:16.145 | 2025-04-17T12:55:16.145Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.channel.FluxReceive        : [ee29768f-4, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.145 | 2025-04-17T12:55:16.145Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=97, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.146 | 2025-04-17T12:55:16.146Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"e8548eaa-8737-4b52-a88b-79492c7bd3b2", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.146 | 2025-04-17T12:55:16.146Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/4e23a893-9a2d-4673-970c-d38e56355413'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=5.1132E-5, duration(nanos)=51132.0, startTimeNanos=66513451071363}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@28971e'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.003103653, duration(nanos)=3103653.0, startTimeNanos=66513448077184}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2812ed7f'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513445510573}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@ead6efb'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/4e23a893-9a2d-4673-970c-d38e56355413'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.00608361, duration(nanos)=6083610.0, startTimeNanos=66513445174420}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@29ee95cf'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"e8548eaa-8737-4b52-a88b-79492c7bd3b2", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.146 | 2025-04-17T12:55:16.146Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.146 | 2025-04-17T12:55:16.146Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-21, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/4e23a893-9a2d-4673-970c-d38e56355413, method=GET}
2025-04-17 19:55:16.147 | 2025-04-17T12:55:16.146Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-21, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/4e23a893-9a2d-4673-970c-d38e56355413, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.147 | 2025-04-17T12:55:16.147Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=96, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.147 | 2025-04-17T12:55:16.147Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-21, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/4e23a893-9a2d-4673-970c-d38e56355413, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.147 | 2025-04-17T12:55:16.147Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"0fab568e-9900-4313-9ad3-02c55e5d8de3", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43082"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.148 | 2025-04-17T12:55:16.148Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=4.5112E-5, duration(nanos)=45112.0, startTimeNanos=66513452864564}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6d3a778b'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.003748088, duration(nanos)=3748088.0, startTimeNanos=66513449208849}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@52fc0646'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513447474891}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@37c36054'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.005825541, duration(nanos)=5825541.0, startTimeNanos=66513447215510}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6a5edb8e'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"0fab568e-9900-4313-9ad3-02c55e5d8de3", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43082"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.149 | 2025-04-17T12:55:16.148Z DEBUG 1 --- [r-http-epoll-11] r.n.resources.PooledConnectionProvider   : [3f274513] Created a new pooled channel, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.149 | 2025-04-17T12:55:16.149Z DEBUG 1 --- [r-http-epoll-11] r.netty.transport.TransportConfig        : [3f274513] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpClientCodec), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.150 | 2025-04-17T12:55:16.150Z DEBUG 1 --- [r-http-epoll-11] r.netty.transport.TransportConnector     : [3f274513] Connecting to [image-storage/172.18.0.6:8081].
2025-04-17 19:55:16.151 | 2025-04-17T12:55:16.151Z DEBUG 1 --- [r-http-epoll-11] r.n.r.DefaultPooledConnectionProvider    : [3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] Registering pool release on close event for channel
2025-04-17 19:55:16.151 | 2025-04-17T12:55:16.151Z DEBUG 1 --- [r-http-epoll-11] r.n.resources.PooledConnectionProvider   : [3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] Channel connected, now: 2 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.151 | 2025-04-17T12:55:16.151Z DEBUG 1 --- [r-http-epoll-11] r.n.r.DefaultPooledConnectionProvider    : [3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] onStateChange(PooledConnection{channel=[id: 0x3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081]}, [connected])
2025-04-17 19:55:16.151 | 2025-04-17T12:55:16.151Z DEBUG 1 --- [r-http-epoll-11] r.n.r.DefaultPooledConnectionProvider    : [3f274513-1, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=null, connection=PooledConnection{channel=[id: 0x3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081]}}, [configured])
2025-04-17 19:55:16.151 | 2025-04-17T12:55:16.151Z DEBUG 1 --- [r-http-epoll-11] r.netty.http.client.HttpClientConnect    : [3f274513-1, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b, method=GET}
2025-04-17 19:55:16.151 | 2025-04-17T12:55:16.151Z DEBUG 1 --- [r-http-epoll-11] r.n.r.DefaultPooledConnectionProvider    : [3f274513-1, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b, connection=PooledConnection{channel=[id: 0x3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.158 | 2025-04-17T12:55:16.157Z DEBUG 1 --- [r-http-epoll-12] r.n.http.server.HttpServerOperations     : [223f8fcd, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] New http connection, requesting read
2025-04-17 19:55:16.158 | 2025-04-17T12:55:16.157Z DEBUG 1 --- [r-http-epoll-12] r.netty.transport.TransportConfig        : [223f8fcd, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.161 | 2025-04-17T12:55:16.161Z DEBUG 1 --- [or-http-epoll-1] r.n.http.server.HttpServerOperations     : [81d56ebf, L:/172.18.0.10:8082 - R:/172.18.0.1:39754] New http connection, requesting read
2025-04-17 19:55:16.161 | 2025-04-17T12:55:16.161Z DEBUG 1 --- [or-http-epoll-1] r.netty.transport.TransportConfig        : [81d56ebf, L:/172.18.0.10:8082 - R:/172.18.0.1:39754] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.162 | 2025-04-17T12:55:16.162Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [22257ceb, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] New http connection, requesting read
2025-04-17 19:55:16.162 | 2025-04-17T12:55:16.162Z DEBUG 1 --- [or-http-epoll-2] r.netty.transport.TransportConfig        : [22257ceb, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.162 | 2025-04-17T12:55:16.162Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [e2b5a180, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] New http connection, requesting read
2025-04-17 19:55:16.162 | 2025-04-17T12:55:16.162Z DEBUG 1 --- [or-http-epoll-3] r.netty.transport.TransportConfig        : [e2b5a180, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.162 | 2025-04-17T12:55:16.162Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [e2b5a180, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Increasing pending responses, now 1
2025-04-17 19:55:16.162 | 2025-04-17T12:55:16.162Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.http.server.HttpServer     : [e2b5a180-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.163 | 2025-04-17T12:55:16.163Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e2b5a180-29] HTTP GET "/api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef"
2025-04-17 19:55:16.176 | 2025-04-17T12:55:16.175Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-21, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.176 | HTTP/1.1 200 
2025-04-17 19:55:16.176 | Content-Type: <filtered>
2025-04-17 19:55:16.176 | Content-Length: <filtered>
2025-04-17 19:55:16.176 | Date: <filtered>
2025-04-17 19:55:16.176 | 2025-04-17T12:55:16.176Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-21, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/4e23a893-9a2d-4673-970c-d38e56355413, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.176 | 2025-04-17T12:55:16.176Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [22257ceb, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Increasing pending responses, now 1
2025-04-17 19:55:16.176 | 2025-04-17T12:55:16.176Z DEBUG 1 --- [or-http-epoll-2] reactor.netty.http.server.HttpServer     : [22257ceb-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.176 | 2025-04-17T12:55:16.176Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.ReactorNetty               : [e2b5a180-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.176 | 2025-04-17T12:55:16.176Z DEBUG 1 --- [     parallel-7] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.177 | 2025-04-17T12:55:16.177Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.177 | 2025-04-17T12:55:16.177Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef' doesn't match 'POST /logout'
2025-04-17 19:55:16.177 | 2025-04-17T12:55:16.177Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.177 | 2025-04-17T12:55:16.177Z DEBUG 1 --- [or-http-epoll-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [22257ceb-30] HTTP GET "/api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047"
2025-04-17 19:55:16.178 | 2025-04-17T12:55:16.178Z DEBUG 1 --- [     parallel-8] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.178 | 2025-04-17T12:55:16.178Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.178 | 2025-04-17T12:55:16.178Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047' doesn't match 'POST /logout'
2025-04-17 19:55:16.178 | 2025-04-17T12:55:16.178Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.178 | 2025-04-17T12:55:16.178Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.178 | 2025-04-17T12:55:16.178Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.178 | 2025-04-17T12:55:16.178Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.178 | 2025-04-17T12:55:16.178Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.178 | 2025-04-17T12:55:16.178Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.178 | 2025-04-17T12:55:16.178Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.178 | 2025-04-17T12:55:16.178Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.178 | 2025-04-17T12:55:16.178Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.178 | 2025-04-17T12:55:16.178Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.179 | 2025-04-17T12:55:16.178Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.179 | 2025-04-17T12:55:16.179Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.179 | 2025-04-17T12:55:16.179Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.179 | 2025-04-17T12:55:16.179Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.179 | 2025-04-17T12:55:16.179Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.179 | 2025-04-17T12:55:16.179Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.179 | 2025-04-17T12:55:16.179Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.179 | 2025-04-17T12:55:16.179Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.179 | 2025-04-17T12:55:16.179Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.179 | 2025-04-17T12:55:16.179Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.179 | 2025-04-17T12:55:16.179Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.179 | 2025-04-17T12:55:16.179Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.179 | 2025-04-17T12:55:16.179Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.179 | 2025-04-17T12:55:16.179Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.179 | 2025-04-17T12:55:16.179Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.179 | 2025-04-17T12:55:16.179Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.187 | 2025-04-17T12:55:16.178Z DEBUG 1 --- [or-http-epoll-2] reactor.netty.ReactorNetty               : [22257ceb-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.187 | 2025-04-17T12:55:16.187Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047'; against '/api/**'
2025-04-17 19:55:16.187 | 2025-04-17T12:55:16.187Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.187 | 2025-04-17T12:55:16.187Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.187 | 2025-04-17T12:55:16.187Z DEBUG 1 --- [     parallel-8] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.187 | 2025-04-17T12:55:16.187Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.187 | 2025-04-17T12:55:16.187Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.187 | 2025-04-17T12:55:16.187Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.187 | 2025-04-17T12:55:16.187Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.187 | 2025-04-17T12:55:16.187Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.187 | 2025-04-17T12:55:16.187Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.187 | 2025-04-17T12:55:16.187Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.187 | 2025-04-17T12:55:16.187Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.187Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.187Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.187Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/4e23a893-9a2d-4673-970c-d38e56355413'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.041580694, duration(nanos)=4.1580694E7, startTimeNanos=66513451071363}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@28971e'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.044661767, duration(nanos)=4.4661767E7, startTimeNanos=66513448077184}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2812ed7f'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513445510573}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@ead6efb'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/4e23a893-9a2d-4673-970c-d38e56355413'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.047685665, duration(nanos)=4.7685665E7, startTimeNanos=66513445174420}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@29ee95cf'], parentObservation=null}}}}
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.187Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-21, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef'; against '/api/**'
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.188 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.189 | 2025-04-17T12:55:16.188Z DEBUG 1 --- [     parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.189 | 2025-04-17T12:55:16.189Z DEBUG 1 --- [     parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [22257ceb-30] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.189 | 2025-04-17T12:55:16.189Z DEBUG 1 --- [     parallel-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.189 | 2025-04-17T12:55:16.189Z  INFO 1 --- [     parallel-8] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047 from 172.18.0.1 [request_id: 8b755e28-d053-47f3-b4e0-f9c4283b82d1]
2025-04-17 19:55:16.189 | 2025-04-17T12:55:16.189Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.189 | 2025-04-17T12:55:16.189Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.189 | 2025-04-17T12:55:16.189Z DEBUG 1 --- [or-http-epoll-2] reactor.netty.channel.FluxReceive        : [22257ceb-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.189 | 2025-04-17T12:55:16.189Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [e2b5a180-29] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.189 | 2025-04-17T12:55:16.189Z DEBUG 1 --- [     parallel-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.190 | 2025-04-17T12:55:16.189Z  INFO 1 --- [     parallel-7] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef from 172.18.0.1 [request_id: 13511079-e7f7-45e8-949b-22eb5abb3ed0]
2025-04-17 19:55:16.190 | 2025-04-17T12:55:16.190Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.channel.FluxReceive        : [e2b5a180-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.191 | 2025-04-17T12:55:16.190Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=95, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.191 | 2025-04-17T12:55:16.191Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"8b755e28-d053-47f3-b4e0-f9c4283b82d1", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39756"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.192 | 2025-04-17T12:55:16.192Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=8.0523E-5, duration(nanos)=80523.0, startTimeNanos=66513496858893}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@54e67f61'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.004110512, duration(nanos)=4110512.0, startTimeNanos=66513492895537}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@669a8d8d'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513482738905}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4af790ca'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.014586587, duration(nanos)=1.4586587E7, startTimeNanos=66513482515536}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@56e9b0b1'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"8b755e28-d053-47f3-b4e0-f9c4283b82d1", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39756"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.193 | 2025-04-17T12:55:16.193Z DEBUG 1 --- [or-http-epoll-4] r.n.resources.PooledConnectionProvider   : [f875d97f] Created a new pooled channel, now: 2 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.193 | 2025-04-17T12:55:16.193Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=94, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.193 | 2025-04-17T12:55:16.193Z DEBUG 1 --- [or-http-epoll-4] r.netty.transport.TransportConfig        : [f875d97f] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpClientCodec), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.194 | 2025-04-17T12:55:16.193Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"13511079-e7f7-45e8-949b-22eb5abb3ed0", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39762"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.194 | 2025-04-17T12:55:16.194Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=5.0492E-5, duration(nanos)=50492.0, startTimeNanos=66513498997008}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3193c07a'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.005263678, duration(nanos)=5263678.0, startTimeNanos=66513493839194}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@357c520'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513480776597}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@75d06440'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.030904432, duration(nanos)=3.0904432E7, startTimeNanos=66513468300534}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6e273e73'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"13511079-e7f7-45e8-949b-22eb5abb3ed0", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39762"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.194 | 2025-04-17T12:55:16.194Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [a01001af] Created a new pooled channel, now: 2 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.195 | 2025-04-17T12:55:16.195Z DEBUG 1 --- [r-http-epoll-12] r.n.http.server.HttpServerOperations     : [223f8fcd, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Increasing pending responses, now 1
2025-04-17 19:55:16.195 | 2025-04-17T12:55:16.195Z DEBUG 1 --- [or-http-epoll-5] r.netty.transport.TransportConfig        : [a01001af] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpClientCodec), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.195 | 2025-04-17T12:55:16.195Z DEBUG 1 --- [r-http-epoll-12] reactor.netty.http.server.HttpServer     : [223f8fcd-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.195 | 2025-04-17T12:55:16.195Z DEBUG 1 --- [r-http-epoll-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [223f8fcd-31] HTTP GET "/api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879"
2025-04-17 19:55:16.196 | 2025-04-17T12:55:16.195Z DEBUG 1 --- [or-http-epoll-4] r.netty.transport.TransportConnector     : [f875d97f] Connecting to [image-storage/172.18.0.6:8081].
2025-04-17 19:55:16.196 | 2025-04-17T12:55:16.195Z DEBUG 1 --- [or-http-epoll-5] r.netty.transport.TransportConnector     : [a01001af] Connecting to [image-storage/172.18.0.6:8081].
2025-04-17 19:55:16.196 | 2025-04-17T12:55:16.196Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Registering pool release on close event for channel
2025-04-17 19:55:16.196 | 2025-04-17T12:55:16.196Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Channel connected, now: 3 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.196 | 2025-04-17T12:55:16.196Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}, [connected])
2025-04-17 19:55:16.196 | 2025-04-17T12:55:16.196Z DEBUG 1 --- [    parallel-11] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.196 | 2025-04-17T12:55:16.196Z DEBUG 1 --- [r-http-epoll-12] reactor.netty.ReactorNetty               : [223f8fcd-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.196 | 2025-04-17T12:55:16.196Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af-1, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=null, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [configured])
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.196Z DEBUG 1 --- [or-http-epoll-5] r.netty.http.client.HttpClientConnect    : [a01001af-1, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef, method=GET}
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.196Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af-1, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879' doesn't match 'POST /logout'
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af-1, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.197 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.197Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Registering pool release on close event for channel
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [or-http-epoll-4] r.n.resources.PooledConnectionProvider   : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Channel connected, now: 4 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}, [connected])
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879'; against '/api/**'
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [    parallel-11] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.198 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.199 | 2025-04-17T12:55:16.198Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f-1, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=null, connection=PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}}, [configured])
2025-04-17 19:55:16.199 | 2025-04-17T12:55:16.199Z DEBUG 1 --- [or-http-epoll-4] r.netty.http.client.HttpClientConnect    : [f875d97f-1, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047, method=GET}
2025-04-17 19:55:16.199 | 2025-04-17T12:55:16.199Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f-1, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047, connection=PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.200 | 2025-04-17T12:55:16.200Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f-1, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047, connection=PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.200 | 2025-04-17T12:55:16.200Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.200 | 2025-04-17T12:55:16.200Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.200 | 2025-04-17T12:55:16.200Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [223f8fcd-31] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.200 | 2025-04-17T12:55:16.200Z DEBUG 1 --- [    parallel-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.201 | 2025-04-17T12:55:16.200Z  INFO 1 --- [    parallel-11] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879 from 172.18.0.1 [request_id: 5dd8b690-0f21-4aab-a101-c1d9ed518abb]
2025-04-17 19:55:16.202 | 2025-04-17T12:55:16.201Z DEBUG 1 --- [r-http-epoll-12] reactor.netty.channel.FluxReceive        : [223f8fcd-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.203 | 2025-04-17T12:55:16.202Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-21, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.203 | 2025-04-17T12:55:16.203Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/4e23a893-9a2d-4673-970c-d38e56355413, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.203 | 2025-04-17T12:55:16.203Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/4e23a893-9a2d-4673-970c-d38e56355413, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.203 | 2025-04-17T12:55:16.203Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.203 | 2025-04-17T12:55:16.203Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 3 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.204 | 2025-04-17T12:55:16.204Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/4e23a893-9a2d-4673-970c-d38e56355413 - 200 in 60 ms [request_id: e8548eaa-8737-4b52-a88b-79492c7bd3b2]
2025-04-17 19:55:16.205 | 2025-04-17T12:55:16.204Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-27] Completed 200 OK
2025-04-17 19:55:16.205 | 2025-04-17T12:55:16.204Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-18, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:16.205 | 2025-04-17T12:55:16.205Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-18, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:16.205 | 2025-04-17T12:55:16.205Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-18, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.205 | 2025-04-17T12:55:16.205Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-18, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.206 | 2025-04-17T12:55:16.206Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:16.206 | 2025-04-17T12:55:16.206Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-19, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.206 | 2025-04-17T12:55:16.206Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-32] HTTP GET "/api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f"
2025-04-17 19:55:16.207 | 2025-04-17T12:55:16.207Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-19, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.218 | 2025-04-17T12:55:16.217Z DEBUG 1 --- [    parallel-12] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.218 | 2025-04-17T12:55:16.218Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.218 | 2025-04-17T12:55:16.218Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f' doesn't match 'POST /logout'
2025-04-17 19:55:16.218 | 2025-04-17T12:55:16.218Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.218 | 2025-04-17T12:55:16.218Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.219 | 2025-04-17T12:55:16.218Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [a01001af-1, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.219 | HTTP/1.1 200 
2025-04-17 19:55:16.219 | Content-Type: <filtered>
2025-04-17 19:55:16.219 | Content-Length: <filtered>
2025-04-17 19:55:16.219 | Date: <filtered>
2025-04-17 19:55:16.219 | 2025-04-17T12:55:16.218Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af-1, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.219 | 2025-04-17T12:55:16.219Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=93, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.219 | 2025-04-17T12:55:16.219Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.219 | 2025-04-17T12:55:16.219Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.025201085, duration(nanos)=2.5201085E7, startTimeNanos=66513498997008}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3193c07a'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.030479764, duration(nanos)=3.0479764E7, startTimeNanos=66513493839194}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@357c520'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513480776597}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@75d06440'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.056107187, duration(nanos)=5.6107187E7, startTimeNanos=66513468300534}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6e273e73'], parentObservation=null}}}}
2025-04-17 19:55:16.219 | 2025-04-17T12:55:16.219Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"5dd8b690-0f21-4aab-a101-c1d9ed518abb", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39748"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.220 | 2025-04-17T12:55:16.220Z DEBUG 1 --- [or-http-epoll-5] reactor.netty.channel.FluxReceive        : [a01001af-1, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.226 | 2025-04-17T12:55:16.225Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [a01001af-1, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.226 | 2025-04-17T12:55:16.225Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.226 | 2025-04-17T12:55:16.225Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.226 | 2025-04-17T12:55:16.226Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.226 | 2025-04-17T12:55:16.226Z  INFO 1 --- [or-http-epoll-3] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/45ade205-26a8-4b43-8193-b8ff851bc8ef - 200 in 37 ms [request_id: 13511079-e7f7-45e8-949b-22eb5abb3ed0]
2025-04-17 19:55:16.226 | 2025-04-17T12:55:16.226Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 2 active connections, 2 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.226 | 2025-04-17T12:55:16.226Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e2b5a180-29] Completed 200 OK
2025-04-17 19:55:16.226 | 2025-04-17T12:55:16.226Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [e2b5a180-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Last HTTP response frame
2025-04-17 19:55:16.226 | 2025-04-17T12:55:16.226Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [e2b5a180-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Decreasing pending responses, now 0
2025-04-17 19:55:16.226 | 2025-04-17T12:55:16.226Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [e2b5a180-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.226 | 2025-04-17T12:55:16.226Z DEBUG 1 --- [or-http-epoll-3] r.netty.channel.ChannelOperations        : [e2b5a180-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.228 | 2025-04-17T12:55:16.228Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [e2b5a180, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Increasing pending responses, now 1
2025-04-17 19:55:16.228 | 2025-04-17T12:55:16.228Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.http.server.HttpServer     : [e2b5a180-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.228 | 2025-04-17T12:55:16.228Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e2b5a180-33] HTTP GET "/api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32"
2025-04-17 19:55:16.229 | 2025-04-17T12:55:16.229Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.ReactorNetty               : [e2b5a180-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.229 | 2025-04-17T12:55:16.229Z DEBUG 1 --- [     parallel-1] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.230 | 2025-04-17T12:55:16.229Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.230 | 2025-04-17T12:55:16.229Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32' doesn't match 'POST /logout'
2025-04-17 19:55:16.230 | 2025-04-17T12:55:16.229Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.235 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.235 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.235 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.235 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.235 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.235 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.235 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.235 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.235 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.235 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.235 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.235 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.235 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.235 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.235 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.235 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=4.6022E-5, duration(nanos)=46022.0, startTimeNanos=66513524872781}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4198a3dd'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.036813915, duration(nanos)=3.6813915E7, startTimeNanos=66513503668033}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7cdb000b'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513501106261}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@adf89b4'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.03990911, duration(nanos)=3.990911E7, startTimeNanos=66513500740055}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5ddcfa3a'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"5dd8b690-0f21-4aab-a101-c1d9ed518abb", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39748"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.235Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f'; against '/api/**'
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32'; against '/api/**'
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 3 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.236 | 2025-04-17T12:55:16.236Z DEBUG 1 --- [     parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.237 | 2025-04-17T12:55:16.237Z DEBUG 1 --- [     parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.237 | 2025-04-17T12:55:16.237Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-22, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879, method=GET}
2025-04-17 19:55:16.237 | 2025-04-17T12:55:16.237Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-22, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.237 | 2025-04-17T12:55:16.237Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-22, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.238 | 2025-04-17T12:55:16.238Z DEBUG 1 --- [    parallel-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.238 | 2025-04-17T12:55:16.238Z DEBUG 1 --- [    parallel-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.238 | 2025-04-17T12:55:16.238Z DEBUG 1 --- [    parallel-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-32] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.238 | 2025-04-17T12:55:16.238Z DEBUG 1 --- [    parallel-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.238 | 2025-04-17T12:55:16.238Z  INFO 1 --- [    parallel-12] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f from 172.18.0.1 [request_id: 48c20f13-19ae-4033-be84-a6c430c48403]
2025-04-17 19:55:16.238 | 2025-04-17T12:55:16.238Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.238 | 2025-04-17T12:55:16.238Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-19, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.239 | 2025-04-17T12:55:16.238Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.239 | 2025-04-17T12:55:16.238Z DEBUG 1 --- [     parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [e2b5a180-33] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.239 | 2025-04-17T12:55:16.239Z DEBUG 1 --- [     parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.239 | 2025-04-17T12:55:16.239Z  INFO 1 --- [     parallel-1] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32 from 172.18.0.1 [request_id: 908603dc-e54c-4f64-8c53-5a89bd4ec79a]
2025-04-17 19:55:16.239 | 2025-04-17T12:55:16.239Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.channel.FluxReceive        : [e2b5a180-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.240 | 2025-04-17T12:55:16.240Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=92, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.241 | 2025-04-17T12:55:16.241Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"48c20f13-19ae-4033-be84-a6c430c48403", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.241 | 2025-04-17T12:55:16.241Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=7.8743E-5, duration(nanos)=78743.0, startTimeNanos=66513546287248}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@595e2c17'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.00430032, duration(nanos)=4300320.0, startTimeNanos=66513542142454}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7da1b46f'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513512100416}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@bc51046'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.034789816, duration(nanos)=3.4789816E7, startTimeNanos=66513511757642}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@31f2362e'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"48c20f13-19ae-4033-be84-a6c430c48403", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.242 | 2025-04-17T12:55:16.241Z DEBUG 1 --- [r-http-epoll-11] r.n.r.DefaultPooledConnectionProvider    : [3f274513-1, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b, connection=PooledConnection{channel=[id: 0x3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.242 | 2025-04-17T12:55:16.242Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 4 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.242 | 2025-04-17T12:55:16.242Z DEBUG 1 --- [or-http-epoll-5] r.netty.http.client.HttpClientConnect    : [a01001af-2, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f, method=GET}
2025-04-17 19:55:16.242 | 2025-04-17T12:55:16.242Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af-2, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.243 | 2025-04-17T12:55:16.242Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af-2, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.243 | 2025-04-17T12:55:16.242Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=91, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.243 | 2025-04-17T12:55:16.243Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"908603dc-e54c-4f64-8c53-5a89bd4ec79a", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39762"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.244 | 2025-04-17T12:55:16.244Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=5.8462E-5, duration(nanos)=58462.0, startTimeNanos=66513548935911}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@19e49a93'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.006820478, duration(nanos)=6820478.0, startTimeNanos=66513542237108}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6916570c'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513534159768}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4a722d48'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.015219091, duration(nanos)=1.5219091E7, startTimeNanos=66513533911588}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6a91316e'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"908603dc-e54c-4f64-8c53-5a89bd4ec79a", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39762"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.245 | 2025-04-17T12:55:16.245Z DEBUG 1 --- [or-http-epoll-6] r.n.resources.PooledConnectionProvider   : [845f779e] Created a new pooled channel, now: 4 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.245 | 2025-04-17T12:55:16.245Z DEBUG 1 --- [or-http-epoll-6] r.netty.transport.TransportConfig        : [845f779e] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpClientCodec), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.249 | 2025-04-17T12:55:16.249Z DEBUG 1 --- [or-http-epoll-6] r.netty.transport.TransportConnector     : [845f779e] Connecting to [image-storage/172.18.0.6:8081].
2025-04-17 19:55:16.249 | 2025-04-17T12:55:16.249Z DEBUG 1 --- [or-http-epoll-4] r.n.http.client.HttpClientOperations     : [f875d97f-1, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.249 | HTTP/1.1 200 
2025-04-17 19:55:16.249 | Content-Type: <filtered>
2025-04-17 19:55:16.249 | Content-Length: <filtered>
2025-04-17 19:55:16.249 | Date: <filtered>
2025-04-17 19:55:16.249 | 2025-04-17T12:55:16.249Z DEBUG 1 --- [or-http-epoll-6] r.n.r.DefaultPooledConnectionProvider    : [845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] Registering pool release on close event for channel
2025-04-17 19:55:16.249 | 2025-04-17T12:55:16.249Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f-1, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047, connection=PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.249 | 2025-04-17T12:55:16.249Z DEBUG 1 --- [or-http-epoll-6] r.n.resources.PooledConnectionProvider   : [845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] Channel connected, now: 5 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.249 | 2025-04-17T12:55:16.249Z DEBUG 1 --- [or-http-epoll-6] r.n.r.DefaultPooledConnectionProvider    : [845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] onStateChange(PooledConnection{channel=[id: 0x845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081]}, [connected])
2025-04-17 19:55:16.249 | 2025-04-17T12:55:16.249Z DEBUG 1 --- [or-http-epoll-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.249 | 2025-04-17T12:55:16.249Z DEBUG 1 --- [or-http-epoll-6] r.n.r.DefaultPooledConnectionProvider    : [845f779e-1, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=null, connection=PooledConnection{channel=[id: 0x845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081]}}, [configured])
2025-04-17 19:55:16.250 | 2025-04-17T12:55:16.249Z DEBUG 1 --- [or-http-epoll-6] r.netty.http.client.HttpClientConnect    : [845f779e-1, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32, method=GET}
2025-04-17 19:55:16.250 | 2025-04-17T12:55:16.250Z DEBUG 1 --- [or-http-epoll-6] r.n.r.DefaultPooledConnectionProvider    : [845f779e-1, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32, connection=PooledConnection{channel=[id: 0x845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.250 | 2025-04-17T12:55:16.250Z DEBUG 1 --- [or-http-epoll-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.058219603, duration(nanos)=5.8219603E7, startTimeNanos=66513496858893}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@54e67f61'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.062268662, duration(nanos)=6.2268662E7, startTimeNanos=66513492895537}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@669a8d8d'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513482738905}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4af790ca'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.072779888, duration(nanos)=7.2779888E7, startTimeNanos=66513482515536}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@56e9b0b1'], parentObservation=null}}}}
2025-04-17 19:55:16.250 | 2025-04-17T12:55:16.250Z DEBUG 1 --- [or-http-epoll-6] r.n.r.DefaultPooledConnectionProvider    : [845f779e-1, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32, connection=PooledConnection{channel=[id: 0x845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.251 | 2025-04-17T12:55:16.251Z DEBUG 1 --- [or-http-epoll-4] reactor.netty.channel.FluxReceive        : [f875d97f-1, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.262 | 2025-04-17T12:55:16.261Z DEBUG 1 --- [or-http-epoll-4] r.n.http.client.HttpClientOperations     : [f875d97f-1, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.262 | 2025-04-17T12:55:16.261Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047, connection=PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.262 | 2025-04-17T12:55:16.261Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047, connection=PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.262 | 2025-04-17T12:55:16.261Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.263 | 2025-04-17T12:55:16.261Z  INFO 1 --- [or-http-epoll-2] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/e3dae3fb-52f1-4be0-81c6-adda8a8fd047 - 200 in 72 ms [request_id: 8b755e28-d053-47f3-b4e0-f9c4283b82d1]
2025-04-17 19:55:16.263 | 2025-04-17T12:55:16.262Z DEBUG 1 --- [or-http-epoll-4] r.n.resources.PooledConnectionProvider   : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 4 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.263 | 2025-04-17T12:55:16.262Z DEBUG 1 --- [or-http-epoll-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [22257ceb-30] Completed 200 OK
2025-04-17 19:55:16.263 | 2025-04-17T12:55:16.262Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [22257ceb-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Last HTTP response frame
2025-04-17 19:55:16.263 | 2025-04-17T12:55:16.262Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [22257ceb-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Decreasing pending responses, now 0
2025-04-17 19:55:16.263 | 2025-04-17T12:55:16.262Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [22257ceb-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.263 | 2025-04-17T12:55:16.262Z DEBUG 1 --- [or-http-epoll-2] r.netty.channel.ChannelOperations        : [22257ceb-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.267 | 2025-04-17T12:55:16.267Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [22257ceb, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Increasing pending responses, now 1
2025-04-17 19:55:16.267 | 2025-04-17T12:55:16.267Z DEBUG 1 --- [or-http-epoll-2] reactor.netty.http.server.HttpServer     : [22257ceb-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.267 | 2025-04-17T12:55:16.267Z DEBUG 1 --- [or-http-epoll-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [22257ceb-34] HTTP GET "/api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7"
2025-04-17 19:55:16.269 | 2025-04-17T12:55:16.268Z DEBUG 1 --- [or-http-epoll-2] reactor.netty.ReactorNetty               : [22257ceb-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.269 | 2025-04-17T12:55:16.269Z DEBUG 1 --- [     parallel-5] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.269 | 2025-04-17T12:55:16.269Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.269 | 2025-04-17T12:55:16.269Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7' doesn't match 'POST /logout'
2025-04-17 19:55:16.269 | 2025-04-17T12:55:16.269Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.270 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.270 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.270 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.270 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.270 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.270 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.270 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.270 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.270 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.270 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.270 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.270Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.271Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.271Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.271Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.271Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.271Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.271Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.271Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.271Z DEBUG 1 --- [     parallel-5] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7'; against '/api/**'
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.271Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.271 | 2025-04-17T12:55:16.271Z DEBUG 1 --- [     parallel-5] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.281 | 2025-04-17T12:55:16.280Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-22, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.281 | HTTP/1.1 200 
2025-04-17 19:55:16.281 | Content-Type: <filtered>
2025-04-17 19:55:16.281 | Content-Length: <filtered>
2025-04-17 19:55:16.281 | Date: <filtered>
2025-04-17 19:55:16.281 | 2025-04-17T12:55:16.281Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-22, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.281 | 2025-04-17T12:55:16.281Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.281 | 2025-04-17T12:55:16.281Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.061513857, duration(nanos)=6.1513857E7, startTimeNanos=66513524872781}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4198a3dd'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.082760897, duration(nanos)=8.2760897E7, startTimeNanos=66513503668033}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7cdb000b'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513501106261}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@adf89b4'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.085768508, duration(nanos)=8.5768508E7, startTimeNanos=66513500740055}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5ddcfa3a'], parentObservation=null}}}}
2025-04-17 19:55:16.285 | 2025-04-17T12:55:16.285Z DEBUG 1 --- [     parallel-5] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.285 | 2025-04-17T12:55:16.285Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-22, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.287 | 2025-04-17T12:55:16.286Z DEBUG 1 --- [     parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.287 | 2025-04-17T12:55:16.287Z DEBUG 1 --- [     parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.287 | 2025-04-17T12:55:16.287Z DEBUG 1 --- [     parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [22257ceb-34] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.287 | 2025-04-17T12:55:16.287Z DEBUG 1 --- [     parallel-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.287 | 2025-04-17T12:55:16.287Z  INFO 1 --- [     parallel-5] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7 from 172.18.0.1 [request_id: 4aef0115-a26c-4dd1-ae62-c5c1fad42265]
2025-04-17 19:55:16.288 | 2025-04-17T12:55:16.287Z DEBUG 1 --- [or-http-epoll-2] reactor.netty.channel.FluxReceive        : [22257ceb-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.289 | 2025-04-17T12:55:16.289Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=90, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.299 | 2025-04-17T12:55:16.298Z DEBUG 1 --- [or-http-epoll-1] r.n.http.server.HttpServerOperations     : [81d56ebf, L:/172.18.0.10:8082 - R:/172.18.0.1:39754] Increasing pending responses, now 1
2025-04-17 19:55:16.299 | 2025-04-17T12:55:16.299Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"4aef0115-a26c-4dd1-ae62-c5c1fad42265", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39756"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.299 | 2025-04-17T12:55:16.299Z DEBUG 1 --- [or-http-epoll-1] reactor.netty.http.server.HttpServer     : [81d56ebf-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39754] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.299 | 2025-04-17T12:55:16.299Z DEBUG 1 --- [or-http-epoll-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [81d56ebf-35] HTTP GET "/api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998"
2025-04-17 19:55:16.299 | 2025-04-17T12:55:16.299Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.05294E-4, duration(nanos)=105294.0, startTimeNanos=66513604271489}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@579c0ead'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.014010233, duration(nanos)=1.4010233E7, startTimeNanos=66513590437453}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@c699d65'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513573325027}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@572ae9cd'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.031612298, duration(nanos)=3.1612298E7, startTimeNanos=66513572967093}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@34d3b807'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"4aef0115-a26c-4dd1-ae62-c5c1fad42265", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39756"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.300 | 2025-04-17T12:55:16.300Z DEBUG 1 --- [or-http-epoll-1] reactor.netty.ReactorNetty               : [81d56ebf-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39754] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.302 | 2025-04-17T12:55:16.300Z DEBUG 1 --- [     parallel-7] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.302 | 2025-04-17T12:55:16.301Z DEBUG 1 --- [or-http-epoll-4] r.n.resources.PooledConnectionProvider   : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 5 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.302 | 2025-04-17T12:55:16.301Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.301Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-22, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.302Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.302Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.302Z DEBUG 1 --- [or-http-epoll-4] r.netty.http.client.HttpClientConnect    : [f875d97f-2, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7, method=GET}
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.302Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.302Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998' doesn't match 'POST /logout'
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.302Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.302Z  INFO 1 --- [r-http-epoll-12] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/f1a4107a-9b23-4e20-a334-c7d7908a2879 - 200 in 102 ms [request_id: 5dd8b690-0f21-4aab-a101-c1d9ed518abb]
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.302Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 4 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f-2, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7, connection=PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [r-http-epoll-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [223f8fcd-31] Completed 200 OK
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [r-http-epoll-12] r.n.http.server.HttpServerOperations     : [223f8fcd-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Last HTTP response frame
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f-2, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7, connection=PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [r-http-epoll-12] r.n.http.server.HttpServerOperations     : [223f8fcd-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Decreasing pending responses, now 0
2025-04-17 19:55:16.303 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [r-http-epoll-12] r.n.http.server.HttpServerOperations     : [223f8fcd-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [r-http-epoll-12] r.netty.channel.ChannelOperations        : [223f8fcd-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.303Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.304Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.304Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998'; against '/api/**'
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.304Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.304 | 2025-04-17T12:55:16.304Z DEBUG 1 --- [     parallel-7] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.305 | 2025-04-17T12:55:16.304Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.305 | 2025-04-17T12:55:16.304Z DEBUG 1 --- [r-http-epoll-12] r.n.http.server.HttpServerOperations     : [223f8fcd, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Increasing pending responses, now 1
2025-04-17 19:55:16.305 | 2025-04-17T12:55:16.304Z DEBUG 1 --- [r-http-epoll-12] reactor.netty.http.server.HttpServer     : [223f8fcd-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.305 | 2025-04-17T12:55:16.305Z DEBUG 1 --- [r-http-epoll-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [223f8fcd-36] HTTP GET "/api/images/077ec874-2df1-459b-aab9-6e9e1e75d610"
2025-04-17 19:55:16.305 | 2025-04-17T12:55:16.305Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.305 | 2025-04-17T12:55:16.305Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.305 | 2025-04-17T12:55:16.305Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [81d56ebf-35] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.305Z DEBUG 1 --- [     parallel-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.305Z DEBUG 1 --- [r-http-epoll-12] reactor.netty.ReactorNetty               : [223f8fcd-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/077ec874-2df1-459b-aab9-6e9e1e75d610' doesn't match 'POST /logout'
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/077ec874-2df1-459b-aab9-6e9e1e75d610' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/077ec874-2df1-459b-aab9-6e9e1e75d610' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/077ec874-2df1-459b-aab9-6e9e1e75d610' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/077ec874-2df1-459b-aab9-6e9e1e75d610' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/077ec874-2df1-459b-aab9-6e9e1e75d610' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/077ec874-2df1-459b-aab9-6e9e1e75d610' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.306 | 2025-04-17T12:55:16.306Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.307 | 2025-04-17T12:55:16.307Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.307 | 2025-04-17T12:55:16.307Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/077ec874-2df1-459b-aab9-6e9e1e75d610' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.307 | 2025-04-17T12:55:16.307Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.307 | 2025-04-17T12:55:16.307Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.307 | 2025-04-17T12:55:16.307Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/077ec874-2df1-459b-aab9-6e9e1e75d610' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.307 | 2025-04-17T12:55:16.307Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.307 | 2025-04-17T12:55:16.307Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/077ec874-2df1-459b-aab9-6e9e1e75d610' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.307 | 2025-04-17T12:55:16.307Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.307 | 2025-04-17T12:55:16.307Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/077ec874-2df1-459b-aab9-6e9e1e75d610' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.307 | 2025-04-17T12:55:16.307Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.307 | 2025-04-17T12:55:16.307Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.307 | 2025-04-17T12:55:16.307Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/077ec874-2df1-459b-aab9-6e9e1e75d610'; against '/api/**'
2025-04-17 19:55:16.307 | 2025-04-17T12:55:16.307Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.307 | 2025-04-17T12:55:16.307Z DEBUG 1 --- [     parallel-8] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/077ec874-2df1-459b-aab9-6e9e1e75d610' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.307 | 2025-04-17T12:55:16.307Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.308 | 2025-04-17T12:55:16.308Z DEBUG 1 --- [     parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.309 | 2025-04-17T12:55:16.309Z DEBUG 1 --- [     parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/077ec874-2df1-459b-aab9-6e9e1e75d610] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.309 | 2025-04-17T12:55:16.309Z DEBUG 1 --- [     parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [223f8fcd-36] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.309 | 2025-04-17T12:55:16.309Z DEBUG 1 --- [     parallel-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.309 | 2025-04-17T12:55:16.309Z  INFO 1 --- [     parallel-7] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998 from 172.18.0.1 [request_id: 422a7ca5-5b51-4ae1-b3a9-7ab3b62b4b74]
2025-04-17 19:55:16.309 | 2025-04-17T12:55:16.309Z  INFO 1 --- [     parallel-8] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/077ec874-2df1-459b-aab9-6e9e1e75d610 from 172.18.0.1 [request_id: 1ef5c6e2-a838-4869-a996-8eb9587a56af]
2025-04-17 19:55:16.309 | 2025-04-17T12:55:16.309Z DEBUG 1 --- [or-http-epoll-1] reactor.netty.channel.FluxReceive        : [81d56ebf-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39754] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.309 | 2025-04-17T12:55:16.309Z DEBUG 1 --- [r-http-epoll-12] reactor.netty.channel.FluxReceive        : [223f8fcd-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.311 | 2025-04-17T12:55:16.310Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=89, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.311 | 2025-04-17T12:55:16.311Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"1ef5c6e2-a838-4869-a996-8eb9587a56af", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39748"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.312 | 2025-04-17T12:55:16.312Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/077ec874-2df1-459b-aab9-6e9e1e75d610'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=8.5673E-5, duration(nanos)=85673.0, startTimeNanos=66513616793426}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@38d2156'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.004167174, duration(nanos)=4167174.0, startTimeNanos=66513612772897}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@434f16f7'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513610520628}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@432bfbd2'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/077ec874-2df1-459b-aab9-6e9e1e75d610'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.006702915, duration(nanos)=6702915.0, startTimeNanos=66513610327600}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6a116030'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"1ef5c6e2-a838-4869-a996-8eb9587a56af", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39748"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.312 | 2025-04-17T12:55:16.312Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 5 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.313 | 2025-04-17T12:55:16.312Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-23, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/077ec874-2df1-459b-aab9-6e9e1e75d610, method=GET}
2025-04-17 19:55:16.313 | 2025-04-17T12:55:16.313Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-23, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/077ec874-2df1-459b-aab9-6e9e1e75d610, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.313 | 2025-04-17T12:55:16.313Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=88, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.313 | 2025-04-17T12:55:16.313Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-23, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/077ec874-2df1-459b-aab9-6e9e1e75d610, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.313 | 2025-04-17T12:55:16.313Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"422a7ca5-5b51-4ae1-b3a9-7ab3b62b4b74", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39754"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.314 | 2025-04-17T12:55:16.314Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=5.4893E-5, duration(nanos)=54893.0, startTimeNanos=66513618917229}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@fc7bb5'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.009582079, duration(nanos)=9582079.0, startTimeNanos=66513609445695}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3b3f2df3'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513604807082}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@27d6b42d'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.01467574, duration(nanos)=1.467574E7, startTimeNanos=66513604451948}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@46274007'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"422a7ca5-5b51-4ae1-b3a9-7ab3b62b4b74", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39754"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.314 | 2025-04-17T12:55:16.314Z DEBUG 1 --- [or-http-epoll-7] r.n.resources.PooledConnectionProvider   : [1b7ee7b8] Created a new pooled channel, now: 5 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.315 | 2025-04-17T12:55:16.314Z DEBUG 1 --- [or-http-epoll-7] r.netty.transport.TransportConfig        : [1b7ee7b8] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpClientCodec), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.316 | 2025-04-17T12:55:16.315Z DEBUG 1 --- [or-http-epoll-7] r.netty.transport.TransportConnector     : [1b7ee7b8] Connecting to [image-storage/172.18.0.6:8081].
2025-04-17 19:55:16.316 | 2025-04-17T12:55:16.316Z DEBUG 1 --- [or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [1b7ee7b8, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081] Registering pool release on close event for channel
2025-04-17 19:55:16.316 | 2025-04-17T12:55:16.316Z DEBUG 1 --- [or-http-epoll-7] r.n.resources.PooledConnectionProvider   : [1b7ee7b8, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081] Channel connected, now: 6 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.316 | 2025-04-17T12:55:16.316Z DEBUG 1 --- [or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [1b7ee7b8, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081] onStateChange(PooledConnection{channel=[id: 0x1b7ee7b8, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081]}, [connected])
2025-04-17 19:55:16.316 | 2025-04-17T12:55:16.316Z DEBUG 1 --- [or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [1b7ee7b8-1, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=null, connection=PooledConnection{channel=[id: 0x1b7ee7b8, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081]}}, [configured])
2025-04-17 19:55:16.316 | 2025-04-17T12:55:16.316Z DEBUG 1 --- [or-http-epoll-7] r.netty.http.client.HttpClientConnect    : [1b7ee7b8-1, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998, method=GET}
2025-04-17 19:55:16.316 | 2025-04-17T12:55:16.316Z DEBUG 1 --- [or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [1b7ee7b8-1, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998, connection=PooledConnection{channel=[id: 0x1b7ee7b8, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.317 | 2025-04-17T12:55:16.317Z DEBUG 1 --- [or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [1b7ee7b8-1, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998, connection=PooledConnection{channel=[id: 0x1b7ee7b8, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.459 | 2025-04-17T12:55:16.459Z DEBUG 1 --- [or-http-epoll-4] r.n.http.client.HttpClientOperations     : [f875d97f-2, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.459 | HTTP/1.1 200 
2025-04-17 19:55:16.459 | Content-Type: <filtered>
2025-04-17 19:55:16.459 | Content-Length: <filtered>
2025-04-17 19:55:16.459 | Date: <filtered>
2025-04-17 19:55:16.459 | 2025-04-17T12:55:16.459Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [a01001af-2, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.459 | HTTP/1.1 200 
2025-04-17 19:55:16.459 | Content-Type: <filtered>
2025-04-17 19:55:16.459 | Content-Length: <filtered>
2025-04-17 19:55:16.459 | Date: <filtered>
2025-04-17 19:55:16.459 | 2025-04-17T12:55:16.459Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f-2, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7, connection=PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.460 | 2025-04-17T12:55:16.459Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af-2, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.460 | 2025-04-17T12:55:16.460Z DEBUG 1 --- [or-http-epoll-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.460 | 2025-04-17T12:55:16.460Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.460 | 2025-04-17T12:55:16.460Z DEBUG 1 --- [or-http-epoll-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.160819376, duration(nanos)=1.60819376E8, startTimeNanos=66513604271489}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@579c0ead'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.174694803, duration(nanos)=1.74694803E8, startTimeNanos=66513590437453}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@c699d65'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513573325027}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@572ae9cd'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.192245467, duration(nanos)=1.92245467E8, startTimeNanos=66513572967093}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@34d3b807'], parentObservation=null}}}}
2025-04-17 19:55:16.460 | 2025-04-17T12:55:16.460Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.218803637, duration(nanos)=2.18803637E8, startTimeNanos=66513546287248}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@595e2c17'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.222989853, duration(nanos)=2.22989853E8, startTimeNanos=66513542142454}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7da1b46f'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513512100416}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@bc51046'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.253469258, duration(nanos)=2.53469258E8, startTimeNanos=66513511757642}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@31f2362e'], parentObservation=null}}}}
2025-04-17 19:55:16.460 | 2025-04-17T12:55:16.460Z DEBUG 1 --- [or-http-epoll-4] reactor.netty.channel.FluxReceive        : [f875d97f-2, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.460 | 2025-04-17T12:55:16.460Z DEBUG 1 --- [or-http-epoll-5] reactor.netty.channel.FluxReceive        : [a01001af-2, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.466 | 2025-04-17T12:55:16.465Z DEBUG 1 --- [or-http-epoll-4] r.n.http.client.HttpClientOperations     : [f875d97f-2, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.466 | 2025-04-17T12:55:16.466Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7, connection=PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.466 | 2025-04-17T12:55:16.466Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7, connection=PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.466 | 2025-04-17T12:55:16.466Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.466 | 2025-04-17T12:55:16.466Z DEBUG 1 --- [or-http-epoll-4] r.n.resources.PooledConnectionProvider   : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 5 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.468 | 2025-04-17T12:55:16.468Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [a01001af-2, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.468 | 2025-04-17T12:55:16.468Z  INFO 1 --- [or-http-epoll-2] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/57063a75-60f7-4e75-974f-eafd9d7d26c7 - 200 in 181 ms [request_id: 4aef0115-a26c-4dd1-ae62-c5c1fad42265]
2025-04-17 19:55:16.468 | 2025-04-17T12:55:16.468Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.468 | 2025-04-17T12:55:16.468Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.468 | 2025-04-17T12:55:16.468Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.469 | 2025-04-17T12:55:16.468Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 4 active connections, 2 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.469 | 2025-04-17T12:55:16.469Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/5172bf0d-9d37-4af5-acba-17f7a9aef02f - 200 in 231 ms [request_id: 48c20f13-19ae-4033-be84-a6c430c48403]
2025-04-17 19:55:16.469 | 2025-04-17T12:55:16.469Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-32] Completed 200 OK
2025-04-17 19:55:16.469 | 2025-04-17T12:55:16.469Z DEBUG 1 --- [or-http-epoll-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [22257ceb-34] Completed 200 OK
2025-04-17 19:55:16.469 | 2025-04-17T12:55:16.469Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-19, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:16.469 | 2025-04-17T12:55:16.469Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [22257ceb-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Last HTTP response frame
2025-04-17 19:55:16.469 | 2025-04-17T12:55:16.469Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-19, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:16.469 | 2025-04-17T12:55:16.469Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [22257ceb-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Decreasing pending responses, now 0
2025-04-17 19:55:16.469 | 2025-04-17T12:55:16.469Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [22257ceb-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.469 | 2025-04-17T12:55:16.469Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-19, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.469 | 2025-04-17T12:55:16.469Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-19, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.471 | 2025-04-17T12:55:16.471Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:16.472 | 2025-04-17T12:55:16.471Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-20, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.473 | 2025-04-17T12:55:16.469Z DEBUG 1 --- [or-http-epoll-2] r.netty.channel.ChannelOperations        : [22257ceb-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.473 | 2025-04-17T12:55:16.471Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-23, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.473 | HTTP/1.1 200 
2025-04-17 19:55:16.473 | Content-Type: <filtered>
2025-04-17 19:55:16.473 | Content-Length: <filtered>
2025-04-17 19:55:16.473 | Date: <filtered>
2025-04-17 19:55:16.473 | 2025-04-17T12:55:16.473Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-23, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/077ec874-2df1-459b-aab9-6e9e1e75d610, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.473 | 2025-04-17T12:55:16.473Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.473 | 2025-04-17T12:55:16.472Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-37] HTTP GET "/api/images/4862a342-e3b3-4d27-ae96-55caf9330814"
2025-04-17 19:55:16.475 | 2025-04-17T12:55:16.472Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [22257ceb, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Increasing pending responses, now 1
2025-04-17 19:55:16.475 | 2025-04-17T12:55:16.474Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/077ec874-2df1-459b-aab9-6e9e1e75d610'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.161959179, duration(nanos)=1.61959179E8, startTimeNanos=66513616793426}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@38d2156'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.166101828, duration(nanos)=1.66101828E8, startTimeNanos=66513612772897}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@434f16f7'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513610520628}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@432bfbd2'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/077ec874-2df1-459b-aab9-6e9e1e75d610'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.168665269, duration(nanos)=1.68665269E8, startTimeNanos=66513610327600}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6a116030'], parentObservation=null}}}}
2025-04-17 19:55:16.475 | 2025-04-17T12:55:16.474Z DEBUG 1 --- [or-http-epoll-2] reactor.netty.http.server.HttpServer     : [22257ceb-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.475 | 2025-04-17T12:55:16.475Z DEBUG 1 --- [or-http-epoll-6] r.n.http.client.HttpClientOperations     : [845f779e-1, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.475 | HTTP/1.1 200 
2025-04-17 19:55:16.475 | Content-Type: <filtered>
2025-04-17 19:55:16.475 | Content-Length: <filtered>
2025-04-17 19:55:16.475 | Date: <filtered>
2025-04-17 19:55:16.475 | 2025-04-17T12:55:16.475Z DEBUG 1 --- [or-http-epoll-6] r.n.r.DefaultPooledConnectionProvider    : [845f779e-1, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32, connection=PooledConnection{channel=[id: 0x845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.475 | 2025-04-17T12:55:16.475Z DEBUG 1 --- [or-http-epoll-6] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.476 | 2025-04-17T12:55:16.476Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-20, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.476 | 2025-04-17T12:55:16.476Z DEBUG 1 --- [or-http-epoll-6] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.231853175, duration(nanos)=2.31853175E8, startTimeNanos=66513548935911}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@19e49a93'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.238584139, duration(nanos)=2.38584139E8, startTimeNanos=66513542237108}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6916570c'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513534159768}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4a722d48'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.247151988, duration(nanos)=2.47151988E8, startTimeNanos=66513533911588}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6a91316e'], parentObservation=null}}}}
2025-04-17 19:55:16.476 | 2025-04-17T12:55:16.476Z DEBUG 1 --- [    parallel-11] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.476 | 2025-04-17T12:55:16.476Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-23, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.476 | 2025-04-17T12:55:16.476Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.477 | 2025-04-17T12:55:16.477Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4862a342-e3b3-4d27-ae96-55caf9330814' doesn't match 'POST /logout'
2025-04-17 19:55:16.477 | 2025-04-17T12:55:16.477Z DEBUG 1 --- [or-http-epoll-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [22257ceb-38] HTTP GET "/api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea"
2025-04-17 19:55:16.477 | 2025-04-17T12:55:16.477Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.477 | 2025-04-17T12:55:16.477Z DEBUG 1 --- [or-http-epoll-6] reactor.netty.channel.FluxReceive        : [845f779e-1, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.477 | 2025-04-17T12:55:16.477Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.477 | 2025-04-17T12:55:16.477Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4862a342-e3b3-4d27-ae96-55caf9330814' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.477Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.477Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4862a342-e3b3-4d27-ae96-55caf9330814' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.477Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4862a342-e3b3-4d27-ae96-55caf9330814' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4862a342-e3b3-4d27-ae96-55caf9330814' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [or-http-epoll-2] reactor.netty.ReactorNetty               : [22257ceb-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4862a342-e3b3-4d27-ae96-55caf9330814' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4862a342-e3b3-4d27-ae96-55caf9330814' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4862a342-e3b3-4d27-ae96-55caf9330814' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-12] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4862a342-e3b3-4d27-ae96-55caf9330814' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea' doesn't match 'POST /logout'
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4862a342-e3b3-4d27-ae96-55caf9330814' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/4862a342-e3b3-4d27-ae96-55caf9330814' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.478 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea'; against '/api/**'
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.479 | 2025-04-17T12:55:16.479Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.480 | 2025-04-17T12:55:16.480Z DEBUG 1 --- [    parallel-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.480 | 2025-04-17T12:55:16.480Z DEBUG 1 --- [    parallel-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.480 | 2025-04-17T12:55:16.480Z DEBUG 1 --- [    parallel-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [22257ceb-38] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.481 | 2025-04-17T12:55:16.480Z DEBUG 1 --- [    parallel-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.481 | 2025-04-17T12:55:16.481Z  INFO 1 --- [    parallel-12] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea from 172.18.0.1 [request_id: 10b03c03-6319-4661-86ea-62397bcdf3df]
2025-04-17 19:55:16.482 | 2025-04-17T12:55:16.478Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/4862a342-e3b3-4d27-ae96-55caf9330814'; against '/api/**'
2025-04-17 19:55:16.482 | 2025-04-17T12:55:16.481Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.482 | 2025-04-17T12:55:16.481Z DEBUG 1 --- [    parallel-11] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/4862a342-e3b3-4d27-ae96-55caf9330814' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.482 | 2025-04-17T12:55:16.482Z DEBUG 1 --- [or-http-epoll-2] reactor.netty.channel.FluxReceive        : [22257ceb-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.482 | 2025-04-17T12:55:16.482Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.483 | 2025-04-17T12:55:16.483Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=87, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.483 | 2025-04-17T12:55:16.483Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.483 | 2025-04-17T12:55:16.483Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/4862a342-e3b3-4d27-ae96-55caf9330814] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.483 | 2025-04-17T12:55:16.483Z DEBUG 1 --- [    parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-37] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.483 | 2025-04-17T12:55:16.483Z DEBUG 1 --- [    parallel-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.484 | 2025-04-17T12:55:16.483Z  INFO 1 --- [    parallel-11] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/4862a342-e3b3-4d27-ae96-55caf9330814 from 172.18.0.1 [request_id: 0329872e-0fbd-4a59-8c22-5e983cbf833f]
2025-04-17 19:55:16.484 | 2025-04-17T12:55:16.483Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"10b03c03-6319-4661-86ea-62397bcdf3df", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39756"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.484 | 2025-04-17T12:55:16.484Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-20, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.484 | 2025-04-17T12:55:16.484Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=8.1833E-5, duration(nanos)=81833.0, startTimeNanos=66513789045682}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@25e5aaa5'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.004507028, duration(nanos)=4507028.0, startTimeNanos=66513784671099}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@67774b5f'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513782776354}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7592fc40'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.006654803, duration(nanos)=6654803.0, startTimeNanos=66513782591347}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@949ad8d'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"10b03c03-6319-4661-86ea-62397bcdf3df", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39756"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.484 | 2025-04-17T12:55:16.484Z DEBUG 1 --- [or-http-epoll-4] r.n.resources.PooledConnectionProvider   : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 5 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.484 | 2025-04-17T12:55:16.484Z DEBUG 1 --- [or-http-epoll-4] r.netty.http.client.HttpClientConnect    : [f875d97f-3, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea, method=GET}
2025-04-17 19:55:16.485 | 2025-04-17T12:55:16.484Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f-3, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea, connection=PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.485 | 2025-04-17T12:55:16.485Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f-3, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea, connection=PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.485 | 2025-04-17T12:55:16.485Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=86, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.489 | 2025-04-17T12:55:16.489Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"0329872e-0fbd-4a59-8c22-5e983cbf833f", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.490 | 2025-04-17T12:55:16.490Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/4862a342-e3b3-4d27-ae96-55caf9330814'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.28541E-4, duration(nanos)=128541.0, startTimeNanos=66513794520683}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1f18e83'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.007397242, duration(nanos)=7397242.0, startTimeNanos=66513787424018}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5c810051'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513780576682}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3e13977d'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/4862a342-e3b3-4d27-ae96-55caf9330814'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.016047783, duration(nanos)=1.6047783E7, startTimeNanos=66513779297177}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7af270f7'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"0329872e-0fbd-4a59-8c22-5e983cbf833f", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.490 | 2025-04-17T12:55:16.490Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-23, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.491 | 2025-04-17T12:55:16.490Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/077ec874-2df1-459b-aab9-6e9e1e75d610, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.491 | 2025-04-17T12:55:16.490Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/077ec874-2df1-459b-aab9-6e9e1e75d610, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.491 | 2025-04-17T12:55:16.490Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.491 | 2025-04-17T12:55:16.490Z  INFO 1 --- [r-http-epoll-12] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/077ec874-2df1-459b-aab9-6e9e1e75d610 - 200 in 181 ms [request_id: 1ef5c6e2-a838-4869-a996-8eb9587a56af]
2025-04-17 19:55:16.491 | 2025-04-17T12:55:16.491Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 4 active connections, 2 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.491 | 2025-04-17T12:55:16.491Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 5 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.491 | 2025-04-17T12:55:16.491Z DEBUG 1 --- [or-http-epoll-5] r.netty.http.client.HttpClientConnect    : [a01001af-3, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/4862a342-e3b3-4d27-ae96-55caf9330814, method=GET}
2025-04-17 19:55:16.491 | 2025-04-17T12:55:16.491Z DEBUG 1 --- [r-http-epoll-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [223f8fcd-36] Completed 200 OK
2025-04-17 19:55:16.491 | 2025-04-17T12:55:16.491Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af-3, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/4862a342-e3b3-4d27-ae96-55caf9330814, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.491 | 2025-04-17T12:55:16.491Z DEBUG 1 --- [r-http-epoll-12] r.n.http.server.HttpServerOperations     : [223f8fcd-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Last HTTP response frame
2025-04-17 19:55:16.491 | 2025-04-17T12:55:16.491Z DEBUG 1 --- [r-http-epoll-12] r.n.http.server.HttpServerOperations     : [223f8fcd-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Decreasing pending responses, now 0
2025-04-17 19:55:16.491 | 2025-04-17T12:55:16.491Z DEBUG 1 --- [r-http-epoll-12] r.n.http.server.HttpServerOperations     : [223f8fcd-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.491 | 2025-04-17T12:55:16.491Z DEBUG 1 --- [r-http-epoll-12] r.netty.channel.ChannelOperations        : [223f8fcd-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.492 | 2025-04-17T12:55:16.492Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af-3, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/4862a342-e3b3-4d27-ae96-55caf9330814, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.493 | 2025-04-17T12:55:16.492Z DEBUG 1 --- [or-http-epoll-6] r.n.http.client.HttpClientOperations     : [845f779e-1, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.493 | 2025-04-17T12:55:16.493Z DEBUG 1 --- [or-http-epoll-6] r.n.r.DefaultPooledConnectionProvider    : [845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32, connection=PooledConnection{channel=[id: 0x845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.493 | 2025-04-17T12:55:16.493Z DEBUG 1 --- [or-http-epoll-6] r.n.r.DefaultPooledConnectionProvider    : [845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32, connection=PooledConnection{channel=[id: 0x845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.493 | 2025-04-17T12:55:16.493Z DEBUG 1 --- [or-http-epoll-6] r.n.r.DefaultPooledConnectionProvider    : [845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.493 | 2025-04-17T12:55:16.493Z  INFO 1 --- [or-http-epoll-3] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/a9eef65d-bbe5-4fe7-b8a6-5b236cf71e32 - 200 in 254 ms [request_id: 908603dc-e54c-4f64-8c53-5a89bd4ec79a]
2025-04-17 19:55:16.493 | 2025-04-17T12:55:16.493Z DEBUG 1 --- [or-http-epoll-6] r.n.resources.PooledConnectionProvider   : [845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 4 active connections, 2 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.493 | 2025-04-17T12:55:16.493Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e2b5a180-33] Completed 200 OK
2025-04-17 19:55:16.494 | 2025-04-17T12:55:16.493Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [e2b5a180-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Last HTTP response frame
2025-04-17 19:55:16.494 | 2025-04-17T12:55:16.493Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [e2b5a180-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Decreasing pending responses, now 0
2025-04-17 19:55:16.494 | 2025-04-17T12:55:16.493Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [e2b5a180-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.494 | 2025-04-17T12:55:16.493Z DEBUG 1 --- [or-http-epoll-3] r.netty.channel.ChannelOperations        : [e2b5a180-2, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.504 | 2025-04-17T12:55:16.503Z DEBUG 1 --- [r-http-epoll-12] r.n.http.server.HttpServerOperations     : [223f8fcd, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Increasing pending responses, now 1
2025-04-17 19:55:16.504 | 2025-04-17T12:55:16.504Z DEBUG 1 --- [r-http-epoll-12] reactor.netty.http.server.HttpServer     : [223f8fcd-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.504 | 2025-04-17T12:55:16.504Z DEBUG 1 --- [r-http-epoll-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [223f8fcd-39] HTTP GET "/api/images/5a6d2976-132e-4daa-8a01-6ebc21964275"
2025-04-17 19:55:16.505 | 2025-04-17T12:55:16.505Z DEBUG 1 --- [r-http-epoll-12] reactor.netty.ReactorNetty               : [223f8fcd-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.506 | 2025-04-17T12:55:16.506Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [e2b5a180, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Increasing pending responses, now 1
2025-04-17 19:55:16.507 | 2025-04-17T12:55:16.507Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.http.server.HttpServer     : [e2b5a180-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.507 | 2025-04-17T12:55:16.507Z DEBUG 1 --- [     parallel-3] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.508 | 2025-04-17T12:55:16.508Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e2b5a180-40] HTTP GET "/api/images/cddec931-0bd8-461b-a46c-0567830cc7c4"
2025-04-17 19:55:16.508 | 2025-04-17T12:55:16.508Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.508 | 2025-04-17T12:55:16.508Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5a6d2976-132e-4daa-8a01-6ebc21964275' doesn't match 'POST /logout'
2025-04-17 19:55:16.508 | 2025-04-17T12:55:16.508Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.508 | 2025-04-17T12:55:16.508Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.508 | 2025-04-17T12:55:16.508Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5a6d2976-132e-4daa-8a01-6ebc21964275' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.508Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.508Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5a6d2976-132e-4daa-8a01-6ebc21964275' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.508Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5a6d2976-132e-4daa-8a01-6ebc21964275' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5a6d2976-132e-4daa-8a01-6ebc21964275' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5a6d2976-132e-4daa-8a01-6ebc21964275' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5a6d2976-132e-4daa-8a01-6ebc21964275' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5a6d2976-132e-4daa-8a01-6ebc21964275' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5a6d2976-132e-4daa-8a01-6ebc21964275' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5a6d2976-132e-4daa-8a01-6ebc21964275' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/5a6d2976-132e-4daa-8a01-6ebc21964275' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/5a6d2976-132e-4daa-8a01-6ebc21964275'; against '/api/**'
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.509 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/5a6d2976-132e-4daa-8a01-6ebc21964275' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.510 | 2025-04-17T12:55:16.509Z DEBUG 1 --- [     parallel-3] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.510 | 2025-04-17T12:55:16.510Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.ReactorNetty               : [e2b5a180-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.510 | 2025-04-17T12:55:16.510Z DEBUG 1 --- [     parallel-4] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.510 | 2025-04-17T12:55:16.510Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.510 | 2025-04-17T12:55:16.510Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/cddec931-0bd8-461b-a46c-0567830cc7c4' doesn't match 'POST /logout'
2025-04-17 19:55:16.510 | 2025-04-17T12:55:16.510Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.510 | 2025-04-17T12:55:16.510Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.510 | 2025-04-17T12:55:16.510Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/cddec931-0bd8-461b-a46c-0567830cc7c4' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.510 | 2025-04-17T12:55:16.510Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.510 | 2025-04-17T12:55:16.510Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/cddec931-0bd8-461b-a46c-0567830cc7c4' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.512 | 2025-04-17T12:55:16.510Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.512 | 2025-04-17T12:55:16.510Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/cddec931-0bd8-461b-a46c-0567830cc7c4' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.512 | 2025-04-17T12:55:16.510Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.512 | 2025-04-17T12:55:16.510Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.512 | 2025-04-17T12:55:16.510Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/cddec931-0bd8-461b-a46c-0567830cc7c4' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.512 | 2025-04-17T12:55:16.510Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.512 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.512 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/5a6d2976-132e-4daa-8a01-6ebc21964275] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.512 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [223f8fcd-39] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.512 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/cddec931-0bd8-461b-a46c-0567830cc7c4' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.512 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.512 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/cddec931-0bd8-461b-a46c-0567830cc7c4' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.512 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.516 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/cddec931-0bd8-461b-a46c-0567830cc7c4' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/cddec931-0bd8-461b-a46c-0567830cc7c4' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z  INFO 1 --- [     parallel-3] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/5a6d2976-132e-4daa-8a01-6ebc21964275 from 172.18.0.1 [request_id: d724c621-29de-49f5-92a2-83be7d73ceea]
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/cddec931-0bd8-461b-a46c-0567830cc7c4' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/cddec931-0bd8-461b-a46c-0567830cc7c4' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [r-http-epoll-12] reactor.netty.channel.FluxReceive        : [223f8fcd-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/cddec931-0bd8-461b-a46c-0567830cc7c4'; against '/api/**'
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/cddec931-0bd8-461b-a46c-0567830cc7c4' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.511Z DEBUG 1 --- [     parallel-4] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.512Z DEBUG 1 --- [     parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.512Z DEBUG 1 --- [     parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/cddec931-0bd8-461b-a46c-0567830cc7c4] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.512Z DEBUG 1 --- [     parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [e2b5a180-40] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.517 | 2025-04-17T12:55:16.512Z DEBUG 1 --- [     parallel-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.518 | 2025-04-17T12:55:16.517Z  INFO 1 --- [     parallel-4] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/cddec931-0bd8-461b-a46c-0567830cc7c4 from 172.18.0.1 [request_id: ea65687e-2dc1-4be8-9e4b-5397633e912f]
2025-04-17 19:55:16.519 | 2025-04-17T12:55:16.519Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.channel.FluxReceive        : [e2b5a180-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.520 | 2025-04-17T12:55:16.520Z DEBUG 1 --- [r-http-epoll-11] r.n.http.client.HttpClientOperations     : [3f274513-1, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.520 | HTTP/1.1 200 
2025-04-17 19:55:16.520 | Content-Type: <filtered>
2025-04-17 19:55:16.520 | Content-Length: <filtered>
2025-04-17 19:55:16.520 | Date: <filtered>
2025-04-17 19:55:16.520 | 2025-04-17T12:55:16.520Z DEBUG 1 --- [r-http-epoll-11] r.n.r.DefaultPooledConnectionProvider    : [3f274513-1, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b, connection=PooledConnection{channel=[id: 0x3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.520 | 2025-04-17T12:55:16.520Z DEBUG 1 --- [r-http-epoll-11] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.521 | 2025-04-17T12:55:16.520Z DEBUG 1 --- [r-http-epoll-11] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.372843018, duration(nanos)=3.72843018E8, startTimeNanos=66513452864564}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6d3a778b'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.376607147, duration(nanos)=3.76607147E8, startTimeNanos=66513449208849}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@52fc0646'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513447474891}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@37c36054'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.37870614, duration(nanos)=3.7870614E8, startTimeNanos=66513447215510}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6a5edb8e'], parentObservation=null}}}}
2025-04-17 19:55:16.521 | 2025-04-17T12:55:16.521Z DEBUG 1 --- [r-http-epoll-11] reactor.netty.channel.FluxReceive        : [3f274513-1, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.526 | 2025-04-17T12:55:16.526Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=85, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.530 | 2025-04-17T12:55:16.530Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"d724c621-29de-49f5-92a2-83be7d73ceea", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39748"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.532 | 2025-04-17T12:55:16.531Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/5a6d2976-132e-4daa-8a01-6ebc21964275'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.16294E-4, duration(nanos)=116294.0, startTimeNanos=66513835940705}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@777a7cbc'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.021095133, duration(nanos)=2.1095133E7, startTimeNanos=66513815094412}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@232d698a'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513809946798}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@127baed'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/5a6d2976-132e-4daa-8a01-6ebc21964275'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.026729256, duration(nanos)=2.6729256E7, startTimeNanos=66513809590294}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@683b17f6'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"d724c621-29de-49f5-92a2-83be7d73ceea", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39748"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.532 | 2025-04-17T12:55:16.532Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 5 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.539 | 2025-04-17T12:55:16.532Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [048130ac-24, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/5a6d2976-132e-4daa-8a01-6ebc21964275, method=GET}
2025-04-17 19:55:16.539 | 2025-04-17T12:55:16.533Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-24, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/5a6d2976-132e-4daa-8a01-6ebc21964275, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.539 | 2025-04-17T12:55:16.533Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-24, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/5a6d2976-132e-4daa-8a01-6ebc21964275, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.539 | 2025-04-17T12:55:16.533Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=84, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.539 | 2025-04-17T12:55:16.535Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"ea65687e-2dc1-4be8-9e4b-5397633e912f", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39762"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.539 | 2025-04-17T12:55:16.535Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/cddec931-0bd8-461b-a46c-0567830cc7c4'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=8.5144E-5, duration(nanos)=85144.0, startTimeNanos=66513840467825}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4c8009d1'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.023762799, duration(nanos)=2.3762799E7, startTimeNanos=66513816855232}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4a948f2'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513814479038}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@38e57a58'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/cddec931-0bd8-461b-a46c-0567830cc7c4'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.026495058, duration(nanos)=2.6495058E7, startTimeNanos=66513814212887}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@8515e15'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"ea65687e-2dc1-4be8-9e4b-5397633e912f", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:39762"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.544 | 2025-04-17T12:55:16.541Z DEBUG 1 --- [r-http-epoll-11] r.n.http.client.HttpClientOperations     : [3f274513-1, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.544 | 2025-04-17T12:55:16.541Z DEBUG 1 --- [r-http-epoll-11] r.n.r.DefaultPooledConnectionProvider    : [3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b, connection=PooledConnection{channel=[id: 0x3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.544 | 2025-04-17T12:55:16.541Z DEBUG 1 --- [r-http-epoll-11] r.n.r.DefaultPooledConnectionProvider    : [3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/2abcc2c3-d22c-4543-b668-c73519f8143b, connection=PooledConnection{channel=[id: 0x3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.544 | 2025-04-17T12:55:16.541Z DEBUG 1 --- [r-http-epoll-11] r.n.r.DefaultPooledConnectionProvider    : [3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.544 | 2025-04-17T12:55:16.542Z DEBUG 1 --- [r-http-epoll-11] r.n.resources.PooledConnectionProvider   : [3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 4 active connections, 2 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.544 | 2025-04-17T12:55:16.543Z DEBUG 1 --- [or-http-epoll-6] r.n.resources.PooledConnectionProvider   : [845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 5 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.544 | 2025-04-17T12:55:16.543Z DEBUG 1 --- [or-http-epoll-6] r.netty.http.client.HttpClientConnect    : [845f779e-2, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/cddec931-0bd8-461b-a46c-0567830cc7c4, method=GET}
2025-04-17 19:55:16.544 | 2025-04-17T12:55:16.543Z DEBUG 1 --- [or-http-epoll-6] r.n.r.DefaultPooledConnectionProvider    : [845f779e-2, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/cddec931-0bd8-461b-a46c-0567830cc7c4, connection=PooledConnection{channel=[id: 0x845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.544 | 2025-04-17T12:55:16.543Z DEBUG 1 --- [or-http-epoll-6] r.n.r.DefaultPooledConnectionProvider    : [845f779e-2, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/cddec931-0bd8-461b-a46c-0567830cc7c4, connection=PooledConnection{channel=[id: 0x845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.544 | 2025-04-17T12:55:16.541Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [a01001af-3, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.544 | HTTP/1.1 200 
2025-04-17 19:55:16.544 | Content-Type: <filtered>
2025-04-17 19:55:16.544 | Content-Length: <filtered>
2025-04-17 19:55:16.544 | Date: <filtered>
2025-04-17 19:55:16.544 | 2025-04-17T12:55:16.544Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af-3, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/4862a342-e3b3-4d27-ae96-55caf9330814, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.544 | 2025-04-17T12:55:16.544Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.546 | 2025-04-17T12:55:16.546Z  INFO 1 --- [or-http-epoll-8] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/2abcc2c3-d22c-4543-b668-c73519f8143b - 200 in 401 ms [request_id: 0fab568e-9900-4313-9ad3-02c55e5d8de3]
2025-04-17 19:55:16.547 | 2025-04-17T12:55:16.547Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/4862a342-e3b3-4d27-ae96-55caf9330814'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.057030401, duration(nanos)=5.7030401E7, startTimeNanos=66513794520683}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1f18e83'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.064338974, duration(nanos)=6.4338974E7, startTimeNanos=66513787424018}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5c810051'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513780576682}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3e13977d'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/4862a342-e3b3-4d27-ae96-55caf9330814'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.072781998, duration(nanos)=7.2781998E7, startTimeNanos=66513779297177}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7af270f7'], parentObservation=null}}}}
2025-04-17 19:55:16.547 | 2025-04-17T12:55:16.547Z DEBUG 1 --- [or-http-epoll-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ee29768f-28] Completed 200 OK
2025-04-17 19:55:16.547 | 2025-04-17T12:55:16.547Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f-4, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Last HTTP response frame
2025-04-17 19:55:16.547 | 2025-04-17T12:55:16.547Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f-4, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Decreasing pending responses, now 0
2025-04-17 19:55:16.547 | 2025-04-17T12:55:16.547Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f-4, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.547 | 2025-04-17T12:55:16.547Z DEBUG 1 --- [or-http-epoll-8] r.netty.channel.ChannelOperations        : [ee29768f-4, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.548 | 2025-04-17T12:55:16.548Z DEBUG 1 --- [or-http-epoll-5] reactor.netty.channel.FluxReceive        : [a01001af-3, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.553 | 2025-04-17T12:55:16.553Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [a01001af-3, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.553 | 2025-04-17T12:55:16.553Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/4862a342-e3b3-4d27-ae96-55caf9330814 - 200 in 70 ms [request_id: 0329872e-0fbd-4a59-8c22-5e983cbf833f]
2025-04-17 19:55:16.556 | 2025-04-17T12:55:16.554Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-37] Completed 200 OK
2025-04-17 19:55:16.556 | 2025-04-17T12:55:16.554Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-20, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:16.556 | 2025-04-17T12:55:16.554Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-20, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:16.556 | 2025-04-17T12:55:16.554Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-20, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.556 | 2025-04-17T12:55:16.554Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-20, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.556 | 2025-04-17T12:55:16.553Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/4862a342-e3b3-4d27-ae96-55caf9330814, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.556 | 2025-04-17T12:55:16.555Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/4862a342-e3b3-4d27-ae96-55caf9330814, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.556 | 2025-04-17T12:55:16.555Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.556 | 2025-04-17T12:55:16.555Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 4 active connections, 2 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.557 | 2025-04-17T12:55:16.556Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Increasing pending responses, now 1
2025-04-17 19:55:16.557 | 2025-04-17T12:55:16.557Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.http.server.HttpServer     : [ee29768f-5, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.557 | 2025-04-17T12:55:16.557Z DEBUG 1 --- [or-http-epoll-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ee29768f-41] HTTP GET "/api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97"
2025-04-17 19:55:16.559 | 2025-04-17T12:55:16.559Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.ReactorNetty               : [ee29768f-5, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.559 | 2025-04-17T12:55:16.559Z DEBUG 1 --- [     parallel-7] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.559 | 2025-04-17T12:55:16.559Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.559 | 2025-04-17T12:55:16.559Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97' doesn't match 'POST /logout'
2025-04-17 19:55:16.559 | 2025-04-17T12:55:16.559Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-21, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:16.560 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.561 | 2025-04-17T12:55:16.560Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.561 | 2025-04-17T12:55:16.561Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.561 | 2025-04-17T12:55:16.561Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-42] HTTP GET "/api/images/dc0fb178-c786-47aa-bd45-7242f534a06e"
2025-04-17 19:55:16.561 | 2025-04-17T12:55:16.561Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.561 | 2025-04-17T12:55:16.561Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.561 | 2025-04-17T12:55:16.561Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.561 | 2025-04-17T12:55:16.561Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.561 | 2025-04-17T12:55:16.561Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.561 | 2025-04-17T12:55:16.561Z DEBUG 1 --- [     parallel-7] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97'; against '/api/**'
2025-04-17 19:55:16.561 | 2025-04-17T12:55:16.561Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.561 | 2025-04-17T12:55:16.561Z DEBUG 1 --- [     parallel-7] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.561 | 2025-04-17T12:55:16.561Z DEBUG 1 --- [     parallel-7] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.562 | 2025-04-17T12:55:16.562Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-21, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:16.562 | 2025-04-17T12:55:16.562Z DEBUG 1 --- [     parallel-8] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:16.562 | 2025-04-17T12:55:16.562Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:16.562 | 2025-04-17T12:55:16.562Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/dc0fb178-c786-47aa-bd45-7242f534a06e' doesn't match 'POST /logout'
2025-04-17 19:55:16.562 | 2025-04-17T12:55:16.562Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.562Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.562Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/dc0fb178-c786-47aa-bd45-7242f534a06e' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.562Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/dc0fb178-c786-47aa-bd45-7242f534a06e' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/dc0fb178-c786-47aa-bd45-7242f534a06e' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/dc0fb178-c786-47aa-bd45-7242f534a06e' doesn't match 'null /webjars/**'
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/dc0fb178-c786-47aa-bd45-7242f534a06e' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/dc0fb178-c786-47aa-bd45-7242f534a06e' doesn't match 'null /actuator/info'
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/dc0fb178-c786-47aa-bd45-7242f534a06e' doesn't match 'null /fallback/**'
2025-04-17 19:55:16.563 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.564 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:16.564 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/dc0fb178-c786-47aa-bd45-7242f534a06e' doesn't match 'null /api/auth/login'
2025-04-17 19:55:16.564 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/register', method=null}
2025-04-17 19:55:16.564 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/dc0fb178-c786-47aa-bd45-7242f534a06e' doesn't match 'null /api/auth/register'
2025-04-17 19:55:16.564 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/refresh', method=null}
2025-04-17 19:55:16.569 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Request 'GET /api/images/dc0fb178-c786-47aa-bd45-7242f534a06e' doesn't match 'null /api/auth/refresh'
2025-04-17 19:55:16.569 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:16.569 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/**', method=null}
2025-04-17 19:55:16.569 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/images/dc0fb178-c786-47aa-bd45-7242f534a06e'; against '/api/**'
2025-04-17 19:55:16.569 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:16.569 | 2025-04-17T12:55:16.563Z DEBUG 1 --- [     parallel-8] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/images/dc0fb178-c786-47aa-bd45-7242f534a06e' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:16.569 | 2025-04-17T12:55:16.564Z DEBUG 1 --- [     parallel-8] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:16.569 | 2025-04-17T12:55:16.564Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.569 | 2025-04-17T12:55:16.564Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.569 | 2025-04-17T12:55:16.564Z DEBUG 1 --- [     parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [ee29768f-41] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.569 | 2025-04-17T12:55:16.564Z DEBUG 1 --- [     parallel-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.569 | 2025-04-17T12:55:16.565Z  INFO 1 --- [     parallel-7] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97 from 172.18.0.1 [request_id: 3f136011-0ba6-4269-b6ef-222d94783a7b]
2025-04-17 19:55:16.569 | 2025-04-17T12:55:16.565Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.channel.FluxReceive        : [ee29768f-5, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.569 | 2025-04-17T12:55:16.565Z DEBUG 1 --- [     parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: image-storage-api
2025-04-17 19:55:16.570 | 2025-04-17T12:55:16.565Z DEBUG 1 --- [     parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/api/images/dc0fb178-c786-47aa-bd45-7242f534a06e] to Route{id='image-storage-api', uri=http://image-storage:8081, order=0, predicate=Paths: [/api/images/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3]], metadata={}}
2025-04-17 19:55:16.570 | 2025-04-17T12:55:16.565Z DEBUG 1 --- [     parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-42] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:16.570 | 2025-04-17T12:55:16.565Z DEBUG 1 --- [     parallel-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5768ab4b, order = 1], [[Retry routeId = 'image-storage-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'imageStorageCircuitBreaker', fallback = forward:/fallback/image-storage], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:16.570 | 2025-04-17T12:55:16.565Z DEBUG 1 --- [or-http-epoll-7] r.n.http.client.HttpClientOperations     : [1b7ee7b8-1, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.570 | HTTP/1.1 200 
2025-04-17 19:55:16.570 | Content-Type: <filtered>
2025-04-17 19:55:16.570 | Content-Length: <filtered>
2025-04-17 19:55:16.570 | Date: <filtered>
2025-04-17 19:55:16.570 | 2025-04-17T12:55:16.565Z DEBUG 1 --- [or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [1b7ee7b8-1, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998, connection=PooledConnection{channel=[id: 0x1b7ee7b8, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.570 | 2025-04-17T12:55:16.565Z  INFO 1 --- [     parallel-8] s.s.a.filter.GlobalFilters               : Incoming request: GET /api/images/dc0fb178-c786-47aa-bd45-7242f534a06e from 172.18.0.1 [request_id: 10900ea1-6477-4062-8a24-58cb80a2f10b]
2025-04-17 19:55:16.570 | 2025-04-17T12:55:16.566Z DEBUG 1 --- [or-http-epoll-7] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.570 | 2025-04-17T12:55:16.566Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-21, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=true, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.570 | 2025-04-17T12:55:16.566Z DEBUG 1 --- [or-http-epoll-7] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.252141824, duration(nanos)=2.52141824E8, startTimeNanos=66513618917229}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@fc7bb5'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.261738723, duration(nanos)=2.61738723E8, startTimeNanos=66513609445695}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3b3f2df3'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513604807082}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@27d6b42d'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.266820354, duration(nanos)=2.66820354E8, startTimeNanos=66513604451948}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@46274007'], parentObservation=null}}}}
2025-04-17 19:55:16.570 | 2025-04-17T12:55:16.569Z DEBUG 1 --- [or-http-epoll-7] reactor.netty.channel.FluxReceive        : [1b7ee7b8-1, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.570 | 2025-04-17T12:55:16.569Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=83, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.574 | 2025-04-17T12:55:16.574Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"3f136011-0ba6-4269-b6ef-222d94783a7b", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43082"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.575 | 2025-04-17T12:55:16.575Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=9.6754E-5, duration(nanos)=96754.0, startTimeNanos=66513879641614}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4453104f'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.012999883, duration(nanos)=1.2999883E7, startTimeNanos=66513866848809}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@a733eef'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513863502476}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1957b243'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.017027764, duration(nanos)=1.7027764E7, startTimeNanos=66513862904382}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1b74e68a'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"3f136011-0ba6-4269-b6ef-222d94783a7b", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43082"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.575 | 2025-04-17T12:55:16.575Z DEBUG 1 --- [r-http-epoll-11] r.n.resources.PooledConnectionProvider   : [3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 5 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.576 | 2025-04-17T12:55:16.576Z DEBUG 1 --- [r-http-epoll-11] r.netty.http.client.HttpClientConnect    : [3f274513-2, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97, method=GET}
2025-04-17 19:55:16.577 | 2025-04-17T12:55:16.576Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=82, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:16.577 | 2025-04-17T12:55:16.576Z DEBUG 1 --- [r-http-epoll-11] r.n.r.DefaultPooledConnectionProvider    : [3f274513-2, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97, connection=PooledConnection{channel=[id: 0x3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.577 | 2025-04-17T12:55:16.577Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"10900ea1-6477-4062-8a24-58cb80a2f10b", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.579 | 2025-04-17T12:55:16.578Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/dc0fb178-c786-47aa-bd45-7242f534a06e'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=7.8623E-5, duration(nanos)=78623.0, startTimeNanos=66513882952025}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@47f94cc3'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.013775405, duration(nanos)=1.3775405E7, startTimeNanos=66513869329056}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@54ee9695'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513866659951}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@708ff3e1'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/dc0fb178-c786-47aa-bd45-7242f534a06e'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.016807915, duration(nanos)=1.6807915E7, startTimeNanos=66513866366469}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4cf31bcc'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", sec-ch-ua-mobile:"?0", Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"no-cors", Sec-Fetch-Dest:"image", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"10900ea1-6477-4062-8a24-58cb80a2f10b", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:16.579 | 2025-04-17T12:55:16.578Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Channel acquired, now: 6 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.579 | 2025-04-17T12:55:16.579Z DEBUG 1 --- [or-http-epoll-5] r.netty.http.client.HttpClientConnect    : [a01001af-4, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Handler is being applied: {uri=http://image-storage:8081/api/images/dc0fb178-c786-47aa-bd45-7242f534a06e, method=GET}
2025-04-17 19:55:16.579 | 2025-04-17T12:55:16.579Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af-4, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/dc0fb178-c786-47aa-bd45-7242f534a06e, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [request_prepared])
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.579Z DEBUG 1 --- [or-http-epoll-4] r.n.http.client.HttpClientOperations     : [f875d97f-3, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.580 | HTTP/1.1 200 
2025-04-17 19:55:16.580 | Content-Type: <filtered>
2025-04-17 19:55:16.580 | Content-Length: <filtered>
2025-04-17 19:55:16.580 | Date: <filtered>
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.579Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f-3, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea, connection=PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.579Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af-4, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/dc0fb178-c786-47aa-bd45-7242f534a06e, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.579Z DEBUG 1 --- [or-http-epoll-7] r.n.http.client.HttpClientOperations     : [1b7ee7b8-1, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.579Z DEBUG 1 --- [or-http-epoll-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.579Z DEBUG 1 --- [or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [1b7ee7b8, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998, connection=PooledConnection{channel=[id: 0x1b7ee7b8, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.579Z DEBUG 1 --- [or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [1b7ee7b8, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998, connection=PooledConnection{channel=[id: 0x1b7ee7b8, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.579Z DEBUG 1 --- [or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [1b7ee7b8, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.580Z DEBUG 1 --- [or-http-epoll-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.095886691, duration(nanos)=9.5886691E7, startTimeNanos=66513789045682}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@25e5aaa5'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.100296836, duration(nanos)=1.00296836E8, startTimeNanos=66513784671099}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@67774b5f'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513782776354}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7592fc40'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.102458341, duration(nanos)=1.02458341E8, startTimeNanos=66513782591347}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@949ad8d'], parentObservation=null}}}}
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.580Z  INFO 1 --- [or-http-epoll-1] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/3c339ec6-1087-4a04-a4b0-99aaa14f7998 - 200 in 275 ms [request_id: 422a7ca5-5b51-4ae1-b3a9-7ab3b62b4b74]
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.580Z DEBUG 1 --- [or-http-epoll-7] r.n.resources.PooledConnectionProvider   : [1b7ee7b8, L:/172.18.0.10:33910 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 5 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.580Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-24, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.580 | HTTP/1.1 200 
2025-04-17 19:55:16.580 | Content-Type: <filtered>
2025-04-17 19:55:16.580 | Content-Length: <filtered>
2025-04-17 19:55:16.580 | Date: <filtered>
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.580Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac-24, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/5a6d2976-132e-4daa-8a01-6ebc21964275, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.580Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.580Z DEBUG 1 --- [or-http-epoll-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [81d56ebf-35] Completed 200 OK
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.580Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/5a6d2976-132e-4daa-8a01-6ebc21964275'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.049419816, duration(nanos)=4.9419816E7, startTimeNanos=66513835940705}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@777a7cbc'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.070340401, duration(nanos)=7.0340401E7, startTimeNanos=66513815094412}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@232d698a'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513809946798}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@127baed'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/5a6d2976-132e-4daa-8a01-6ebc21964275'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.075928233, duration(nanos)=7.5928233E7, startTimeNanos=66513809590294}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@683b17f6'], parentObservation=null}}}}
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.580Z DEBUG 1 --- [or-http-epoll-1] r.n.http.server.HttpServerOperations     : [81d56ebf-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39754] Last HTTP response frame
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.580Z DEBUG 1 --- [or-http-epoll-1] r.n.http.server.HttpServerOperations     : [81d56ebf-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39754] Decreasing pending responses, now 0
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.580Z DEBUG 1 --- [r-http-epoll-11] r.n.r.DefaultPooledConnectionProvider    : [3f274513-2, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97, connection=PooledConnection{channel=[id: 0x3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081]}}, [request_sent])
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.580Z DEBUG 1 --- [or-http-epoll-1] r.n.http.server.HttpServerOperations     : [81d56ebf-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39754] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.580 | 2025-04-17T12:55:16.580Z DEBUG 1 --- [or-http-epoll-1] r.netty.channel.ChannelOperations        : [81d56ebf-1, L:/172.18.0.10:8082 - R:/172.18.0.1:39754] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.582 | 2025-04-17T12:55:16.582Z DEBUG 1 --- [or-http-epoll-4] reactor.netty.channel.FluxReceive        : [f875d97f-3, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.582 | 2025-04-17T12:55:16.582Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [048130ac-24, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.588 | 2025-04-17T12:55:16.588Z DEBUG 1 --- [or-http-epoll-4] r.n.http.client.HttpClientOperations     : [f875d97f-3, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.588 | 2025-04-17T12:55:16.588Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea, connection=PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.589 | 2025-04-17T12:55:16.588Z DEBUG 1 --- [or-http-epoll-6] r.n.http.client.HttpClientOperations     : [845f779e-2, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.589 | HTTP/1.1 200 
2025-04-17 19:55:16.589 | Content-Type: <filtered>
2025-04-17 19:55:16.589 | Content-Length: <filtered>
2025-04-17 19:55:16.589 | Date: <filtered>
2025-04-17 19:55:16.589 | 2025-04-17T12:55:16.588Z DEBUG 1 --- [or-http-epoll-6] r.n.r.DefaultPooledConnectionProvider    : [845f779e-2, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/cddec931-0bd8-461b-a46c-0567830cc7c4, connection=PooledConnection{channel=[id: 0x845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.589 | 2025-04-17T12:55:16.588Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea, connection=PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.589 | 2025-04-17T12:55:16.588Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.589 | 2025-04-17T12:55:16.588Z DEBUG 1 --- [or-http-epoll-4] r.n.resources.PooledConnectionProvider   : [f875d97f, L:/172.18.0.10:33890 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 4 active connections, 2 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.589 | 2025-04-17T12:55:16.588Z DEBUG 1 --- [or-http-epoll-6] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.589 | 2025-04-17T12:55:16.588Z  INFO 1 --- [or-http-epoll-2] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/0847cede-8203-4dbd-989b-7fb24dc2aeea - 200 in 108 ms [request_id: 10b03c03-6319-4661-86ea-62397bcdf3df]
2025-04-17 19:55:16.589 | 2025-04-17T12:55:16.588Z DEBUG 1 --- [or-http-epoll-6] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/cddec931-0bd8-461b-a46c-0567830cc7c4'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.053172813, duration(nanos)=5.3172813E7, startTimeNanos=66513840467825}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4c8009d1'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.076848918, duration(nanos)=7.6848918E7, startTimeNanos=66513816855232}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4a948f2'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513814479038}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@38e57a58'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/cddec931-0bd8-461b-a46c-0567830cc7c4'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.079571217, duration(nanos)=7.9571217E7, startTimeNanos=66513814212887}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@8515e15'], parentObservation=null}}}}
2025-04-17 19:55:16.593 | 2025-04-17T12:55:16.589Z DEBUG 1 --- [or-http-epoll-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [22257ceb-38] Completed 200 OK
2025-04-17 19:55:16.593 | 2025-04-17T12:55:16.590Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [22257ceb-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Last HTTP response frame
2025-04-17 19:55:16.593 | 2025-04-17T12:55:16.591Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [22257ceb-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Decreasing pending responses, now 0
2025-04-17 19:55:16.593 | 2025-04-17T12:55:16.589Z DEBUG 1 --- [or-http-epoll-6] reactor.netty.channel.FluxReceive        : [845f779e-2, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.593 | 2025-04-17T12:55:16.591Z DEBUG 1 --- [or-http-epoll-2] r.n.http.server.HttpServerOperations     : [22257ceb-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.593 | 2025-04-17T12:55:16.591Z DEBUG 1 --- [or-http-epoll-2] r.netty.channel.ChannelOperations        : [22257ceb-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39756] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.593 | 2025-04-17T12:55:16.589Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [048130ac-24, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.593 | 2025-04-17T12:55:16.592Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/5a6d2976-132e-4daa-8a01-6ebc21964275, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.593 | 2025-04-17T12:55:16.592Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/5a6d2976-132e-4daa-8a01-6ebc21964275, connection=PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.595 | 2025-04-17T12:55:16.592Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.595 | 2025-04-17T12:55:16.592Z  INFO 1 --- [r-http-epoll-12] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/5a6d2976-132e-4daa-8a01-6ebc21964275 - 200 in 81 ms [request_id: d724c621-29de-49f5-92a2-83be7d73ceea]
2025-04-17 19:55:16.595 | 2025-04-17T12:55:16.592Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [048130ac, L:/172.18.0.10:34058 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 3 active connections, 3 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.595 | 2025-04-17T12:55:16.593Z DEBUG 1 --- [r-http-epoll-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [223f8fcd-39] Completed 200 OK
2025-04-17 19:55:16.595 | 2025-04-17T12:55:16.593Z DEBUG 1 --- [r-http-epoll-12] r.n.http.server.HttpServerOperations     : [223f8fcd-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Last HTTP response frame
2025-04-17 19:55:16.595 | 2025-04-17T12:55:16.593Z DEBUG 1 --- [r-http-epoll-12] r.n.http.server.HttpServerOperations     : [223f8fcd-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Decreasing pending responses, now 0
2025-04-17 19:55:16.595 | 2025-04-17T12:55:16.593Z DEBUG 1 --- [r-http-epoll-12] r.n.http.server.HttpServerOperations     : [223f8fcd-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.595 | 2025-04-17T12:55:16.593Z DEBUG 1 --- [r-http-epoll-12] r.netty.channel.ChannelOperations        : [223f8fcd-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39748] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.597 | 2025-04-17T12:55:16.596Z DEBUG 1 --- [or-http-epoll-6] r.n.http.client.HttpClientOperations     : [845f779e-2, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.597 | 2025-04-17T12:55:16.596Z DEBUG 1 --- [or-http-epoll-6] r.n.r.DefaultPooledConnectionProvider    : [845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/cddec931-0bd8-461b-a46c-0567830cc7c4, connection=PooledConnection{channel=[id: 0x845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.597 | 2025-04-17T12:55:16.596Z DEBUG 1 --- [or-http-epoll-6] r.n.r.DefaultPooledConnectionProvider    : [845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/cddec931-0bd8-461b-a46c-0567830cc7c4, connection=PooledConnection{channel=[id: 0x845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.597 | 2025-04-17T12:55:16.596Z DEBUG 1 --- [or-http-epoll-6] r.n.r.DefaultPooledConnectionProvider    : [845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.597 | 2025-04-17T12:55:16.596Z  INFO 1 --- [or-http-epoll-3] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/cddec931-0bd8-461b-a46c-0567830cc7c4 - 200 in 84 ms [request_id: ea65687e-2dc1-4be8-9e4b-5397633e912f]
2025-04-17 19:55:16.597 | 2025-04-17T12:55:16.596Z DEBUG 1 --- [or-http-epoll-6] r.n.resources.PooledConnectionProvider   : [845f779e, L:/172.18.0.10:33896 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 2 active connections, 4 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.597 | 2025-04-17T12:55:16.597Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e2b5a180-40] Completed 200 OK
2025-04-17 19:55:16.597 | 2025-04-17T12:55:16.597Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [e2b5a180-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Last HTTP response frame
2025-04-17 19:55:16.597 | 2025-04-17T12:55:16.597Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [e2b5a180-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Decreasing pending responses, now 0
2025-04-17 19:55:16.597 | 2025-04-17T12:55:16.597Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [e2b5a180-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.597 | 2025-04-17T12:55:16.597Z DEBUG 1 --- [or-http-epoll-3] r.netty.channel.ChannelOperations        : [e2b5a180-3, L:/172.18.0.10:8082 - R:/172.18.0.1:39762] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.604 | 2025-04-17T12:55:16.604Z DEBUG 1 --- [r-http-epoll-11] r.n.http.client.HttpClientOperations     : [3f274513-2, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.604 | HTTP/1.1 200 
2025-04-17 19:55:16.604 | Content-Type: <filtered>
2025-04-17 19:55:16.604 | Content-Length: <filtered>
2025-04-17 19:55:16.604 | Date: <filtered>
2025-04-17 19:55:16.604 | 2025-04-17T12:55:16.604Z DEBUG 1 --- [r-http-epoll-11] r.n.r.DefaultPooledConnectionProvider    : [3f274513-2, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97, connection=PooledConnection{channel=[id: 0x3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.604 | 2025-04-17T12:55:16.604Z DEBUG 1 --- [r-http-epoll-11] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.605 | 2025-04-17T12:55:16.605Z DEBUG 1 --- [r-http-epoll-11] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.030232136, duration(nanos)=3.0232136E7, startTimeNanos=66513879641614}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4453104f'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.043072352, duration(nanos)=4.3072352E7, startTimeNanos=66513866848809}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@a733eef'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513863502476}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1957b243'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.047152065, duration(nanos)=4.7152065E7, startTimeNanos=66513862904382}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1b74e68a'], parentObservation=null}}}}
2025-04-17 19:55:16.606 | 2025-04-17T12:55:16.605Z DEBUG 1 --- [r-http-epoll-11] reactor.netty.channel.FluxReceive        : [3f274513-2, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.608 | 2025-04-17T12:55:16.608Z DEBUG 1 --- [r-http-epoll-11] r.n.http.client.HttpClientOperations     : [3f274513-2, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.608 | 2025-04-17T12:55:16.608Z DEBUG 1 --- [r-http-epoll-11] r.n.r.DefaultPooledConnectionProvider    : [3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97, connection=PooledConnection{channel=[id: 0x3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.608 | 2025-04-17T12:55:16.608Z DEBUG 1 --- [r-http-epoll-11] r.n.r.DefaultPooledConnectionProvider    : [3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97, connection=PooledConnection{channel=[id: 0x3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.608 | 2025-04-17T12:55:16.608Z DEBUG 1 --- [r-http-epoll-11] r.n.r.DefaultPooledConnectionProvider    : [3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.608 | 2025-04-17T12:55:16.608Z DEBUG 1 --- [r-http-epoll-11] r.n.resources.PooledConnectionProvider   : [3f274513, L:/172.18.0.10:33884 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 1 active connections, 5 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.609 | 2025-04-17T12:55:16.608Z  INFO 1 --- [or-http-epoll-8] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/720b1cd2-adbe-4903-a46a-b44023e2ef97 - 200 in 44 ms [request_id: 3f136011-0ba6-4269-b6ef-222d94783a7b]
2025-04-17 19:55:16.609 | 2025-04-17T12:55:16.609Z DEBUG 1 --- [or-http-epoll-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ee29768f-41] Completed 200 OK
2025-04-17 19:55:16.609 | 2025-04-17T12:55:16.609Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f-5, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Last HTTP response frame
2025-04-17 19:55:16.611 | 2025-04-17T12:55:16.609Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f-5, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Decreasing pending responses, now 0
2025-04-17 19:55:16.611 | 2025-04-17T12:55:16.609Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [ee29768f-5, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.611 | 2025-04-17T12:55:16.609Z DEBUG 1 --- [or-http-epoll-8] r.netty.channel.ChannelOperations        : [ee29768f-5, L:/172.18.0.10:8082 - R:/172.18.0.1:43082] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:16.638 | 2025-04-17T12:55:16.638Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [a01001af-4, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:16.638 | HTTP/1.1 200 
2025-04-17 19:55:16.638 | Content-Type: <filtered>
2025-04-17 19:55:16.638 | Content-Length: <filtered>
2025-04-17 19:55:16.638 | Date: <filtered>
2025-04-17 19:55:16.638 | 2025-04-17T12:55:16.638Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af-4, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/dc0fb178-c786-47aa-bd45-7242f534a06e, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [response_received])
2025-04-17 19:55:16.638 | 2025-04-17T12:55:16.638Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:16.639 | 2025-04-17T12:55:16.639Z DEBUG 1 --- [or-http-epoll-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='image-storage-api', spring.cloud.gateway.route.uri='http://image-storage:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/images/dc0fb178-c786-47aa-bd45-7242f534a06e'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.060924449, duration(nanos)=6.0924449E7, startTimeNanos=66513882952025}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@47f94cc3'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.074576679, duration(nanos)=7.4576679E7, startTimeNanos=66513869329056}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@54ee9695'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66513866659951}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@708ff3e1'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/images/dc0fb178-c786-47aa-bd45-7242f534a06e'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.077590728, duration(nanos)=7.7590728E7, startTimeNanos=66513866366469}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4cf31bcc'], parentObservation=null}}}}
2025-04-17 19:55:16.639 | 2025-04-17T12:55:16.639Z DEBUG 1 --- [or-http-epoll-5] reactor.netty.channel.FluxReceive        : [a01001af-4, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:16.642 | 2025-04-17T12:55:16.642Z DEBUG 1 --- [or-http-epoll-5] r.n.http.client.HttpClientOperations     : [a01001af-4, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Received last HTTP packet
2025-04-17 19:55:16.642 | 2025-04-17T12:55:16.642Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/dc0fb178-c786-47aa-bd45-7242f534a06e, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [response_completed])
2025-04-17 19:55:16.642 | 2025-04-17T12:55:16.642Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] onStateChange(GET{uri=/api/images/dc0fb178-c786-47aa-bd45-7242f534a06e, connection=PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081]}}, [disconnecting])
2025-04-17 19:55:16.642 | 2025-04-17T12:55:16.642Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: GET /api/images/dc0fb178-c786-47aa-bd45-7242f534a06e - 200 in 77 ms [request_id: 10900ea1-6477-4062-8a24-58cb80a2f10b]
2025-04-17 19:55:16.642 | 2025-04-17T12:55:16.642Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Releasing channel
2025-04-17 19:55:16.642 | 2025-04-17T12:55:16.642Z DEBUG 1 --- [or-http-epoll-5] r.n.resources.PooledConnectionProvider   : [a01001af, L:/172.18.0.10:33886 - R:image-storage/172.18.0.6:8081] Channel cleaned, now: 0 active connections, 6 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:16.643 | 2025-04-17T12:55:16.643Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-42] Completed 200 OK
2025-04-17 19:55:16.643 | 2025-04-17T12:55:16.643Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-21, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:16.643 | 2025-04-17T12:55:16.643Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-21, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:16.643 | 2025-04-17T12:55:16.643Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-21, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:16.643 | 2025-04-17T12:55:16.643Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-21, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:24.710 | 2025-04-17T12:55:24.710Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [3c5a8000, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:51956] New http connection, requesting read
2025-04-17 19:55:24.710 | 2025-04-17T12:55:24.710Z DEBUG 1 --- [or-http-epoll-8] r.netty.transport.TransportConfig        : [3c5a8000, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:51956] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:24.710 | 2025-04-17T12:55:24.710Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [3c5a8000, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:51956] Increasing pending responses, now 1
2025-04-17 19:55:24.710 | 2025-04-17T12:55:24.710Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.http.server.HttpServer     : [3c5a8000-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:51956] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:24.711 | 2025-04-17T12:55:24.710Z DEBUG 1 --- [or-http-epoll-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3c5a8000-43] HTTP GET "/actuator/health"
2025-04-17 19:55:24.711 | 2025-04-17T12:55:24.711Z DEBUG 1 --- [or-http-epoll-8] reactor.netty.ReactorNetty               : [3c5a8000-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:51956] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:24.711 | 2025-04-17T12:55:24.711Z DEBUG 1 --- [    parallel-11] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.711Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.712Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'POST /logout'
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.712Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.712Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.712Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.712Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.712Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.712Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.712Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.712Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.712Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /webjars/**'
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.712Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.712Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.712Z DEBUG 1 --- [    parallel-11] athPatternParserServerWebExchangeMatcher : Checking match of request : '/actuator/health'; against '/actuator/health/**'
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.712Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.712Z DEBUG 1 --- [    parallel-11] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/actuator/health' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:24.712 | 2025-04-17T12:55:24.712Z DEBUG 1 --- [    parallel-11] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:24.713 | 2025-04-17T12:55:24.713Z DEBUG 1 --- [    parallel-11] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@18f7cc91'
2025-04-17 19:55:24.715 | 2025-04-17T12:55:24.715Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [3c5a8000-43] Using 'application/vnd.spring-boot.actuator.v3+json' given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-04-17 19:55:24.715 | 2025-04-17T12:55:24.715Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [3c5a8000-43] 0..1 [org.springframework.boot.actuate.health.SystemHealth]
2025-04-17 19:55:24.715 | 2025-04-17T12:55:24.715Z DEBUG 1 --- [llEventLoop-5-1] org.springframework.web.HttpLogging      : [3c5a8000-43] Encoding [org.springframework.boot.actuate.health.SystemHealth@4161c9c5]
2025-04-17 19:55:24.716 | 2025-04-17T12:55:24.716Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [3c5a8000-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:51956] Decreasing pending responses, now 0
2025-04-17 19:55:24.716 | 2025-04-17T12:55:24.716Z DEBUG 1 --- [or-http-epoll-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3c5a8000-43] Completed 200 OK
2025-04-17 19:55:24.716 | 2025-04-17T12:55:24.716Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [3c5a8000-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:51956] Last HTTP response frame
2025-04-17 19:55:24.716 | 2025-04-17T12:55:24.716Z DEBUG 1 --- [or-http-epoll-8] r.netty.channel.ChannelOperations        : [3c5a8000-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:51956] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:24.716 | 2025-04-17T12:55:24.716Z DEBUG 1 --- [or-http-epoll-8] r.n.http.server.HttpServerOperations     : [3c5a8000-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:51956] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:26.680 | 2025-04-17T12:55:26.680Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Increasing pending responses, now 1
2025-04-17 19:55:26.681 | 2025-04-17T12:55:26.680Z DEBUG 1 --- [or-http-epoll-3] reactor.netty.http.server.HttpServer     : [ec2d2c63-5, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:26.681 | 2025-04-17T12:55:26.681Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ec2d2c63-44] HTTP OPTIONS "/api/auth/login"
2025-04-17 19:55:26.682 | 2025-04-17T12:55:26.682Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ec2d2c63-44] Completed 200 OK
2025-04-17 19:55:26.682 | 2025-04-17T12:55:26.682Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63-5, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Last HTTP response frame
2025-04-17 19:55:26.682 | 2025-04-17T12:55:26.682Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63-5, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] No sendHeaders() called before complete, sending zero-length header
2025-04-17 19:55:26.682 | 2025-04-17T12:55:26.682Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63-5, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Decreasing pending responses, now 0
2025-04-17 19:55:26.683 | 2025-04-17T12:55:26.682Z DEBUG 1 --- [or-http-epoll-3] r.n.http.server.HttpServerOperations     : [ec2d2c63-5, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:26.683 | 2025-04-17T12:55:26.683Z DEBUG 1 --- [or-http-epoll-3] r.netty.channel.ChannelOperations        : [ec2d2c63-5, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:26.683 | 2025-04-17T12:55:26.683Z DEBUG 1 --- [or-http-epoll-3] r.n.channel.ChannelOperationsHandler     : [ec2d2c63, L:/172.18.0.10:8082 - R:/172.18.0.1:57116] No ChannelOperation attached.
2025-04-17 19:55:26.684 | 2025-04-17T12:55:26.684Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Increasing pending responses, now 1
2025-04-17 19:55:26.684 | 2025-04-17T12:55:26.684Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [86ecf418-22, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:26.684 | 2025-04-17T12:55:26.684Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-45] HTTP POST "/api/auth/login"
2025-04-17 19:55:26.686 | 2025-04-17T12:55:26.685Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [86ecf418-22, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:26.686 | 2025-04-17T12:55:26.686Z DEBUG 1 --- [    parallel-12] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:26.686 | 2025-04-17T12:55:26.686Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:26.686 | 2025-04-17T12:55:26.686Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'POST /api/auth/login' doesn't match 'POST /logout'
2025-04-17 19:55:26.686 | 2025-04-17T12:55:26.686Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:26.686 | 2025-04-17T12:55:26.686Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:26.686 | 2025-04-17T12:55:26.686Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'POST /api/auth/login' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:26.686 | 2025-04-17T12:55:26.686Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:26.686 | 2025-04-17T12:55:26.686Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'POST /api/auth/login' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:26.686 | 2025-04-17T12:55:26.686Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:26.686 | 2025-04-17T12:55:26.686Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'POST /api/auth/login' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:26.686 | 2025-04-17T12:55:26.686Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:26.686 | 2025-04-17T12:55:26.686Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'POST /api/auth/login' doesn't match 'null /webjars/**'
2025-04-17 19:55:26.686 | 2025-04-17T12:55:26.686Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:26.687 | 2025-04-17T12:55:26.686Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:26.687 | 2025-04-17T12:55:26.686Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'POST /api/auth/login' doesn't match 'null /actuator/health/**'
2025-04-17 19:55:26.687 | 2025-04-17T12:55:26.687Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/info', method=null}
2025-04-17 19:55:26.687 | 2025-04-17T12:55:26.687Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'POST /api/auth/login' doesn't match 'null /actuator/info'
2025-04-17 19:55:26.687 | 2025-04-17T12:55:26.687Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:26.687 | 2025-04-17T12:55:26.687Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/fallback/**', method=null}
2025-04-17 19:55:26.687 | 2025-04-17T12:55:26.687Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Request 'POST /api/auth/login' doesn't match 'null /fallback/**'
2025-04-17 19:55:26.687 | 2025-04-17T12:55:26.687Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:26.687 | 2025-04-17T12:55:26.687Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/api/auth/login', method=null}
2025-04-17 19:55:26.687 | 2025-04-17T12:55:26.687Z DEBUG 1 --- [    parallel-12] athPatternParserServerWebExchangeMatcher : Checking match of request : '/api/auth/login'; against '/api/auth/login'
2025-04-17 19:55:26.687 | 2025-04-17T12:55:26.687Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:26.687 | 2025-04-17T12:55:26.687Z DEBUG 1 --- [    parallel-12] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/api/auth/login' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:26.687 | 2025-04-17T12:55:26.687Z DEBUG 1 --- [    parallel-12] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:26.688 | 2025-04-17T12:55:26.688Z DEBUG 1 --- [    parallel-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-api
2025-04-17 19:55:26.688 | 2025-04-17T12:55:26.688Z DEBUG 1 --- [    parallel-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8082/api/auth/login] to Route{id='auth-api', uri=http://auth-service:8085, order=0, predicate=Paths: [/api/auth/**], match trailing slash: true, gatewayFilters=[[org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5d858768, order = 1], [[Retry routeId = 'auth-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST, PUT, DELETE], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'authCircuitBreaker', fallback = forward:/fallback/auth], order = 3]], metadata={}}
2025-04-17 19:55:26.688 | 2025-04-17T12:55:26.688Z DEBUG 1 --- [    parallel-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [86ecf418-45] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@afad4ee
2025-04-17 19:55:26.688 | 2025-04-17T12:55:26.688Z DEBUG 1 --- [    parallel-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=shadowshift.studio.apigatewaycompressionranksystem.filter.GlobalFilters@5d1b9c3d}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@730e5763}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@79ab3a71}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@49a26d19}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4315e9af}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@1eb2d371}, order = 0], [org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$1302/0x00000008012f8208@5d858768, order = 1], [[Retry routeId = 'auth-api', retries = 3, series = list[SERVER_ERROR], statuses = list[502 BAD_GATEWAY, 504 GATEWAY_TIMEOUT, 503 SERVICE_UNAVAILABLE], methods = list[GET, POST, PUT, DELETE], exceptions = list[IOException, TimeoutException]], order = 2], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'authCircuitBreaker', fallback = forward:/fallback/auth], order = 3], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7275c74b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@2babf189}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@42210be1}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@69e05f61}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@19058533}, order = 2147483647]]
2025-04-17 19:55:26.688 | 2025-04-17T12:55:26.688Z  INFO 1 --- [    parallel-12] s.s.a.filter.GlobalFilters               : Incoming request: POST /api/auth/login from 172.18.0.1 [request_id: 47f24244-9dd9-4301-b095-5420bab17b80]
2025-04-17 19:55:26.689 | 2025-04-17T12:55:26.688Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.channel.FluxReceive        : [86ecf418-22, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [terminated=true, cancelled=false, pending=1, error=null]: subscribing inbound receiver
2025-04-17 19:55:26.690 | 2025-04-17T12:55:26.690Z DEBUG 1 --- [llEventLoop-5-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=true, headers={X-RateLimit-Remaining=99, X-RateLimit-Requested-Tokens=1, X-RateLimit-Burst-Capacity=100, X-RateLimit-Replenish-Rate=50}, tokensRemaining=-1}
2025-04-17 19:55:26.691 | 2025-04-17T12:55:26.691Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8082", Content-Length:"39", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"application/json", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"47f24244-9dd9-4301-b095-5420bab17b80", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:26.691 | 2025-04-17T12:55:26.691Z DEBUG 1 --- [llEventLoop-5-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-api', spring.cloud.gateway.route.uri='http://auth-service:8085'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=9.4083E-5, duration(nanos)=94083.0, startTimeNanos=66523997800232}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@611bb542'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.003697588, duration(nanos)=3697588.0, startTimeNanos=66523994244279}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6e84427b'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66523991529847}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3afd191c'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.006763733, duration(nanos)=6763733.0, startTimeNanos=66523991246447}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@751dd067'], parentObservation=null}}}} created for the request. New headers are [Host:"localhost:8082", Content-Length:"39", sec-ch-ua-platform:""Windows"", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0", Accept:"application/json, text/plain, */*", sec-ch-ua:""Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135"", Content-Type:"application/json", sec-ch-ua-mobile:"?0", Origin:"http://localhost:3000", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:3000/", Accept-Encoding:"gzip, deflate, br, zstd", Accept-Language:"ru,en;q=0.9,en-GB;q=0.8,en-US;q=0.7", Cookie:"JSESSIONID=BA34F6DC8117843EC30B549FF8DB03F8", X-Request-ID:"47f24244-9dd9-4301-b095-5420bab17b80", Forwarded:"proto=http;host="localhost:8082";for="172.18.0.1:43084"", X-Forwarded-For:"172.18.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8082", X-Forwarded-Host:"localhost:8082"]
2025-04-17 19:55:26.692 | 2025-04-17T12:55:26.692Z DEBUG 1 --- [llEventLoop-5-1] r.n.resources.PooledConnectionProvider   : Creating a new [proxy] client pool [PoolFactory{evictionInterval=PT0S, leasingStrategy=fifo, maxConnections=2147483647, maxIdleTime=-1, maxLifeTime=-1, metricsEnabled=false, pendingAcquireMaxCount=-1, pendingAcquireTimeout=0}] for [auth-service/<unresolved>:8085]
2025-04-17 19:55:26.692 | 2025-04-17T12:55:26.692Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [d779632a] Created a new pooled channel, now: 0 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:26.692 | 2025-04-17T12:55:26.692Z DEBUG 1 --- [or-http-epoll-9] r.netty.transport.TransportConfig        : [d779632a] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpClientCodec), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:26.694 | 2025-04-17T12:55:26.694Z DEBUG 1 --- [or-http-epoll-9] r.netty.transport.TransportConnector     : [d779632a] Connecting to [auth-service/172.18.0.8:8085].
2025-04-17 19:55:26.694 | 2025-04-17T12:55:26.694Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [d779632a, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085] Registering pool release on close event for channel
2025-04-17 19:55:26.694 | 2025-04-17T12:55:26.694Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [d779632a, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085] Channel connected, now: 1 active connections, 0 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:26.694 | 2025-04-17T12:55:26.694Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [d779632a, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085] onStateChange(PooledConnection{channel=[id: 0xd779632a, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085]}, [connected])
2025-04-17 19:55:26.694 | 2025-04-17T12:55:26.694Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [d779632a-1, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085] onStateChange(GET{uri=null, connection=PooledConnection{channel=[id: 0xd779632a, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085]}}, [configured])
2025-04-17 19:55:26.694 | 2025-04-17T12:55:26.694Z DEBUG 1 --- [or-http-epoll-9] r.netty.http.client.HttpClientConnect    : [d779632a-1, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085] Handler is being applied: {uri=http://auth-service:8085/api/auth/login, method=POST}
2025-04-17 19:55:26.694 | 2025-04-17T12:55:26.694Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [d779632a-1, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085] onStateChange(POST{uri=/api/auth/login, connection=PooledConnection{channel=[id: 0xd779632a, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085]}}, [request_prepared])
2025-04-17 19:55:26.695 | 2025-04-17T12:55:26.695Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [d779632a-1, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085] onStateChange(POST{uri=/api/auth/login, connection=PooledConnection{channel=[id: 0xd779632a, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085]}}, [request_sent])
2025-04-17 19:55:26.721 | 2025-04-17T12:55:26.720Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [d779632a-1, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
2025-04-17 19:55:26.721 | HTTP/1.1 403 
2025-04-17 19:55:26.721 | Vary: <filtered>
2025-04-17 19:55:26.721 | Vary: <filtered>
2025-04-17 19:55:26.721 | Vary: <filtered>
2025-04-17 19:55:26.721 | X-Content-Type-Options: <filtered>
2025-04-17 19:55:26.721 | X-XSS-Protection: <filtered>
2025-04-17 19:55:26.721 | Cache-Control: <filtered>
2025-04-17 19:55:26.721 | Pragma: <filtered>
2025-04-17 19:55:26.721 | Expires: <filtered>
2025-04-17 19:55:26.721 | X-Frame-Options: <filtered>
2025-04-17 19:55:26.721 | Transfer-Encoding: <filtered>
2025-04-17 19:55:26.721 | Date: <filtered>
2025-04-17 19:55:26.721 | 2025-04-17T12:55:26.721Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [d779632a-1, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085] onStateChange(POST{uri=/api/auth/login, connection=PooledConnection{channel=[id: 0xd779632a, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085]}}, [response_received])
2025-04-17 19:55:26.721 | 2025-04-17T12:55:26.721Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-04-17 19:55:26.721 | 2025-04-17T12:55:26.721Z DEBUG 1 --- [or-http-epoll-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-api', spring.cloud.gateway.route.uri='http://auth-service:8085'], highCardinalityKeyValues=[http.uri='http://localhost:8082/api/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.029887626, duration(nanos)=2.9887626E7, startTimeNanos=66523997800232}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@611bb542'], parentObservation={name=spring.security.http.secured.requests(secured request), error=null, context=name='spring.security.http.secured.requests', contextualName='secured request', error='null', lowCardinalityKeyValues=[], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.03347599, duration(nanos)=3.347599E7, startTimeNanos=66523994244279}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6e84427b'], parentObservation={name=spring.security.filterchains(security filterchain before), error=null, context=name='spring.security.filterchains', contextualName='security filterchain before', error='null', lowCardinalityKeyValues=[spring.security.filterchain.position='9', spring.security.filterchain.size='9', spring.security.reached.filter.name='AuthorizationWebFilter', spring.security.reached.filter.section='before'], highCardinalityKeyValues=[], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=-1.0E-9, duration(nanos)=-1.0, startTimeNanos=66523991529847}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3afd191c'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.036533744, duration(nanos)=3.6533744E7, startTimeNanos=66523991246447}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@751dd067'], parentObservation=null}}}}
2025-04-17 19:55:26.722 | 2025-04-17T12:55:26.722Z DEBUG 1 --- [or-http-epoll-9] reactor.netty.channel.FluxReceive        : [d779632a-1, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085] [terminated=false, cancelled=false, pending=0, error=null]: subscribing inbound receiver
2025-04-17 19:55:26.722 | 2025-04-17T12:55:26.722Z DEBUG 1 --- [or-http-epoll-9] r.n.http.client.HttpClientOperations     : [d779632a-1, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085] Received last HTTP packet
2025-04-17 19:55:26.722 | 2025-04-17T12:55:26.722Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [d779632a, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085] onStateChange(POST{uri=/api/auth/login, connection=PooledConnection{channel=[id: 0xd779632a, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085]}}, [response_completed])
2025-04-17 19:55:26.722 | 2025-04-17T12:55:26.722Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [d779632a, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085] onStateChange(POST{uri=/api/auth/login, connection=PooledConnection{channel=[id: 0xd779632a, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085]}}, [disconnecting])
2025-04-17 19:55:26.722 | 2025-04-17T12:55:26.722Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [d779632a, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085] Releasing channel
2025-04-17 19:55:26.723 | 2025-04-17T12:55:26.722Z DEBUG 1 --- [or-http-epoll-9] r.n.resources.PooledConnectionProvider   : [d779632a, L:/172.18.0.10:33160 - R:auth-service/172.18.0.8:8085] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.
2025-04-17 19:55:26.723 | 2025-04-17T12:55:26.723Z  INFO 1 --- [r-http-epoll-10] s.s.a.filter.GlobalFilters               : Completed request: POST /api/auth/login - 403 in 35 ms [request_id: 47f24244-9dd9-4301-b095-5420bab17b80]
2025-04-17 19:55:26.723 | 2025-04-17T12:55:26.723Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [86ecf418-45] Completed 403 FORBIDDEN
2025-04-17 19:55:26.723 | 2025-04-17T12:55:26.723Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-22, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP response frame
2025-04-17 19:55:26.723 | 2025-04-17T12:55:26.723Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-22, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Decreasing pending responses, now 0
2025-04-17 19:55:26.723 | 2025-04-17T12:55:26.723Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [86ecf418-22, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] Last HTTP packet was sent, terminating the channel
2025-04-17 19:55:26.723 | 2025-04-17T12:55:26.723Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [86ecf418-22, L:/172.18.0.10:8082 - R:/172.18.0.1:43084] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:54.742 | 2025-04-17T12:55:54.742Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [c24b144f, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53238] New http connection, requesting read
2025-04-17 19:55:54.742 | 2025-04-17T12:55:54.742Z DEBUG 1 --- [r-http-epoll-10] r.netty.transport.TransportConfig        : [c24b144f, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53238] Initialized pipeline DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:54.742 | 2025-04-17T12:55:54.742Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [c24b144f, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53238] Increasing pending responses, now 1
2025-04-17 19:55:54.742 | 2025-04-17T12:55:54.742Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.http.server.HttpServer     : [c24b144f-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53238] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@2c4c3157
2025-04-17 19:55:54.742 | 2025-04-17T12:55:54.742Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c24b144f-46] HTTP GET "/actuator/health"
2025-04-17 19:55:54.743 | 2025-04-17T12:55:54.743Z DEBUG 1 --- [r-http-epoll-10] reactor.netty.ReactorNetty               : [c24b144f-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53238] Non Removed handler: reactor.left.readTimeoutHandler, context: null, pipeline: DefaultChannelPipeline{(reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2025-04-17 19:55:54.743 | 2025-04-17T12:55:54.743Z DEBUG 1 --- [     parallel-2] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.
2025-04-17 19:55:54.743 | 2025-04-17T12:55:54.743Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-17 19:55:54.743 | 2025-04-17T12:55:54.743Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'POST /logout'
2025-04-17 19:55:54.743 | 2025-04-17T12:55:54.743Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:54.743 | 2025-04-17T12:55:54.743Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/v3/api-docs/**', method=null}
2025-04-17 19:55:54.743 | 2025-04-17T12:55:54.743Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /v3/api-docs/**'
2025-04-17 19:55:54.743 | 2025-04-17T12:55:54.743Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui/**', method=null}
2025-04-17 19:55:54.743 | 2025-04-17T12:55:54.743Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui/**'
2025-04-17 19:55:54.743 | 2025-04-17T12:55:54.743Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/swagger-ui.html', method=null}
2025-04-17 19:55:54.743 | 2025-04-17T12:55:54.743Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /swagger-ui.html'
2025-04-17 19:55:54.744 | 2025-04-17T12:55:54.743Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/webjars/**', method=null}
2025-04-17 19:55:54.744 | 2025-04-17T12:55:54.744Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /actuator/health' doesn't match 'null /webjars/**'
2025-04-17 19:55:54.744 | 2025-04-17T12:55:54.744Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-17 19:55:54.744 | 2025-04-17T12:55:54.744Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}
2025-04-17 19:55:54.744 | 2025-04-17T12:55:54.744Z DEBUG 1 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Checking match of request : '/actuator/health'; against '/actuator/health/**'
2025-04-17 19:55:54.744 | 2025-04-17T12:55:54.744Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-17 19:55:54.744 | 2025-04-17T12:55:54.744Z DEBUG 1 --- [     parallel-2] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/actuator/health' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$977/0x000000080123c400@5772c05c
2025-04-17 19:55:54.744 | 2025-04-17T12:55:54.744Z DEBUG 1 --- [     parallel-2] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-17 19:55:54.745 | 2025-04-17T12:55:54.744Z DEBUG 1 --- [     parallel-2] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@5d9cba4'
2025-04-17 19:55:54.746 | 2025-04-17T12:55:54.746Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [c24b144f-46] Using 'application/vnd.spring-boot.actuator.v3+json' given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-04-17 19:55:54.746 | 2025-04-17T12:55:54.746Z DEBUG 1 --- [llEventLoop-5-1] .s.w.r.r.m.a.ResponseEntityResultHandler : [c24b144f-46] 0..1 [org.springframework.boot.actuate.health.SystemHealth]
2025-04-17 19:55:54.746 | 2025-04-17T12:55:54.746Z DEBUG 1 --- [llEventLoop-5-1] org.springframework.web.HttpLogging      : [c24b144f-46] Encoding [org.springframework.boot.actuate.health.SystemHealth@4990da23]
2025-04-17 19:55:54.747 | 2025-04-17T12:55:54.747Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [c24b144f-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53238] Decreasing pending responses, now 0
2025-04-17 19:55:54.747 | 2025-04-17T12:55:54.747Z DEBUG 1 --- [r-http-epoll-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c24b144f-46] Completed 200 OK
2025-04-17 19:55:54.747 | 2025-04-17T12:55:54.747Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [c24b144f-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53238] Last HTTP response frame
2025-04-17 19:55:54.747 | 2025-04-17T12:55:54.747Z DEBUG 1 --- [r-http-epoll-10] r.netty.channel.ChannelOperations        : [c24b144f-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53238] [HttpServer] Channel inbound receiver cancelled (subscription disposed).
2025-04-17 19:55:54.747 | 2025-04-17T12:55:54.747Z DEBUG 1 --- [r-http-epoll-10] r.n.http.server.HttpServerOperations     : [c24b144f-1, L:/[0:0:0:0:0:0:0:1%0]:8082 - R:/[0:0:0:0:0:0:0:1%0]:53238] Last HTTP packet was sent, terminating the channel
2025-04-17 19:56:16.624 | 2025-04-17T12:56:16.624Z DEBUG 1 --- [r-http-epoll-11] r.n.r.DefaultPooledConnectionProvider    : [3f274513, L:/172.18.0.10:33884 ! R:image-storage/172.18.0.6:8081] onStateChange(PooledConnection{channel=[id: 0x3f274513, L:/172.18.0.10:33884 ! R:image-storage/172.18.0.6:8081]}, [disconnecting])
2025-04-17 19:56:16.624 | 2025-04-17T12:56:16.624Z DEBUG 1 --- [or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [1b7ee7b8, L:/172.18.0.10:33910 ! R:image-storage/172.18.0.6:8081] onStateChange(PooledConnection{channel=[id: 0x1b7ee7b8, L:/172.18.0.10:33910 ! R:image-storage/172.18.0.6:8081]}, [disconnecting])
2025-04-17 19:56:16.624 | 2025-04-17T12:56:16.624Z DEBUG 1 --- [or-http-epoll-6] r.n.r.DefaultPooledConnectionProvider    : [845f779e, L:/172.18.0.10:33896 ! R:image-storage/172.18.0.6:8081] onStateChange(PooledConnection{channel=[id: 0x845f779e, L:/172.18.0.10:33896 ! R:image-storage/172.18.0.6:8081]}, [disconnecting])
2025-04-17 19:56:16.624 | 2025-04-17T12:56:16.624Z DEBUG 1 --- [or-http-epoll-4] r.n.r.DefaultPooledConnectionProvider    : [f875d97f, L:/172.18.0.10:33890 ! R:image-storage/172.18.0.6:8081] onStateChange(PooledConnection{channel=[id: 0xf875d97f, L:/172.18.0.10:33890 ! R:image-storage/172.18.0.6:8081]}, [disconnecting])
2025-04-17 19:56:16.624 | 2025-04-17T12:56:16.624Z DEBUG 1 --- [or-http-epoll-9] r.n.r.DefaultPooledConnectionProvider    : [048130ac, L:/172.18.0.10:34058 ! R:image-storage/172.18.0.6:8081] onStateChange(PooledConnection{channel=[id: 0x048130ac, L:/172.18.0.10:34058 ! R:image-storage/172.18.0.6:8081]}, [disconnecting])
2025-04-17 19:56:17.625 | 2025-04-17T12:56:17.625Z DEBUG 1 --- [or-http-epoll-5] r.n.r.DefaultPooledConnectionProvider    : [a01001af, L:/172.18.0.10:33886 ! R:image-storage/172.18.0.6:8081] onStateChange(PooledConnection{channel=[id: 0xa01001af, L:/172.18.0.10:33886 ! R:image-storage/172.18.0.6:8081]}, [disconnecting])