2025-04-17 05:52:54.361 | 
2025-04-17 05:52:54.361 |   .   ____          _            __ _ _
2025-04-17 05:52:54.361 |  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2025-04-17 05:52:54.361 | ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2025-04-17 05:52:54.361 |  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2025-04-17 05:52:54.361 |   '  |____| .__|_| |_|_| |_\__, | / / / /
2025-04-17 05:52:54.362 |  =========|_|==============|___/=/_/_/_/
2025-04-17 05:52:54.362 | 
2025-04-17 05:52:54.363 |  :: Spring Boot ::       (v3.4.1-SNAPSHOT)
2025-04-17 05:52:54.363 | 
2025-04-17 05:52:54.513 | 2025-04-16T22:52:54.511Z  INFO 1 --- [compression-service] [           main] c.s.c.CompressionServiceApplication      : Starting CompressionServiceApplication v0.0.1-SNAPSHOT using Java 21.0.6 with PID 1 (/app.jar started by root in /)
2025-04-17 05:52:54.514 | 2025-04-16T22:52:54.513Z DEBUG 1 --- [compression-service] [           main] c.s.c.CompressionServiceApplication      : Running with Spring Boot v3.4.1-SNAPSHOT, Spring v6.2.1
2025-04-17 05:52:54.514 | 2025-04-16T22:52:54.514Z  INFO 1 --- [compression-service] [           main] c.s.c.CompressionServiceApplication      : The following 1 profile is active: "docker"
2025-04-17 05:52:56.475 | 2025-04-16T22:52:56.474Z  INFO 1 --- [compression-service] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-17 05:52:56.594 | 2025-04-16T22:52:56.594Z  INFO 1 --- [compression-service] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 98 ms. Found 1 JPA repository interface.
2025-04-17 05:52:58.396 | 2025-04-16T22:52:58.395Z  INFO 1 --- [compression-service] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-04-17 05:52:58.459 | 2025-04-16T22:52:58.458Z  INFO 1 --- [compression-service] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-04-17 05:52:58.459 | 2025-04-16T22:52:58.459Z  INFO 1 --- [compression-service] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-04-17 05:52:58.581 | 2025-04-16T22:52:58.580Z  INFO 1 --- [compression-service] [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-04-17 05:52:58.582 | 2025-04-16T22:52:58.581Z  INFO 1 --- [compression-service] [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3990 ms
2025-04-17 05:52:59.076 | 2025-04-16T22:52:59.075Z  INFO 1 --- [compression-service] [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-17 05:52:59.262 | 2025-04-16T22:52:59.262Z  INFO 1 --- [compression-service] [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.4.Final
2025-04-17 05:52:59.348 | 2025-04-16T22:52:59.347Z  INFO 1 --- [compression-service] [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-17 05:53:00.096 | 2025-04-16T22:53:00.095Z  INFO 1 --- [compression-service] [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-17 05:53:00.144 | 2025-04-16T22:53:00.144Z  INFO 1 --- [compression-service] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-17 05:53:00.524 | 2025-04-16T22:53:00.523Z  INFO 1 --- [compression-service] [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:file:/app/data/compression-db user=SA
2025-04-17 05:53:00.528 | 2025-04-16T22:53:00.528Z  INFO 1 --- [compression-service] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-17 05:53:00.577 | 2025-04-16T22:53:00.577Z  WARN 1 --- [compression-service] [           main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-04-17 05:53:00.622 | 2025-04-16T22:53:00.616Z  INFO 1 --- [compression-service] [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
2025-04-17 05:53:00.622 | 	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
2025-04-17 05:53:00.622 | 	Database driver: undefined/unknown
2025-04-17 05:53:00.622 | 	Database version: 2.3.232
2025-04-17 05:53:00.622 | 	Autocommit mode: undefined/unknown
2025-04-17 05:53:00.622 | 	Isolation level: undefined/unknown
2025-04-17 05:53:00.622 | 	Minimum pool size: undefined/unknown
2025-04-17 05:53:00.622 | 	Maximum pool size: undefined/unknown
2025-04-17 05:53:02.146 | 2025-04-16T22:53:02.146Z  INFO 1 --- [compression-service] [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-17 05:53:02.243 | 2025-04-16T22:53:02.242Z  INFO 1 --- [compression-service] [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-17 05:53:02.260 | 2025-04-16T22:53:02.259Z  INFO 1 --- [compression-service] [           main] c.s.c.config.RemoteStorageConfig         : Инициализирована конфигурация удаленного хранилища. CompressionService будет использовать RemoteImageStorageService.
2025-04-17 05:53:02.789 | 2025-04-16T22:53:02.789Z  INFO 1 --- [compression-service] [           main] c.s.c.s.image.RemoteImageStorageService  : Инициализирована реализация RemoteImageStorageService
2025-04-17 05:53:03.276 | 2025-04-16T22:53:03.275Z  WARN 1 --- [compression-service] [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-17 05:53:03.327 | 2025-04-16T22:53:03.327Z  INFO 1 --- [compression-service] [           main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-04-17 05:53:04.804 | 2025-04-16T22:53:04.804Z  INFO 1 --- [compression-service] [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:/app/data/compression-db'
2025-04-17 05:53:05.293 | 2025-04-16T22:53:05.293Z  INFO 1 --- [compression-service] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-04-17 05:53:05.299 | 2025-04-16T22:53:05.298Z  INFO 1 --- [compression-service] [           main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [rabbitmq:5672]
2025-04-17 05:53:05.432 | 2025-04-16T22:53:05.431Z  INFO 1 --- [compression-service] [           main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#66b62ebd:0/SimpleConnection@75eca6d8 [delegate=amqp://guest@172.18.0.3:5672/, localPort=39326]
2025-04-17 05:53:05.735 | 2025-04-16T22:53:05.734Z  INFO 1 --- [compression-service] [           main] c.s.c.CompressionServiceApplication      : Started CompressionServiceApplication in 11.958 seconds (process running for 12.87)
2025-04-17 05:53:05.735 | 2025-04-16T22:53:05.735Z  WARN 1 --- [compression-service] [           main] c.s.c.config.DockerComposeRunner         : docker-compose.yml not found in the current directory
2025-04-17 05:53:05.735 | 2025-04-16T22:53:05.735Z ERROR 1 --- [compression-service] [           main] c.s.c.config.DockerComposeRunner         : docker-compose.yml not found
2025-04-17 05:53:05.742 | 2025-04-16T22:53:05.742Z  INFO 1 --- [compression-service] [           main] c.s.c.config.WebpInitializer             : Initializing WebP binary...
2025-04-17 05:53:05.743 | 2025-04-16T22:53:05.743Z  INFO 1 --- [compression-service] [           main] c.s.c.config.WebpInitializer             : Searching for WebP binary in system directories...
2025-04-17 05:53:05.756 | 2025-04-16T22:53:05.754Z  INFO 1 --- [compression-service] [           main] c.s.c.config.WebpInitializer             : Found WebP binary at system location: /app/webp_binaries/cwebp
2025-04-17 05:53:05.756 | 2025-04-16T22:53:05.754Z  INFO 1 --- [compression-service] [           main] c.s.c.config.WebpInitializer             : Found WebP binary at: /app/webp_binaries/cwebp, copying to: /app/webp_binaries/cwebp
2025-04-17 05:53:05.766 | 2025-04-16T22:53:05.766Z  INFO 1 --- [compression-service] [           main] c.s.c.config.WebpInitializer             : Set executable permissions on: /app/webp_binaries/cwebp
2025-04-17 05:53:05.766 | 2025-04-16T22:53:05.766Z  INFO 1 --- [compression-service] [           main] c.s.c.config.WebpInitializer             : WebP binary path set to: /app/webp_binaries/cwebp
2025-04-17 05:53:05.767 | 2025-04-16T22:53:05.766Z  INFO 1 --- [compression-service] [           main] c.s.c.config.WebpInitializer             : Verifying WebP binary at: /app/webp_binaries/cwebp
2025-04-17 05:53:05.795 | 2025-04-16T22:53:05.795Z ERROR 1 --- [compression-service] [           main] c.s.c.config.WebpInitializer             : WebP binary test failed with exit code: 139
2025-04-17 05:53:05.796 | 2025-04-16T22:53:05.795Z  INFO 1 --- [compression-service] [           main] c.s.c.config.WebpInitializer             : Trying fallback verification with -h flag
2025-04-17 05:53:05.811 | 2025-04-16T22:53:05.810Z ERROR 1 --- [compression-service] [           main] c.s.c.config.WebpInitializer             : WebP binary verification failed with both version and help flags
2025-04-17 05:53:08.260 | 2025-04-16T22:53:08.259Z  INFO 1 --- [compression-service] [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-17 05:53:08.260 | 2025-04-16T22:53:08.260Z  INFO 1 --- [compression-service] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-04-17 05:53:08.261 | 2025-04-16T22:53:08.261Z  INFO 1 --- [compression-service] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-04-17 05:53:13.067 | 2025-04-16T22:53:13.066Z  INFO 1 --- [compression-service] [nio-8080-exec-3] c.s.c.s.compression.CompressionService   : Getting original size for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:13.067 | 2025-04-16T22:53:13.067Z  INFO 1 --- [compression-service] [nio-8080-exec-3] c.s.c.service.client.ImageStorageClient  : Getting metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:13.067 | 2025-04-16T22:53:13.067Z DEBUG 1 --- [compression-service] [nio-8080-exec-3] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:13.068 | 2025-04-16T22:53:13.067Z  INFO 1 --- [compression-service] [nio-8080-exec-3] c.s.c.messaging.MessageSender            : Sending message to storage service: 8b85c7dc-f0a0-4c1d-933a-2d8d033f1474, action: GET_METADATA
2025-04-17 05:53:13.098 | 2025-04-16T22:53:13.098Z DEBUG 1 --- [compression-service] [nio-8080-exec-3] c.s.c.service.client.ImageStorageClient  : Sent GET_METADATA request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:13.173 | 2025-04-16T22:53:13.172Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/json, correlation ID: null, imageId: null, action: null
2025-04-17 05:53:13.205 | 2025-04-16T22:53:13.204Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message from storage service: 97af57fc-299e-4a01-857f-86feed77916e, action: METADATA
2025-04-17 05:53:13.205 | 2025-04-16T22:53:13.205Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Processing message with action: METADATA for imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:13.205 | 2025-04-16T22:53:13.205Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Received metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, compressionLevel: 0
2025-04-17 05:53:13.206 | 2025-04-16T22:53:13.205Z  INFO 1 --- [compression-service] [nio-8080-exec-3] c.s.c.service.client.ImageStorageClient  : Successfully retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:13.206 | 2025-04-16T22:53:13.205Z  INFO 1 --- [compression-service] [nio-8080-exec-3] c.s.c.s.compression.CompressionService   : Image is not compressed, returning current size: 1331383
2025-04-17 05:53:16.769 | 2025-04-16T22:53:16.769Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.s.compression.CompressionService   : Starting compression for image: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, level: 24
2025-04-17 05:53:16.769 | 2025-04-16T22:53:16.769Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.service.client.ImageStorageClient  : Getting image data for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.769 | 2025-04-16T22:53:16.769Z DEBUG 1 --- [compression-service] [nio-8080-exec-5] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.769 | 2025-04-16T22:53:16.769Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.messaging.MessageSender            : Sending message to storage service: 79b7987f-ce61-43f4-bd36-2bac25846b9a, action: GET_IMAGE
2025-04-17 05:53:16.770 | 2025-04-16T22:53:16.770Z DEBUG 1 --- [compression-service] [nio-8080-exec-5] c.s.c.service.client.ImageStorageClient  : Sent GET_IMAGE request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.838 | 2025-04-16T22:53:16.837Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/octet-stream, correlation ID: c7638170-665a-4eb3-a246-0c673b208941, imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, action: IMAGE_DATA
2025-04-17 05:53:16.838 | 2025-04-16T22:53:16.837Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received binary data message: correlationId=c7638170-665a-4eb3-a246-0c673b208941, imageId=25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, action=IMAGE_DATA, size=1331383 bytes
2025-04-17 05:53:16.838 | 2025-04-16T22:53:16.838Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Storing binary data in cache for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, data length: 1331383 bytes
2025-04-17 05:53:16.838 | 2025-04-16T22:53:16.838Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Found and executing callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.838 | 2025-04-16T22:53:16.838Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Retrieved image data from cache for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, data length: 1331383
2025-04-17 05:53:16.838 | 2025-04-16T22:53:16.838Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Image data successfully retrieved for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:16.838 | 2025-04-16T22:53:16.838Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.service.client.ImageStorageClient  : Successfully fetched image data for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:16.838 | 2025-04-16T22:53:16.838Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.s.compression.CompressionService   : Retrieved image data for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:16.838 | 2025-04-16T22:53:16.838Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.service.client.ImageStorageClient  : Getting metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.838 | 2025-04-16T22:53:16.838Z DEBUG 1 --- [compression-service] [nio-8080-exec-5] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.839 | 2025-04-16T22:53:16.839Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.messaging.MessageSender            : Sending message to storage service: 08941287-dc34-4d27-ab65-e5a7752034fd, action: GET_METADATA
2025-04-17 05:53:16.839 | 2025-04-16T22:53:16.839Z DEBUG 1 --- [compression-service] [nio-8080-exec-5] c.s.c.service.client.ImageStorageClient  : Sent GET_METADATA request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.845 | 2025-04-16T22:53:16.844Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/json, correlation ID: null, imageId: null, action: null
2025-04-17 05:53:16.845 | 2025-04-16T22:53:16.845Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message from storage service: d4c62f45-04d8-4cf1-9715-cc459c9ecf8a, action: METADATA
2025-04-17 05:53:16.845 | 2025-04-16T22:53:16.845Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Processing message with action: METADATA for imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.846 | 2025-04-16T22:53:16.845Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Received metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, compressionLevel: 0
2025-04-17 05:53:16.846 | 2025-04-16T22:53:16.846Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.service.client.ImageStorageClient  : Successfully retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.846 | 2025-04-16T22:53:16.846Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.s.compression.CompressionService   : Retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, metadata present: true
2025-04-17 05:53:16.846 | 2025-04-16T22:53:16.846Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.s.compression.CompressionService   : Converting image to WebP with quality: 76
2025-04-17 05:53:16.850 | 2025-04-16T22:53:16.850Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.compressionservice.util.webp.CWebp   : Using WebP binary from system property: /app/webp_binaries/cwebp
2025-04-17 05:53:16.858 | 2025-04-16T22:53:16.858Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.compressionservice.util.webp.CWebp   : Executing WebP command: /app/webp_binaries/cwebp -q 76 -alpha_q 100  -o /tmp/webp_conversion_4811956413885284457/output_image.webp /tmp/webp_conversion_4811956413885284457/input_image.bin
2025-04-17 05:53:16.865 | 2025-04-16T22:53:16.865Z  WARN 1 --- [compression-service] [nio-8080-exec-5] c.s.compressionservice.util.webp.CWebp   : cwebp process error: Segmentation fault
2025-04-17 05:53:16.865 | 
2025-04-17 05:53:16.871 | 2025-04-16T22:53:16.866Z ERROR 1 --- [compression-service] [nio-8080-exec-5] c.s.c.service.webp.WebpService           : Failed to convert image to WebP with custom options: Error processing image: WebP conversion failed with exit code: 139
2025-04-17 05:53:16.871 | 
2025-04-17 05:53:16.871 | com.shadowshiftstudio.compressionservice.util.webp.CWebpException: Error processing image: WebP conversion failed with exit code: 139
2025-04-17 05:53:16.871 | 	at com.shadowshiftstudio.compressionservice.util.webp.WebpConverter.imageToWebpByte(WebpConverter.java:121) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:16.871 | 	at com.shadowshiftstudio.compressionservice.service.webp.WebpService.convertToWebp(WebpService.java:69) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:16.871 | 	at com.shadowshiftstudio.compressionservice.service.compression.CompressionService.compressImage(CompressionService.java:85) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:16.871 | 	at com.shadowshiftstudio.compressionservice.controller.CompressionController.compressImage(CompressionController.java:69) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:16.871 | 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Unknown Source) ~[na:na]
2025-04-17 05:53:16.871 | 	at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]
2025-04-17 05:53:16.871 | 	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.871 | 	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]
2025-04-17 05:53:16.871 | Caused by: java.io.IOException: WebP conversion failed with exit code: 139
2025-04-17 05:53:16.871 | 	at com.shadowshiftstudio.compressionservice.util.webp.CWebp.convertFromBytes(CWebp.java:251) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:16.871 | 	at com.shadowshiftstudio.compressionservice.util.webp.WebpConverter.imageToWebpByte(WebpConverter.java:119) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:16.871 | 	... 51 common frames omitted
2025-04-17 05:53:16.871 | 
2025-04-17 05:53:16.871 | 2025-04-16T22:53:16.871Z ERROR 1 --- [compression-service] [nio-8080-exec-5] c.s.c.s.compression.CompressionService   : WebP conversion failed for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.871 | java.io.IOException: WebP conversion failed
2025-04-17 05:53:16.871 | 	at com.shadowshiftstudio.compressionservice.service.compression.CompressionService.compressImage(CompressionService.java:89)
2025-04-17 05:53:16.871 | 	at com.shadowshiftstudio.compressionservice.controller.CompressionController.compressImage(CompressionController.java:69)
2025-04-17 05:53:16.871 | 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Unknown Source)
2025-04-17 05:53:16.871 | 	at java.base/java.lang.reflect.Method.invoke(Unknown Source)
2025-04-17 05:53:16.871 | 	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
2025-04-17 05:53:16.871 | 	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
2025-04-17 05:53:16.871 | 	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
2025-04-17 05:53:16.871 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
2025-04-17 05:53:16.872 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
2025-04-17 05:53:16.872 | 	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
2025-04-17 05:53:16.872 | 	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
2025-04-17 05:53:16.872 | 	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
2025-04-17 05:53:16.872 | 	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
2025-04-17 05:53:16.872 | 	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
2025-04-17 05:53:16.872 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
2025-04-17 05:53:16.872 | 	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
2025-04-17 05:53:16.872 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
2025-04-17 05:53:16.872 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
2025-04-17 05:53:16.872 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:16.872 | 	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
2025-04-17 05:53:16.872 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:16.872 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:16.872 | 	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
2025-04-17 05:53:16.872 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:16.872 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:16.872 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:16.872 | 	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
2025-04-17 05:53:16.872 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:16.872 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:16.872 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:16.872 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
2025-04-17 05:53:16.873 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:16.873 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:16.873 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:16.873 | 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
2025-04-17 05:53:16.873 | 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
2025-04-17 05:53:16.873 | 	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
2025-04-17 05:53:16.873 | 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
2025-04-17 05:53:16.873 | 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
2025-04-17 05:53:16.873 | 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
2025-04-17 05:53:16.873 | 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
2025-04-17 05:53:16.873 | 	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
2025-04-17 05:53:16.873 | 	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
2025-04-17 05:53:16.873 | 	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
2025-04-17 05:53:16.873 | 	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
2025-04-17 05:53:16.873 | 	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
2025-04-17 05:53:16.873 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
2025-04-17 05:53:16.873 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
2025-04-17 05:53:16.873 | 	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
2025-04-17 05:53:16.873 | 	at java.base/java.lang.Thread.run(Unknown Source)
2025-04-17 05:53:16.939 | 2025-04-16T22:53:16.939Z  INFO 1 --- [compression-service] [nio-8080-exec-6] c.s.c.s.compression.CompressionService   : Starting compression for image: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, level: 24
2025-04-17 05:53:16.939 | 2025-04-16T22:53:16.939Z  INFO 1 --- [compression-service] [nio-8080-exec-6] c.s.c.service.client.ImageStorageClient  : Getting image data for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.939 | 2025-04-16T22:53:16.939Z DEBUG 1 --- [compression-service] [nio-8080-exec-6] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.939 | 2025-04-16T22:53:16.939Z  INFO 1 --- [compression-service] [nio-8080-exec-6] c.s.c.messaging.MessageSender            : Sending message to storage service: 401f03d9-3508-46ff-be30-2b3bab334326, action: GET_IMAGE
2025-04-17 05:53:16.940 | 2025-04-16T22:53:16.940Z DEBUG 1 --- [compression-service] [nio-8080-exec-6] c.s.c.service.client.ImageStorageClient  : Sent GET_IMAGE request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.955 | 2025-04-16T22:53:16.955Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/octet-stream, correlation ID: 6ff8feb3-b4ff-402d-b520-e7e45aeaaa88, imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, action: IMAGE_DATA
2025-04-17 05:53:16.955 | 2025-04-16T22:53:16.955Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received binary data message: correlationId=6ff8feb3-b4ff-402d-b520-e7e45aeaaa88, imageId=25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, action=IMAGE_DATA, size=1331383 bytes
2025-04-17 05:53:16.955 | 2025-04-16T22:53:16.955Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Storing binary data in cache for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, data length: 1331383 bytes
2025-04-17 05:53:16.955 | 2025-04-16T22:53:16.955Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Found and executing callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.955 | 2025-04-16T22:53:16.955Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Retrieved image data from cache for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, data length: 1331383
2025-04-17 05:53:16.955 | 2025-04-16T22:53:16.955Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Image data successfully retrieved for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:16.955 | 2025-04-16T22:53:16.955Z  INFO 1 --- [compression-service] [nio-8080-exec-6] c.s.c.service.client.ImageStorageClient  : Successfully fetched image data for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:16.955 | 2025-04-16T22:53:16.955Z  INFO 1 --- [compression-service] [nio-8080-exec-6] c.s.c.s.compression.CompressionService   : Retrieved image data for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:16.955 | 2025-04-16T22:53:16.955Z  INFO 1 --- [compression-service] [nio-8080-exec-6] c.s.c.service.client.ImageStorageClient  : Getting metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.955 | 2025-04-16T22:53:16.955Z DEBUG 1 --- [compression-service] [nio-8080-exec-6] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.956 | 2025-04-16T22:53:16.955Z  INFO 1 --- [compression-service] [nio-8080-exec-6] c.s.c.messaging.MessageSender            : Sending message to storage service: f3be93ef-66de-40c8-90e5-4f2b3bbd6cfb, action: GET_METADATA
2025-04-17 05:53:16.956 | 2025-04-16T22:53:16.956Z DEBUG 1 --- [compression-service] [nio-8080-exec-6] c.s.c.service.client.ImageStorageClient  : Sent GET_METADATA request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.961 | 2025-04-16T22:53:16.960Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/json, correlation ID: null, imageId: null, action: null
2025-04-17 05:53:16.961 | 2025-04-16T22:53:16.961Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message from storage service: 0c0c9d80-3141-461d-94a0-694414f3a24c, action: METADATA
2025-04-17 05:53:16.961 | 2025-04-16T22:53:16.961Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Processing message with action: METADATA for imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.961 | 2025-04-16T22:53:16.961Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Received metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, compressionLevel: 0
2025-04-17 05:53:16.961 | 2025-04-16T22:53:16.961Z  INFO 1 --- [compression-service] [nio-8080-exec-6] c.s.c.service.client.ImageStorageClient  : Successfully retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.961 | 2025-04-16T22:53:16.961Z  INFO 1 --- [compression-service] [nio-8080-exec-6] c.s.c.s.compression.CompressionService   : Retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, metadata present: true
2025-04-17 05:53:16.961 | 2025-04-16T22:53:16.961Z  INFO 1 --- [compression-service] [nio-8080-exec-6] c.s.c.s.compression.CompressionService   : Converting image to WebP with quality: 76
2025-04-17 05:53:16.965 | 2025-04-16T22:53:16.965Z  INFO 1 --- [compression-service] [nio-8080-exec-6] c.s.compressionservice.util.webp.CWebp   : Executing WebP command: /app/webp_binaries/cwebp -q 76 -alpha_q 100  -o /tmp/webp_conversion_14961310139672577989/output_image.webp /tmp/webp_conversion_14961310139672577989/input_image.bin
2025-04-17 05:53:16.973 | 2025-04-16T22:53:16.973Z  WARN 1 --- [compression-service] [nio-8080-exec-6] c.s.compressionservice.util.webp.CWebp   : cwebp process error: Segmentation fault
2025-04-17 05:53:16.973 | 
2025-04-17 05:53:16.975 | 2025-04-16T22:53:16.974Z ERROR 1 --- [compression-service] [nio-8080-exec-6] c.s.c.service.webp.WebpService           : Failed to convert image to WebP with custom options: Error processing image: WebP conversion failed with exit code: 139
2025-04-17 05:53:16.975 | 
2025-04-17 05:53:16.975 | com.shadowshiftstudio.compressionservice.util.webp.CWebpException: Error processing image: WebP conversion failed with exit code: 139
2025-04-17 05:53:16.975 | 	at com.shadowshiftstudio.compressionservice.util.webp.WebpConverter.imageToWebpByte(WebpConverter.java:121) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:16.975 | 	at com.shadowshiftstudio.compressionservice.service.webp.WebpService.convertToWebp(WebpService.java:69) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:16.975 | 	at com.shadowshiftstudio.compressionservice.service.compression.CompressionService.compressImage(CompressionService.java:85) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:16.975 | 	at com.shadowshiftstudio.compressionservice.controller.CompressionController.compressImage(CompressionController.java:69) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:16.975 | 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Unknown Source) ~[na:na]
2025-04-17 05:53:16.975 | 	at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]
2025-04-17 05:53:16.975 | 	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:16.975 | 	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]
2025-04-17 05:53:16.975 | Caused by: java.io.IOException: WebP conversion failed with exit code: 139
2025-04-17 05:53:16.975 | 	at com.shadowshiftstudio.compressionservice.util.webp.CWebp.convertFromBytes(CWebp.java:251) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:16.975 | 	at com.shadowshiftstudio.compressionservice.util.webp.WebpConverter.imageToWebpByte(WebpConverter.java:119) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:16.975 | 	... 51 common frames omitted
2025-04-17 05:53:16.975 | 
2025-04-17 05:53:16.975 | 2025-04-16T22:53:16.975Z ERROR 1 --- [compression-service] [nio-8080-exec-6] c.s.c.s.compression.CompressionService   : WebP conversion failed for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:16.975 | java.io.IOException: WebP conversion failed
2025-04-17 05:53:16.975 | 	at com.shadowshiftstudio.compressionservice.service.compression.CompressionService.compressImage(CompressionService.java:89)
2025-04-17 05:53:16.975 | 	at com.shadowshiftstudio.compressionservice.controller.CompressionController.compressImage(CompressionController.java:69)
2025-04-17 05:53:16.975 | 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Unknown Source)
2025-04-17 05:53:16.975 | 	at java.base/java.lang.reflect.Method.invoke(Unknown Source)
2025-04-17 05:53:16.975 | 	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
2025-04-17 05:53:16.975 | 	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
2025-04-17 05:53:16.975 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
2025-04-17 05:53:16.975 | 	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
2025-04-17 05:53:16.975 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:16.975 | 	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:16.975 | 	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
2025-04-17 05:53:16.975 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:16.975 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:16.975 | 	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
2025-04-17 05:53:16.976 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:16.976 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:16.976 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:16.976 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
2025-04-17 05:53:16.976 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:16.976 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:16.976 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:16.976 | 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
2025-04-17 05:53:16.976 | 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
2025-04-17 05:53:16.976 | 	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
2025-04-17 05:53:16.976 | 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
2025-04-17 05:53:16.976 | 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
2025-04-17 05:53:16.976 | 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
2025-04-17 05:53:16.976 | 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
2025-04-17 05:53:16.976 | 	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
2025-04-17 05:53:16.976 | 	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
2025-04-17 05:53:16.976 | 	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
2025-04-17 05:53:16.976 | 	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
2025-04-17 05:53:16.976 | 	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
2025-04-17 05:53:16.976 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
2025-04-17 05:53:16.976 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
2025-04-17 05:53:16.976 | 	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
2025-04-17 05:53:16.976 | 	at java.base/java.lang.Thread.run(Unknown Source)
2025-04-17 05:53:17.090 | 2025-04-16T22:53:17.090Z  INFO 1 --- [compression-service] [nio-8080-exec-7] c.s.c.s.compression.CompressionService   : Starting compression for image: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, level: 24
2025-04-17 05:53:17.090 | 2025-04-16T22:53:17.090Z  INFO 1 --- [compression-service] [nio-8080-exec-7] c.s.c.service.client.ImageStorageClient  : Getting image data for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.090 | 2025-04-16T22:53:17.090Z DEBUG 1 --- [compression-service] [nio-8080-exec-7] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.090 | 2025-04-16T22:53:17.090Z  INFO 1 --- [compression-service] [nio-8080-exec-7] c.s.c.messaging.MessageSender            : Sending message to storage service: 630ccaee-d635-4f3e-ae8b-460d4653e4c7, action: GET_IMAGE
2025-04-17 05:53:17.091 | 2025-04-16T22:53:17.091Z DEBUG 1 --- [compression-service] [nio-8080-exec-7] c.s.c.service.client.ImageStorageClient  : Sent GET_IMAGE request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.114 | 2025-04-16T22:53:17.114Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/octet-stream, correlation ID: 54b5ae20-042d-4e8a-b5ff-ee947ddd6aa8, imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, action: IMAGE_DATA
2025-04-17 05:53:17.114 | 2025-04-16T22:53:17.114Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received binary data message: correlationId=54b5ae20-042d-4e8a-b5ff-ee947ddd6aa8, imageId=25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, action=IMAGE_DATA, size=1331383 bytes
2025-04-17 05:53:17.114 | 2025-04-16T22:53:17.114Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Storing binary data in cache for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, data length: 1331383 bytes
2025-04-17 05:53:17.114 | 2025-04-16T22:53:17.114Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Found and executing callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.114 | 2025-04-16T22:53:17.114Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Retrieved image data from cache for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, data length: 1331383
2025-04-17 05:53:17.114 | 2025-04-16T22:53:17.114Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Image data successfully retrieved for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:17.115 | 2025-04-16T22:53:17.114Z  INFO 1 --- [compression-service] [nio-8080-exec-7] c.s.c.service.client.ImageStorageClient  : Successfully fetched image data for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:17.115 | 2025-04-16T22:53:17.115Z  INFO 1 --- [compression-service] [nio-8080-exec-7] c.s.c.s.compression.CompressionService   : Retrieved image data for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:17.115 | 2025-04-16T22:53:17.115Z  INFO 1 --- [compression-service] [nio-8080-exec-7] c.s.c.service.client.ImageStorageClient  : Getting metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.115 | 2025-04-16T22:53:17.115Z DEBUG 1 --- [compression-service] [nio-8080-exec-7] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.115 | 2025-04-16T22:53:17.115Z  INFO 1 --- [compression-service] [nio-8080-exec-7] c.s.c.messaging.MessageSender            : Sending message to storage service: 65684462-911b-41e9-8737-f9b1dfa463d3, action: GET_METADATA
2025-04-17 05:53:17.116 | 2025-04-16T22:53:17.116Z DEBUG 1 --- [compression-service] [nio-8080-exec-7] c.s.c.service.client.ImageStorageClient  : Sent GET_METADATA request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.121 | 2025-04-16T22:53:17.121Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/json, correlation ID: null, imageId: null, action: null
2025-04-17 05:53:17.122 | 2025-04-16T22:53:17.122Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message from storage service: 8d81bfeb-acc9-4609-b2a5-14db53d7c2d9, action: METADATA
2025-04-17 05:53:17.122 | 2025-04-16T22:53:17.122Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Processing message with action: METADATA for imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.122 | 2025-04-16T22:53:17.122Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Received metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, compressionLevel: 0
2025-04-17 05:53:17.122 | 2025-04-16T22:53:17.122Z  INFO 1 --- [compression-service] [nio-8080-exec-7] c.s.c.service.client.ImageStorageClient  : Successfully retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.122 | 2025-04-16T22:53:17.122Z  INFO 1 --- [compression-service] [nio-8080-exec-7] c.s.c.s.compression.CompressionService   : Retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, metadata present: true
2025-04-17 05:53:17.122 | 2025-04-16T22:53:17.122Z  INFO 1 --- [compression-service] [nio-8080-exec-7] c.s.c.s.compression.CompressionService   : Converting image to WebP with quality: 76
2025-04-17 05:53:17.126 | 2025-04-16T22:53:17.126Z  INFO 1 --- [compression-service] [nio-8080-exec-7] c.s.compressionservice.util.webp.CWebp   : Executing WebP command: /app/webp_binaries/cwebp -q 76 -alpha_q 100  -o /tmp/webp_conversion_2781480852955466974/output_image.webp /tmp/webp_conversion_2781480852955466974/input_image.bin
2025-04-17 05:53:17.134 | 2025-04-16T22:53:17.134Z  WARN 1 --- [compression-service] [nio-8080-exec-7] c.s.compressionservice.util.webp.CWebp   : cwebp process error: Segmentation fault
2025-04-17 05:53:17.134 | 
2025-04-17 05:53:17.136 | 2025-04-16T22:53:17.135Z ERROR 1 --- [compression-service] [nio-8080-exec-7] c.s.c.service.webp.WebpService           : Failed to convert image to WebP with custom options: Error processing image: WebP conversion failed with exit code: 139
2025-04-17 05:53:17.136 | 
2025-04-17 05:53:17.136 | com.shadowshiftstudio.compressionservice.util.webp.CWebpException: Error processing image: WebP conversion failed with exit code: 139
2025-04-17 05:53:17.136 | 	at com.shadowshiftstudio.compressionservice.util.webp.WebpConverter.imageToWebpByte(WebpConverter.java:121) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:17.136 | 	at com.shadowshiftstudio.compressionservice.service.webp.WebpService.convertToWebp(WebpService.java:69) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:17.136 | 	at com.shadowshiftstudio.compressionservice.service.compression.CompressionService.compressImage(CompressionService.java:85) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:17.136 | 	at com.shadowshiftstudio.compressionservice.controller.CompressionController.compressImage(CompressionController.java:69) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:17.136 | 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Unknown Source) ~[na:na]
2025-04-17 05:53:17.136 | 	at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]
2025-04-17 05:53:17.136 | 	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.136 | 	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]
2025-04-17 05:53:17.136 | Caused by: java.io.IOException: WebP conversion failed with exit code: 139
2025-04-17 05:53:17.136 | 	at com.shadowshiftstudio.compressionservice.util.webp.CWebp.convertFromBytes(CWebp.java:251) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:17.136 | 	at com.shadowshiftstudio.compressionservice.util.webp.WebpConverter.imageToWebpByte(WebpConverter.java:119) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:17.136 | 	... 51 common frames omitted
2025-04-17 05:53:17.136 | 
2025-04-17 05:53:17.136 | 2025-04-16T22:53:17.136Z ERROR 1 --- [compression-service] [nio-8080-exec-7] c.s.c.s.compression.CompressionService   : WebP conversion failed for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.136 | java.io.IOException: WebP conversion failed
2025-04-17 05:53:17.136 | 	at com.shadowshiftstudio.compressionservice.service.compression.CompressionService.compressImage(CompressionService.java:89)
2025-04-17 05:53:17.136 | 	at com.shadowshiftstudio.compressionservice.controller.CompressionController.compressImage(CompressionController.java:69)
2025-04-17 05:53:17.137 | 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Unknown Source)
2025-04-17 05:53:17.137 | 	at java.base/java.lang.reflect.Method.invoke(Unknown Source)
2025-04-17 05:53:17.137 | 	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
2025-04-17 05:53:17.137 | 	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
2025-04-17 05:53:17.137 | 	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
2025-04-17 05:53:17.137 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
2025-04-17 05:53:17.137 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
2025-04-17 05:53:17.137 | 	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
2025-04-17 05:53:17.137 | 	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
2025-04-17 05:53:17.137 | 	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
2025-04-17 05:53:17.137 | 	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
2025-04-17 05:53:17.137 | 	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
2025-04-17 05:53:17.137 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
2025-04-17 05:53:17.137 | 	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
2025-04-17 05:53:17.137 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
2025-04-17 05:53:17.137 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
2025-04-17 05:53:17.137 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:17.137 | 	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
2025-04-17 05:53:17.137 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:17.137 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:17.137 | 	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
2025-04-17 05:53:17.137 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:17.137 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:17.137 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:17.137 | 	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
2025-04-17 05:53:17.137 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:17.137 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:17.137 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:17.137 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
2025-04-17 05:53:17.138 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:17.138 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:17.138 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:17.138 | 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
2025-04-17 05:53:17.138 | 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
2025-04-17 05:53:17.138 | 	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
2025-04-17 05:53:17.138 | 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
2025-04-17 05:53:17.138 | 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
2025-04-17 05:53:17.138 | 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
2025-04-17 05:53:17.138 | 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
2025-04-17 05:53:17.138 | 	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
2025-04-17 05:53:17.138 | 	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
2025-04-17 05:53:17.138 | 	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
2025-04-17 05:53:17.138 | 	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
2025-04-17 05:53:17.138 | 	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
2025-04-17 05:53:17.138 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
2025-04-17 05:53:17.138 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
2025-04-17 05:53:17.138 | 	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
2025-04-17 05:53:17.138 | 	at java.base/java.lang.Thread.run(Unknown Source)
2025-04-17 05:53:17.354 | 2025-04-16T22:53:17.353Z  INFO 1 --- [compression-service] [nio-8080-exec-8] c.s.c.s.compression.CompressionService   : Starting compression for image: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, level: 24
2025-04-17 05:53:17.354 | 2025-04-16T22:53:17.353Z  INFO 1 --- [compression-service] [nio-8080-exec-8] c.s.c.service.client.ImageStorageClient  : Getting image data for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.354 | 2025-04-16T22:53:17.354Z DEBUG 1 --- [compression-service] [nio-8080-exec-8] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.354 | 2025-04-16T22:53:17.354Z  INFO 1 --- [compression-service] [nio-8080-exec-8] c.s.c.messaging.MessageSender            : Sending message to storage service: 22149583-7ab9-49e5-8b16-8a802dbe345f, action: GET_IMAGE
2025-04-17 05:53:17.355 | 2025-04-16T22:53:17.354Z DEBUG 1 --- [compression-service] [nio-8080-exec-8] c.s.c.service.client.ImageStorageClient  : Sent GET_IMAGE request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.384 | 2025-04-16T22:53:17.383Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/octet-stream, correlation ID: 86c321a3-d169-4a5e-9d6b-0a1a2aafaccd, imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, action: IMAGE_DATA
2025-04-17 05:53:17.384 | 2025-04-16T22:53:17.383Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received binary data message: correlationId=86c321a3-d169-4a5e-9d6b-0a1a2aafaccd, imageId=25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, action=IMAGE_DATA, size=1331383 bytes
2025-04-17 05:53:17.384 | 2025-04-16T22:53:17.384Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Storing binary data in cache for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, data length: 1331383 bytes
2025-04-17 05:53:17.384 | 2025-04-16T22:53:17.384Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Found and executing callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.384 | 2025-04-16T22:53:17.384Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Retrieved image data from cache for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, data length: 1331383
2025-04-17 05:53:17.384 | 2025-04-16T22:53:17.384Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Image data successfully retrieved for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:17.384 | 2025-04-16T22:53:17.384Z  INFO 1 --- [compression-service] [nio-8080-exec-8] c.s.c.service.client.ImageStorageClient  : Successfully fetched image data for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:17.384 | 2025-04-16T22:53:17.384Z  INFO 1 --- [compression-service] [nio-8080-exec-8] c.s.c.s.compression.CompressionService   : Retrieved image data for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:17.384 | 2025-04-16T22:53:17.384Z  INFO 1 --- [compression-service] [nio-8080-exec-8] c.s.c.service.client.ImageStorageClient  : Getting metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.384 | 2025-04-16T22:53:17.384Z DEBUG 1 --- [compression-service] [nio-8080-exec-8] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.384 | 2025-04-16T22:53:17.384Z  INFO 1 --- [compression-service] [nio-8080-exec-8] c.s.c.messaging.MessageSender            : Sending message to storage service: e1443ef9-91f4-4eae-b225-a5f193c32d88, action: GET_METADATA
2025-04-17 05:53:17.385 | 2025-04-16T22:53:17.385Z DEBUG 1 --- [compression-service] [nio-8080-exec-8] c.s.c.service.client.ImageStorageClient  : Sent GET_METADATA request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.391 | 2025-04-16T22:53:17.390Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/json, correlation ID: null, imageId: null, action: null
2025-04-17 05:53:17.391 | 2025-04-16T22:53:17.391Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message from storage service: daacbe85-9504-4cdc-976a-916af127c50a, action: METADATA
2025-04-17 05:53:17.391 | 2025-04-16T22:53:17.391Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Processing message with action: METADATA for imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.391 | 2025-04-16T22:53:17.391Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Received metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, compressionLevel: 0
2025-04-17 05:53:17.391 | 2025-04-16T22:53:17.391Z  INFO 1 --- [compression-service] [nio-8080-exec-8] c.s.c.service.client.ImageStorageClient  : Successfully retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.391 | 2025-04-16T22:53:17.391Z  INFO 1 --- [compression-service] [nio-8080-exec-8] c.s.c.s.compression.CompressionService   : Retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, metadata present: true
2025-04-17 05:53:17.391 | 2025-04-16T22:53:17.391Z  INFO 1 --- [compression-service] [nio-8080-exec-8] c.s.c.s.compression.CompressionService   : Converting image to WebP with quality: 76
2025-04-17 05:53:17.394 | 2025-04-16T22:53:17.394Z  INFO 1 --- [compression-service] [nio-8080-exec-8] c.s.compressionservice.util.webp.CWebp   : Executing WebP command: /app/webp_binaries/cwebp -q 76 -alpha_q 100  -o /tmp/webp_conversion_5187829753777084301/output_image.webp /tmp/webp_conversion_5187829753777084301/input_image.bin
2025-04-17 05:53:17.403 | 2025-04-16T22:53:17.402Z  WARN 1 --- [compression-service] [nio-8080-exec-8] c.s.compressionservice.util.webp.CWebp   : cwebp process error: Segmentation fault
2025-04-17 05:53:17.403 | 
2025-04-17 05:53:17.405 | 2025-04-16T22:53:17.403Z ERROR 1 --- [compression-service] [nio-8080-exec-8] c.s.c.service.webp.WebpService           : Failed to convert image to WebP with custom options: Error processing image: WebP conversion failed with exit code: 139
2025-04-17 05:53:17.405 | 
2025-04-17 05:53:17.405 | com.shadowshiftstudio.compressionservice.util.webp.CWebpException: Error processing image: WebP conversion failed with exit code: 139
2025-04-17 05:53:17.405 | 	at com.shadowshiftstudio.compressionservice.util.webp.WebpConverter.imageToWebpByte(WebpConverter.java:121) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:17.405 | 	at com.shadowshiftstudio.compressionservice.service.webp.WebpService.convertToWebp(WebpService.java:69) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:17.405 | 	at com.shadowshiftstudio.compressionservice.service.compression.CompressionService.compressImage(CompressionService.java:85) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:17.405 | 	at com.shadowshiftstudio.compressionservice.controller.CompressionController.compressImage(CompressionController.java:69) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:17.405 | 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Unknown Source) ~[na:na]
2025-04-17 05:53:17.405 | 	at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]
2025-04-17 05:53:17.405 | 	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:17.405 | 	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]
2025-04-17 05:53:17.405 | Caused by: java.io.IOException: WebP conversion failed with exit code: 139
2025-04-17 05:53:17.405 | 	at com.shadowshiftstudio.compressionservice.util.webp.CWebp.convertFromBytes(CWebp.java:251) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:17.405 | 	at com.shadowshiftstudio.compressionservice.util.webp.WebpConverter.imageToWebpByte(WebpConverter.java:119) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:17.405 | 	... 51 common frames omitted
2025-04-17 05:53:17.405 | 
2025-04-17 05:53:17.405 | 2025-04-16T22:53:17.405Z ERROR 1 --- [compression-service] [nio-8080-exec-8] c.s.c.s.compression.CompressionService   : WebP conversion failed for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:17.405 | java.io.IOException: WebP conversion failed
2025-04-17 05:53:17.405 | 	at com.shadowshiftstudio.compressionservice.service.compression.CompressionService.compressImage(CompressionService.java:89)
2025-04-17 05:53:17.405 | 	at com.shadowshiftstudio.compressionservice.controller.CompressionController.compressImage(CompressionController.java:69)
2025-04-17 05:53:17.405 | 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Unknown Source)
2025-04-17 05:53:17.405 | 	at java.base/java.lang.reflect.Method.invoke(Unknown Source)
2025-04-17 05:53:17.405 | 	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
2025-04-17 05:53:17.406 | 	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
2025-04-17 05:53:17.406 | 	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
2025-04-17 05:53:17.406 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
2025-04-17 05:53:17.406 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
2025-04-17 05:53:17.406 | 	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
2025-04-17 05:53:17.406 | 	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
2025-04-17 05:53:17.406 | 	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
2025-04-17 05:53:17.406 | 	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
2025-04-17 05:53:17.406 | 	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
2025-04-17 05:53:17.406 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
2025-04-17 05:53:17.406 | 	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
2025-04-17 05:53:17.406 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:17.406 | 	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:17.406 | 	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
2025-04-17 05:53:17.406 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:17.406 | 	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
2025-04-17 05:53:17.406 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:17.406 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
2025-04-17 05:53:17.406 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
2025-04-17 05:53:17.406 | 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
2025-04-17 05:53:17.406 | 	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
2025-04-17 05:53:17.406 | 	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
2025-04-17 05:53:17.406 | 	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
2025-04-17 05:53:17.406 | 	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
2025-04-17 05:53:17.406 | 	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
2025-04-17 05:53:17.406 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
2025-04-17 05:53:17.406 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
2025-04-17 05:53:17.406 | 	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
2025-04-17 05:53:17.406 | 	at java.base/java.lang.Thread.run(Unknown Source)
2025-04-17 05:53:21.491 | 2025-04-16T22:53:21.489Z  INFO 1 --- [compression-service] [io-8080-exec-10] c.s.c.s.compression.CompressionService   : Getting original size for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:21.491 | 2025-04-16T22:53:21.490Z  INFO 1 --- [compression-service] [io-8080-exec-10] c.s.c.service.client.ImageStorageClient  : Getting metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:21.491 | 2025-04-16T22:53:21.491Z DEBUG 1 --- [compression-service] [io-8080-exec-10] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:21.491 | 2025-04-16T22:53:21.491Z  INFO 1 --- [compression-service] [io-8080-exec-10] c.s.c.messaging.MessageSender            : Sending message to storage service: f988b9b5-0caf-4d55-8d5d-28820c6738d6, action: GET_METADATA
2025-04-17 05:53:21.492 | 2025-04-16T22:53:21.492Z DEBUG 1 --- [compression-service] [io-8080-exec-10] c.s.c.service.client.ImageStorageClient  : Sent GET_METADATA request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:21.501 | 2025-04-16T22:53:21.501Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/json, correlation ID: null, imageId: null, action: null
2025-04-17 05:53:21.502 | 2025-04-16T22:53:21.502Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message from storage service: 45ad9582-57fc-422e-874c-2c453e2086f6, action: METADATA
2025-04-17 05:53:21.502 | 2025-04-16T22:53:21.502Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Processing message with action: METADATA for imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:21.502 | 2025-04-16T22:53:21.502Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Received metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, compressionLevel: 0
2025-04-17 05:53:21.502 | 2025-04-16T22:53:21.502Z  INFO 1 --- [compression-service] [io-8080-exec-10] c.s.c.service.client.ImageStorageClient  : Successfully retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:21.502 | 2025-04-16T22:53:21.502Z  INFO 1 --- [compression-service] [io-8080-exec-10] c.s.c.s.compression.CompressionService   : Image is not compressed, returning current size: 1331383
2025-04-17 05:53:23.854 | 2025-04-16T22:53:23.854Z  INFO 1 --- [compression-service] [nio-8080-exec-3] c.s.c.s.compression.CompressionService   : Starting compression for image: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, level: 24
2025-04-17 05:53:23.854 | 2025-04-16T22:53:23.854Z  INFO 1 --- [compression-service] [nio-8080-exec-3] c.s.c.service.client.ImageStorageClient  : Getting image data for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.854 | 2025-04-16T22:53:23.854Z DEBUG 1 --- [compression-service] [nio-8080-exec-3] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.855 | 2025-04-16T22:53:23.854Z  INFO 1 --- [compression-service] [nio-8080-exec-3] c.s.c.messaging.MessageSender            : Sending message to storage service: e79c0872-056b-48e2-9d85-ec21a5144c1c, action: GET_IMAGE
2025-04-17 05:53:23.855 | 2025-04-16T22:53:23.855Z DEBUG 1 --- [compression-service] [nio-8080-exec-3] c.s.c.service.client.ImageStorageClient  : Sent GET_IMAGE request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.873 | 2025-04-16T22:53:23.872Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/octet-stream, correlation ID: 25b3726e-650f-4a43-a1ef-1c271326f13c, imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, action: IMAGE_DATA
2025-04-17 05:53:23.873 | 2025-04-16T22:53:23.873Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received binary data message: correlationId=25b3726e-650f-4a43-a1ef-1c271326f13c, imageId=25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, action=IMAGE_DATA, size=1331383 bytes
2025-04-17 05:53:23.873 | 2025-04-16T22:53:23.873Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Storing binary data in cache for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, data length: 1331383 bytes
2025-04-17 05:53:23.873 | 2025-04-16T22:53:23.873Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Found and executing callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.873 | 2025-04-16T22:53:23.873Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Retrieved image data from cache for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, data length: 1331383
2025-04-17 05:53:23.873 | 2025-04-16T22:53:23.873Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Image data successfully retrieved for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:23.873 | 2025-04-16T22:53:23.873Z  INFO 1 --- [compression-service] [nio-8080-exec-3] c.s.c.service.client.ImageStorageClient  : Successfully fetched image data for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:23.873 | 2025-04-16T22:53:23.873Z  INFO 1 --- [compression-service] [nio-8080-exec-3] c.s.c.s.compression.CompressionService   : Retrieved image data for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:23.873 | 2025-04-16T22:53:23.873Z  INFO 1 --- [compression-service] [nio-8080-exec-3] c.s.c.service.client.ImageStorageClient  : Getting metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.874 | 2025-04-16T22:53:23.873Z DEBUG 1 --- [compression-service] [nio-8080-exec-3] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.874 | 2025-04-16T22:53:23.874Z  INFO 1 --- [compression-service] [nio-8080-exec-3] c.s.c.messaging.MessageSender            : Sending message to storage service: a8d9d3ad-f905-48a1-ba25-49b64ab023a9, action: GET_METADATA
2025-04-17 05:53:23.874 | 2025-04-16T22:53:23.874Z DEBUG 1 --- [compression-service] [nio-8080-exec-3] c.s.c.service.client.ImageStorageClient  : Sent GET_METADATA request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.878 | 2025-04-16T22:53:23.878Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/json, correlation ID: null, imageId: null, action: null
2025-04-17 05:53:23.879 | 2025-04-16T22:53:23.879Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message from storage service: fc951617-d121-4259-82a0-83341e139f67, action: METADATA
2025-04-17 05:53:23.879 | 2025-04-16T22:53:23.879Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Processing message with action: METADATA for imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.879 | 2025-04-16T22:53:23.879Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Received metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, compressionLevel: 0
2025-04-17 05:53:23.879 | 2025-04-16T22:53:23.879Z  INFO 1 --- [compression-service] [nio-8080-exec-3] c.s.c.service.client.ImageStorageClient  : Successfully retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.879 | 2025-04-16T22:53:23.879Z  INFO 1 --- [compression-service] [nio-8080-exec-3] c.s.c.s.compression.CompressionService   : Retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, metadata present: true
2025-04-17 05:53:23.879 | 2025-04-16T22:53:23.879Z  INFO 1 --- [compression-service] [nio-8080-exec-3] c.s.c.s.compression.CompressionService   : Converting image to WebP with quality: 76
2025-04-17 05:53:23.883 | 2025-04-16T22:53:23.882Z  INFO 1 --- [compression-service] [nio-8080-exec-3] c.s.compressionservice.util.webp.CWebp   : Executing WebP command: /app/webp_binaries/cwebp -q 76 -alpha_q 100  -o /tmp/webp_conversion_5305609808278652318/output_image.webp /tmp/webp_conversion_5305609808278652318/input_image.bin
2025-04-17 05:53:23.890 | 2025-04-16T22:53:23.890Z  WARN 1 --- [compression-service] [nio-8080-exec-3] c.s.compressionservice.util.webp.CWebp   : cwebp process error: Segmentation fault
2025-04-17 05:53:23.890 | 
2025-04-17 05:53:23.892 | 2025-04-16T22:53:23.891Z ERROR 1 --- [compression-service] [nio-8080-exec-3] c.s.c.service.webp.WebpService           : Failed to convert image to WebP with custom options: Error processing image: WebP conversion failed with exit code: 139
2025-04-17 05:53:23.892 | 
2025-04-17 05:53:23.892 | com.shadowshiftstudio.compressionservice.util.webp.CWebpException: Error processing image: WebP conversion failed with exit code: 139
2025-04-17 05:53:23.892 | 	at com.shadowshiftstudio.compressionservice.util.webp.WebpConverter.imageToWebpByte(WebpConverter.java:121) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:23.892 | 	at com.shadowshiftstudio.compressionservice.service.webp.WebpService.convertToWebp(WebpService.java:69) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:23.892 | 	at com.shadowshiftstudio.compressionservice.service.compression.CompressionService.compressImage(CompressionService.java:85) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:23.892 | 	at com.shadowshiftstudio.compressionservice.controller.CompressionController.compressImage(CompressionController.java:69) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:23.892 | 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Unknown Source) ~[na:na]
2025-04-17 05:53:23.892 | 	at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]
2025-04-17 05:53:23.892 | 	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | 	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | java.io.IOException: WebP conversion failed
2025-04-17 05:53:23.892 | 	at com.shadowshiftstudio.compressionservice.service.compression.CompressionService.compressImage(CompressionService.java:89)
2025-04-17 05:53:23.892 | 	at com.shadowshiftstudio.compressionservice.controller.CompressionController.compressImage(CompressionController.java:69)
2025-04-17 05:53:23.892 | 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Unknown Source)
2025-04-17 05:53:23.892 | 	at java.base/java.lang.reflect.Method.invoke(Unknown Source)
2025-04-17 05:53:23.892 | 	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
2025-04-17 05:53:23.892 | 	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
2025-04-17 05:53:23.892 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
2025-04-17 05:53:23.892 | 	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
2025-04-17 05:53:23.892 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:23.892 | 	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:23.892 | 	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
2025-04-17 05:53:23.892 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:23.892 | 	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
2025-04-17 05:53:23.892 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:23.892 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
2025-04-17 05:53:23.892 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
2025-04-17 05:53:23.892 | 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
2025-04-17 05:53:23.892 | 	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
2025-04-17 05:53:23.892 | 	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
2025-04-17 05:53:23.892 | 	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
2025-04-17 05:53:23.892 | 	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
2025-04-17 05:53:23.892 | 	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
2025-04-17 05:53:23.892 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
2025-04-17 05:53:23.892 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
2025-04-17 05:53:23.892 | 	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
2025-04-17 05:53:23.892 | 	at java.base/java.lang.Thread.run(Unknown Source)
2025-04-17 05:53:23.892 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.892 | 	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]
2025-04-17 05:53:23.893 | Caused by: java.io.IOException: WebP conversion failed with exit code: 139
2025-04-17 05:53:23.893 | 	at com.shadowshiftstudio.compressionservice.util.webp.CWebp.convertFromBytes(CWebp.java:251) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:23.893 | 	at com.shadowshiftstudio.compressionservice.util.webp.WebpConverter.imageToWebpByte(WebpConverter.java:119) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:23.893 | 	... 51 common frames omitted
2025-04-17 05:53:23.893 | 
2025-04-17 05:53:23.893 | 2025-04-16T22:53:23.892Z ERROR 1 --- [compression-service] [nio-8080-exec-3] c.s.c.s.compression.CompressionService   : WebP conversion failed for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.949 | 2025-04-16T22:53:23.949Z  INFO 1 --- [compression-service] [nio-8080-exec-2] c.s.c.s.compression.CompressionService   : Starting compression for image: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, level: 24
2025-04-17 05:53:23.949 | 2025-04-16T22:53:23.949Z  INFO 1 --- [compression-service] [nio-8080-exec-2] c.s.c.service.client.ImageStorageClient  : Getting image data for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.949 | 2025-04-16T22:53:23.949Z DEBUG 1 --- [compression-service] [nio-8080-exec-2] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.950 | 2025-04-16T22:53:23.949Z  INFO 1 --- [compression-service] [nio-8080-exec-2] c.s.c.messaging.MessageSender            : Sending message to storage service: 4d5fc3b0-57a6-4629-93d0-ec3b7b99c18d, action: GET_IMAGE
2025-04-17 05:53:23.950 | 2025-04-16T22:53:23.950Z DEBUG 1 --- [compression-service] [nio-8080-exec-2] c.s.c.service.client.ImageStorageClient  : Sent GET_IMAGE request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.962 | 2025-04-16T22:53:23.962Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/octet-stream, correlation ID: 91be370e-faea-4370-8aea-354874a77a8c, imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, action: IMAGE_DATA
2025-04-17 05:53:23.962 | 2025-04-16T22:53:23.962Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received binary data message: correlationId=91be370e-faea-4370-8aea-354874a77a8c, imageId=25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, action=IMAGE_DATA, size=1331383 bytes
2025-04-17 05:53:23.962 | 2025-04-16T22:53:23.962Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Storing binary data in cache for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, data length: 1331383 bytes
2025-04-17 05:53:23.962 | 2025-04-16T22:53:23.962Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Found and executing callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.962 | 2025-04-16T22:53:23.962Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Retrieved image data from cache for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, data length: 1331383
2025-04-17 05:53:23.962 | 2025-04-16T22:53:23.962Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Image data successfully retrieved for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:23.962 | 2025-04-16T22:53:23.962Z  INFO 1 --- [compression-service] [nio-8080-exec-2] c.s.c.service.client.ImageStorageClient  : Successfully fetched image data for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:23.962 | 2025-04-16T22:53:23.962Z  INFO 1 --- [compression-service] [nio-8080-exec-2] c.s.c.s.compression.CompressionService   : Retrieved image data for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:23.962 | 2025-04-16T22:53:23.962Z  INFO 1 --- [compression-service] [nio-8080-exec-2] c.s.c.service.client.ImageStorageClient  : Getting metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.962 | 2025-04-16T22:53:23.962Z DEBUG 1 --- [compression-service] [nio-8080-exec-2] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.963 | 2025-04-16T22:53:23.962Z  INFO 1 --- [compression-service] [nio-8080-exec-2] c.s.c.messaging.MessageSender            : Sending message to storage service: f66e8d1c-f654-481d-a8ae-f8f1e5458aaa, action: GET_METADATA
2025-04-17 05:53:23.963 | 2025-04-16T22:53:23.963Z DEBUG 1 --- [compression-service] [nio-8080-exec-2] c.s.c.service.client.ImageStorageClient  : Sent GET_METADATA request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.967 | 2025-04-16T22:53:23.967Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/json, correlation ID: null, imageId: null, action: null
2025-04-17 05:53:23.967 | 2025-04-16T22:53:23.967Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message from storage service: 9ae76d63-d2d3-42e7-9242-e043c9a37c30, action: METADATA
2025-04-17 05:53:23.967 | 2025-04-16T22:53:23.967Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Processing message with action: METADATA for imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.967 | 2025-04-16T22:53:23.967Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Received metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, compressionLevel: 0
2025-04-17 05:53:23.967 | 2025-04-16T22:53:23.967Z  INFO 1 --- [compression-service] [nio-8080-exec-2] c.s.c.service.client.ImageStorageClient  : Successfully retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.967 | 2025-04-16T22:53:23.967Z  INFO 1 --- [compression-service] [nio-8080-exec-2] c.s.c.s.compression.CompressionService   : Retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, metadata present: true
2025-04-17 05:53:23.967 | 2025-04-16T22:53:23.967Z  INFO 1 --- [compression-service] [nio-8080-exec-2] c.s.c.s.compression.CompressionService   : Converting image to WebP with quality: 76
2025-04-17 05:53:23.971 | 2025-04-16T22:53:23.971Z  INFO 1 --- [compression-service] [nio-8080-exec-2] c.s.compressionservice.util.webp.CWebp   : Executing WebP command: /app/webp_binaries/cwebp -q 76 -alpha_q 100  -o /tmp/webp_conversion_6091134821692421876/output_image.webp /tmp/webp_conversion_6091134821692421876/input_image.bin
2025-04-17 05:53:23.977 | 2025-04-16T22:53:23.977Z  WARN 1 --- [compression-service] [nio-8080-exec-2] c.s.compressionservice.util.webp.CWebp   : cwebp process error: Segmentation fault
2025-04-17 05:53:23.977 | 
2025-04-17 05:53:23.979 | 2025-04-16T22:53:23.978Z ERROR 1 --- [compression-service] [nio-8080-exec-2] c.s.c.service.webp.WebpService           : Failed to convert image to WebP with custom options: Error processing image: WebP conversion failed with exit code: 139
2025-04-17 05:53:23.979 | 
2025-04-17 05:53:23.979 | com.shadowshiftstudio.compressionservice.util.webp.CWebpException: Error processing image: WebP conversion failed with exit code: 139
2025-04-17 05:53:23.979 | 	at com.shadowshiftstudio.compressionservice.util.webp.WebpConverter.imageToWebpByte(WebpConverter.java:121) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:23.979 | 	at com.shadowshiftstudio.compressionservice.service.webp.WebpService.convertToWebp(WebpService.java:69) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:23.979 | 	at com.shadowshiftstudio.compressionservice.service.compression.CompressionService.compressImage(CompressionService.java:85) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:23.979 | 	at com.shadowshiftstudio.compressionservice.controller.CompressionController.compressImage(CompressionController.java:69) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:23.979 | 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Unknown Source) ~[na:na]
2025-04-17 05:53:23.979 | 	at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]
2025-04-17 05:53:23.979 | 	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | java.io.IOException: WebP conversion failed
2025-04-17 05:53:23.979 | 	at com.shadowshiftstudio.compressionservice.service.compression.CompressionService.compressImage(CompressionService.java:89)
2025-04-17 05:53:23.979 | 	at com.shadowshiftstudio.compressionservice.controller.CompressionController.compressImage(CompressionController.java:69)
2025-04-17 05:53:23.979 | 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Unknown Source)
2025-04-17 05:53:23.979 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:23.979 | 	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]
2025-04-17 05:53:23.979 | Caused by: java.io.IOException: WebP conversion failed with exit code: 139
2025-04-17 05:53:23.979 | 	at com.shadowshiftstudio.compressionservice.util.webp.CWebp.convertFromBytes(CWebp.java:251) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:23.979 | 	at com.shadowshiftstudio.compressionservice.util.webp.WebpConverter.imageToWebpByte(WebpConverter.java:119) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:23.979 | 	... 51 common frames omitted
2025-04-17 05:53:23.979 | 
2025-04-17 05:53:23.979 | 2025-04-16T22:53:23.978Z ERROR 1 --- [compression-service] [nio-8080-exec-2] c.s.c.s.compression.CompressionService   : WebP conversion failed for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:23.979 | 	at java.base/java.lang.reflect.Method.invoke(Unknown Source)
2025-04-17 05:53:23.979 | 	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
2025-04-17 05:53:23.979 | 	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
2025-04-17 05:53:23.979 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
2025-04-17 05:53:23.979 | 	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
2025-04-17 05:53:23.979 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:23.979 | 	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:23.979 | 	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
2025-04-17 05:53:23.979 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:23.979 | 	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
2025-04-17 05:53:23.979 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:23.979 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
2025-04-17 05:53:23.979 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
2025-04-17 05:53:23.979 | 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
2025-04-17 05:53:23.979 | 	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
2025-04-17 05:53:23.979 | 	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
2025-04-17 05:53:23.979 | 	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
2025-04-17 05:53:23.979 | 	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
2025-04-17 05:53:23.979 | 	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
2025-04-17 05:53:23.979 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
2025-04-17 05:53:23.979 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
2025-04-17 05:53:23.979 | 	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
2025-04-17 05:53:23.979 | 	at java.base/java.lang.Thread.run(Unknown Source)
2025-04-17 05:53:24.087 | 2025-04-16T22:53:24.086Z  INFO 1 --- [compression-service] [nio-8080-exec-4] c.s.c.s.compression.CompressionService   : Starting compression for image: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, level: 24
2025-04-17 05:53:24.087 | 2025-04-16T22:53:24.086Z  INFO 1 --- [compression-service] [nio-8080-exec-4] c.s.c.service.client.ImageStorageClient  : Getting image data for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.087 | 2025-04-16T22:53:24.086Z DEBUG 1 --- [compression-service] [nio-8080-exec-4] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.087 | 2025-04-16T22:53:24.087Z  INFO 1 --- [compression-service] [nio-8080-exec-4] c.s.c.messaging.MessageSender            : Sending message to storage service: dee22341-28b4-4331-b347-96312e2e26a7, action: GET_IMAGE
2025-04-17 05:53:24.087 | 2025-04-16T22:53:24.087Z DEBUG 1 --- [compression-service] [nio-8080-exec-4] c.s.c.service.client.ImageStorageClient  : Sent GET_IMAGE request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.101 | 2025-04-16T22:53:24.101Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/octet-stream, correlation ID: 75e5f156-c96a-4250-a3dc-e4ec23a5beca, imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, action: IMAGE_DATA
2025-04-17 05:53:24.101 | 2025-04-16T22:53:24.101Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received binary data message: correlationId=75e5f156-c96a-4250-a3dc-e4ec23a5beca, imageId=25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, action=IMAGE_DATA, size=1331383 bytes
2025-04-17 05:53:24.101 | 2025-04-16T22:53:24.101Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Storing binary data in cache for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, data length: 1331383 bytes
2025-04-17 05:53:24.101 | 2025-04-16T22:53:24.101Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Found and executing callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.101 | 2025-04-16T22:53:24.101Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Retrieved image data from cache for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, data length: 1331383
2025-04-17 05:53:24.101 | 2025-04-16T22:53:24.101Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Image data successfully retrieved for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:24.101 | 2025-04-16T22:53:24.101Z  INFO 1 --- [compression-service] [nio-8080-exec-4] c.s.c.service.client.ImageStorageClient  : Successfully fetched image data for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:24.101 | 2025-04-16T22:53:24.101Z  INFO 1 --- [compression-service] [nio-8080-exec-4] c.s.c.s.compression.CompressionService   : Retrieved image data for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:24.101 | 2025-04-16T22:53:24.101Z  INFO 1 --- [compression-service] [nio-8080-exec-4] c.s.c.service.client.ImageStorageClient  : Getting metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.101 | 2025-04-16T22:53:24.101Z DEBUG 1 --- [compression-service] [nio-8080-exec-4] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.101 | 2025-04-16T22:53:24.101Z  INFO 1 --- [compression-service] [nio-8080-exec-4] c.s.c.messaging.MessageSender            : Sending message to storage service: 4c0598ed-ce87-4790-a43f-3f91d02f7008, action: GET_METADATA
2025-04-17 05:53:24.102 | 2025-04-16T22:53:24.102Z DEBUG 1 --- [compression-service] [nio-8080-exec-4] c.s.c.service.client.ImageStorageClient  : Sent GET_METADATA request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.106 | 2025-04-16T22:53:24.105Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/json, correlation ID: null, imageId: null, action: null
2025-04-17 05:53:24.107 | 2025-04-16T22:53:24.106Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message from storage service: dadd6666-7934-4c42-920e-b50065984e73, action: METADATA
2025-04-17 05:53:24.107 | 2025-04-16T22:53:24.106Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Processing message with action: METADATA for imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.107 | 2025-04-16T22:53:24.106Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Received metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, compressionLevel: 0
2025-04-17 05:53:24.107 | 2025-04-16T22:53:24.106Z  INFO 1 --- [compression-service] [nio-8080-exec-4] c.s.c.service.client.ImageStorageClient  : Successfully retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.107 | 2025-04-16T22:53:24.106Z  INFO 1 --- [compression-service] [nio-8080-exec-4] c.s.c.s.compression.CompressionService   : Retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, metadata present: true
2025-04-17 05:53:24.107 | 2025-04-16T22:53:24.106Z  INFO 1 --- [compression-service] [nio-8080-exec-4] c.s.c.s.compression.CompressionService   : Converting image to WebP with quality: 76
2025-04-17 05:53:24.109 | 2025-04-16T22:53:24.108Z  INFO 1 --- [compression-service] [nio-8080-exec-4] c.s.compressionservice.util.webp.CWebp   : Executing WebP command: /app/webp_binaries/cwebp -q 76 -alpha_q 100  -o /tmp/webp_conversion_17437337049315715188/output_image.webp /tmp/webp_conversion_17437337049315715188/input_image.bin
2025-04-17 05:53:24.114 | 2025-04-16T22:53:24.114Z  WARN 1 --- [compression-service] [nio-8080-exec-4] c.s.compressionservice.util.webp.CWebp   : cwebp process error: Segmentation fault
2025-04-17 05:53:24.114 | 
2025-04-17 05:53:24.115 | 2025-04-16T22:53:24.114Z ERROR 1 --- [compression-service] [nio-8080-exec-4] c.s.c.service.webp.WebpService           : Failed to convert image to WebP with custom options: Error processing image: WebP conversion failed with exit code: 139
2025-04-17 05:53:24.115 | 
2025-04-17 05:53:24.115 | com.shadowshiftstudio.compressionservice.util.webp.CWebpException: Error processing image: WebP conversion failed with exit code: 139
2025-04-17 05:53:24.115 | 	at com.shadowshiftstudio.compressionservice.util.webp.WebpConverter.imageToWebpByte(WebpConverter.java:121) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:24.115 | 	at com.shadowshiftstudio.compressionservice.service.webp.WebpService.convertToWebp(WebpService.java:69) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:24.115 | 	at com.shadowshiftstudio.compressionservice.service.compression.CompressionService.compressImage(CompressionService.java:85) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:24.115 | 	at com.shadowshiftstudio.compressionservice.controller.CompressionController.compressImage(CompressionController.java:69) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:24.115 | 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Unknown Source) ~[na:na]
2025-04-17 05:53:24.115 | 	at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]
2025-04-17 05:53:24.115 | 	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | 	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | java.io.IOException: WebP conversion failed
2025-04-17 05:53:24.115 | 	at com.shadowshiftstudio.compressionservice.service.compression.CompressionService.compressImage(CompressionService.java:89)
2025-04-17 05:53:24.115 | 	at com.shadowshiftstudio.compressionservice.controller.CompressionController.compressImage(CompressionController.java:69)
2025-04-17 05:53:24.115 | 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Unknown Source)
2025-04-17 05:53:24.115 | 	at java.base/java.lang.reflect.Method.invoke(Unknown Source)
2025-04-17 05:53:24.115 | 	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
2025-04-17 05:53:24.115 | 	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
2025-04-17 05:53:24.115 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.115 | 	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]
2025-04-17 05:53:24.115 | Caused by: java.io.IOException: WebP conversion failed with exit code: 139
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
2025-04-17 05:53:24.115 | 	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
2025-04-17 05:53:24.115 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
2025-04-17 05:53:24.116 | 	at com.shadowshiftstudio.compressionservice.util.webp.CWebp.convertFromBytes(CWebp.java:251) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:24.116 | 	at com.shadowshiftstudio.compressionservice.util.webp.WebpConverter.imageToWebpByte(WebpConverter.java:119) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:24.116 | 	... 51 common frames omitted
2025-04-17 05:53:24.116 | 
2025-04-17 05:53:24.116 | 2025-04-16T22:53:24.115Z ERROR 1 --- [compression-service] [nio-8080-exec-4] c.s.c.s.compression.CompressionService   : WebP conversion failed for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.116 | 	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
2025-04-17 05:53:24.116 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:24.116 | 	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:24.116 | 	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
2025-04-17 05:53:24.116 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:24.116 | 	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
2025-04-17 05:53:24.116 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:24.116 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
2025-04-17 05:53:24.116 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
2025-04-17 05:53:24.116 | 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
2025-04-17 05:53:24.116 | 	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
2025-04-17 05:53:24.116 | 	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
2025-04-17 05:53:24.116 | 	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
2025-04-17 05:53:24.116 | 	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
2025-04-17 05:53:24.116 | 	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
2025-04-17 05:53:24.116 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
2025-04-17 05:53:24.116 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
2025-04-17 05:53:24.116 | 	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
2025-04-17 05:53:24.116 | 	at java.base/java.lang.Thread.run(Unknown Source)
2025-04-17 05:53:24.323 | 2025-04-16T22:53:24.322Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.s.compression.CompressionService   : Starting compression for image: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, level: 24
2025-04-17 05:53:24.323 | 2025-04-16T22:53:24.322Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.service.client.ImageStorageClient  : Getting image data for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.323 | 2025-04-16T22:53:24.322Z DEBUG 1 --- [compression-service] [nio-8080-exec-5] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.323 | 2025-04-16T22:53:24.323Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.messaging.MessageSender            : Sending message to storage service: dca23748-8534-4852-9cf1-379a0d968bea, action: GET_IMAGE
2025-04-17 05:53:24.323 | 2025-04-16T22:53:24.323Z DEBUG 1 --- [compression-service] [nio-8080-exec-5] c.s.c.service.client.ImageStorageClient  : Sent GET_IMAGE request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.338 | 2025-04-16T22:53:24.337Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/octet-stream, correlation ID: 0e2c8226-ec4d-4e83-a4a1-bd0f9bb6fa69, imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, action: IMAGE_DATA
2025-04-17 05:53:24.338 | 2025-04-16T22:53:24.338Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received binary data message: correlationId=0e2c8226-ec4d-4e83-a4a1-bd0f9bb6fa69, imageId=25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, action=IMAGE_DATA, size=1331383 bytes
2025-04-17 05:53:24.338 | 2025-04-16T22:53:24.338Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Storing binary data in cache for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, data length: 1331383 bytes
2025-04-17 05:53:24.338 | 2025-04-16T22:53:24.338Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Found and executing callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.338 | 2025-04-16T22:53:24.338Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Retrieved image data from cache for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, data length: 1331383
2025-04-17 05:53:24.338 | 2025-04-16T22:53:24.338Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Image data successfully retrieved for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:24.338 | 2025-04-16T22:53:24.338Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.service.client.ImageStorageClient  : Successfully fetched image data for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:24.338 | 2025-04-16T22:53:24.338Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.s.compression.CompressionService   : Retrieved image data for ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, size: 1331383 bytes
2025-04-17 05:53:24.338 | 2025-04-16T22:53:24.338Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.service.client.ImageStorageClient  : Getting metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.338 | 2025-04-16T22:53:24.338Z DEBUG 1 --- [compression-service] [nio-8080-exec-5] c.s.c.messaging.ImageMessageListener     : Registering callback for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.338 | 2025-04-16T22:53:24.338Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.messaging.MessageSender            : Sending message to storage service: f7d55f00-5a53-4fa4-bf1d-9a08cdf54259, action: GET_METADATA
2025-04-17 05:53:24.339 | 2025-04-16T22:53:24.339Z DEBUG 1 --- [compression-service] [nio-8080-exec-5] c.s.c.service.client.ImageStorageClient  : Sent GET_METADATA request for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.343 | 2025-04-16T22:53:24.343Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message with content type: application/json, correlation ID: null, imageId: null, action: null
2025-04-17 05:53:24.343 | 2025-04-16T22:53:24.343Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Received message from storage service: e54202a1-34de-4daf-808d-7afc293c35dd, action: METADATA
2025-04-17 05:53:24.343 | 2025-04-16T22:53:24.343Z DEBUG 1 --- [compression-service] [enerContainer-1] c.s.c.messaging.ImageMessageListener     : Processing message with action: METADATA for imageId: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.343 | 2025-04-16T22:53:24.343Z  INFO 1 --- [compression-service] [enerContainer-1] c.s.c.service.client.ImageStorageClient  : Received metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, compressionLevel: 0
2025-04-17 05:53:24.343 | 2025-04-16T22:53:24.343Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.service.client.ImageStorageClient  : Successfully retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.343 | 2025-04-16T22:53:24.343Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.s.compression.CompressionService   : Retrieved metadata for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f, metadata present: true
2025-04-17 05:53:24.343 | 2025-04-16T22:53:24.343Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.c.s.compression.CompressionService   : Converting image to WebP with quality: 76
2025-04-17 05:53:24.346 | 2025-04-16T22:53:24.346Z  INFO 1 --- [compression-service] [nio-8080-exec-5] c.s.compressionservice.util.webp.CWebp   : Executing WebP command: /app/webp_binaries/cwebp -q 76 -alpha_q 100  -o /tmp/webp_conversion_6801155356451249417/output_image.webp /tmp/webp_conversion_6801155356451249417/input_image.bin
2025-04-17 05:53:24.352 | 2025-04-16T22:53:24.352Z  WARN 1 --- [compression-service] [nio-8080-exec-5] c.s.compressionservice.util.webp.CWebp   : cwebp process error: Segmentation fault
2025-04-17 05:53:24.352 | 
2025-04-17 05:53:24.354 | 2025-04-16T22:53:24.353Z ERROR 1 --- [compression-service] [nio-8080-exec-5] c.s.c.service.webp.WebpService           : Failed to convert image to WebP with custom options: Error processing image: WebP conversion failed with exit code: 139
2025-04-17 05:53:24.354 | 
2025-04-17 05:53:24.354 | com.shadowshiftstudio.compressionservice.util.webp.CWebpException: Error processing image: WebP conversion failed with exit code: 139
2025-04-17 05:53:24.354 | 	at com.shadowshiftstudio.compressionservice.util.webp.WebpConverter.imageToWebpByte(WebpConverter.java:121) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:24.354 | 	at com.shadowshiftstudio.compressionservice.service.webp.WebpService.convertToWebp(WebpService.java:69) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:24.354 | 	at com.shadowshiftstudio.compressionservice.service.compression.CompressionService.compressImage(CompressionService.java:85) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:24.354 | 	at com.shadowshiftstudio.compressionservice.controller.CompressionController.compressImage(CompressionController.java:69) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:24.354 | 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Unknown Source) ~[na:na]
2025-04-17 05:53:24.354 | 	at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]
2025-04-17 05:53:24.354 | 	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.1.jar!/:6.2.1]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.34.jar!/:na]
2025-04-17 05:53:24.354 | 	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]
2025-04-17 05:53:24.354 | Caused by: java.io.IOException: WebP conversion failed with exit code: 139
2025-04-17 05:53:24.354 | 	at com.shadowshiftstudio.compressionservice.util.webp.CWebp.convertFromBytes(CWebp.java:251) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:24.354 | 	at com.shadowshiftstudio.compressionservice.util.webp.WebpConverter.imageToWebpByte(WebpConverter.java:119) ~[!/:0.0.1-SNAPSHOT]
2025-04-17 05:53:24.354 | 	... 51 common frames omitted
2025-04-17 05:53:24.354 | 
2025-04-17 05:53:24.354 | 2025-04-16T22:53:24.354Z ERROR 1 --- [compression-service] [nio-8080-exec-5] c.s.c.s.compression.CompressionService   : WebP conversion failed for image ID: 25aa3f11-8dc2-4f1b-ac8d-252d95b5898f
2025-04-17 05:53:24.354 | java.io.IOException: WebP conversion failed
2025-04-17 05:53:24.354 | 	at com.shadowshiftstudio.compressionservice.service.compression.CompressionService.compressImage(CompressionService.java:89)
2025-04-17 05:53:24.354 | 	at com.shadowshiftstudio.compressionservice.controller.CompressionController.compressImage(CompressionController.java:69)
2025-04-17 05:53:24.354 | 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Unknown Source)
2025-04-17 05:53:24.354 | 	at java.base/java.lang.reflect.Method.invoke(Unknown Source)
2025-04-17 05:53:24.354 | 	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
2025-04-17 05:53:24.354 | 	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
2025-04-17 05:53:24.354 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
2025-04-17 05:53:24.354 | 	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
2025-04-17 05:53:24.354 | 	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:24.354 | 	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:24.354 | 	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
2025-04-17 05:53:24.354 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:24.354 | 	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
2025-04-17 05:53:24.354 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:24.354 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
2025-04-17 05:53:24.354 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
2025-04-17 05:53:24.354 | 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
2025-04-17 05:53:24.354 | 	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
2025-04-17 05:53:24.354 | 	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
2025-04-17 05:53:24.354 | 	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
2025-04-17 05:53:24.354 | 	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
2025-04-17 05:53:24.354 | 	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
2025-04-17 05:53:24.354 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
2025-04-17 05:53:24.354 | 	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
2025-04-17 05:53:24.354 | 	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
2025-04-17 05:53:24.354 | 	at java.base/java.lang.Thread.run(Unknown Source)